(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[706],{49969:function(e,t,i){var n=i(75682).w_;e.exports.u=function(e){return n({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"}}]})(e)}},9676:function(e,t,i){var n=i(75682).w_;e.exports.x=function(e){return n({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"}}]})(e)}},85781:function(e,t,i){var n=i(75682).w_;e.exports.r=function(e){return n({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"}}]})(e)}},43966:function(e,t,i){"use strict";i.d(t,{r:function(){return a}});var n=i(3013),s=i(73321),r=i(85893);const a=({children:e})=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.Container,{as:"section",maxW:"8xl",pt:"6",id:"featuredproducts",bg:(0,s.ff)("white","gray.700"),borderWidth:"1px",mt:{base:4,md:12},mb:{base:8,md:24},px:4,py:4,borderRadius:"lg",children:(0,r.jsx)(n.Box,{children:e})})})},94046:function(e,t,i){"use strict";i.d(t,{f:function(){return x}});var n=i(43766),s=i(3013),r=i(1001),a=i(31421),l=i(9676),c=i(62105),o=i(11844),d=i(20498),h=i(85893);const x=({title:e,path:t})=>(0,h.jsxs)(s.Box,{position:"relative",color:"white",children:[(0,h.jsx)(d.c,{gimg:(0,h.jsx)(o.S,{src:"https://i.imgur.com/8zG2Ymd.jpeg",alt:"Banner with title and breadcrumbs",imgStyle:{width:"100%",height:"300px",objectFit:"cover"},__imageData:i(39270)})}),(0,h.jsx)(s.Flex,{position:"absolute",top:"5",w:"100%",justifyContent:"center",alignItems:"center",children:(0,h.jsxs)(s.Box,{w:"8xl",children:[(0,h.jsx)(g,{path:t}),(0,h.jsx)(s.Heading,{size:"2xl",my:"8",children:e})]})})]}),g=e=>{const t=e.path.split("/").filter(Boolean),i=t.length,o=t.map(((e,n)=>{const a="collections"===e||n===i-1;switch(e){case"collections":e="Kategorien";break;case"products":e="Produkte";break;case"shopping-cart":e="Merkliste";break;case"privacy":e="Datenschutz";break;case"contact":e="Kontakt"}let l=e.charAt(0).toUpperCase()+e.slice(1);return(0,h.jsx)(r.gN,{children:a?(0,h.jsx)(s.Text,{children:l}):(0,h.jsx)(r.At,{as:c.Link,to:`/${t.slice(0,n+1).join("/")}`,children:l})},e)}));return(0,h.jsxs)(r.aG,{spacing:"8px",separator:(0,h.jsx)(n.ChevronRightIcon,{color:"gray.500"}),my:4,children:[(0,h.jsx)(r.gN,{children:(0,h.jsx)(r.At,{as:c.Link,to:"/",children:(0,h.jsx)(a.JO,{as:l.x})})}),o]})}},31269:function(e,t,i){"use strict";i.d(t,{e:function(){return o}});var n=i(65214),s=i(3013),r=i(50258),a=i(9666),l=i(84960),c=i(85893);const o=({heading:e,products:t,prefixPath:i,...o})=>{const d=(0,a.wc)(t),h=o.columns?(0,n.Sx)(o.columns):0;return(0,c.jsxs)(c.Fragment,{children:[e&&(0,c.jsxs)(s.Box,{textAlign:"center",my:"10",children:[(0,c.jsx)(s.Heading,{size:"2xl",children:e}),(0,c.jsx)(r.n,{color:"agt.yellow",w:"unset",fontSize:"xl",mt:"5",mb:"10"})]}),(0,c.jsxs)(s.SimpleGrid,{...o,children:[t.map(((e,t)=>(0,c.jsx)(l.I,{prefixPath:i,product:e,left:0==(t+1)%h,borderline:!0},t))),d]})]})}},61507:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return L}});var n=i(64731),s=i(62880),r=i(28285),a=i(95422),l=i(3013),c=i(46174),o=i(98745),d=i(73321),h=i(16985),x=i(31421),g=i(17716),u=i(49969),p=i(85781),v=i(67294),j=i(43966),m=i(94046),f=i(31269),b=i(57639),P=i(56839),C=i(85893);const y=e=>{const t=[e.activeMinPrice||e.minPrice,e.activeMaxPrice||e.maxPrice],[i,n]=v.useState(t);return(0,C.jsxs)(l.Box,{children:[(0,C.jsx)(l.Text,{fontWeight:"bold",children:`Preisklasse (${i[0]} - ${i[1]}â‚¬)`}),(0,C.jsx)(l.Box,{px:"4",children:(0,C.jsxs)(b.U2,{colorScheme:"agt.yellowScheme",min:e.minPrice,max:e.maxPrice,defaultValue:t,value:i,onChange:e=>{n(e)},onChangeEnd:t=>e.onPriceChange(t[0],t[1]),children:[(0,C.jsx)(b.ug,{children:(0,C.jsx)(b.I2,{})}),(0,C.jsx)(b.xW,{boxSize:6,index:0}),(0,C.jsx)(b.xW,{boxSize:6,index:1})]})})]})},F=({label:e,values:t,activeValues:i,onChange:n,height:s="44"})=>0===t.length?null:(0,C.jsxs)(l.Stack,{spacing:1,children:[(0,C.jsx)(l.Text,{fontWeight:"semibold",pl:1,children:e}),(0,C.jsx)(l.Stack,{spacing:2,h:s,overflowY:"scroll",children:t.map((e=>{const t=i.includes(e.value);return(0,C.jsx)(P.XZ,{overflow:"visible",pl:1,isChecked:t,onChange:()=>n(t?i.filter((t=>t!==e.value)):[...i,e.value]),children:e.label},e.value)}))})]}),w=e=>{const[t,i]=v.useState(e.activeTags),{Kategorie:n,...s}=v.useMemo((()=>{const t={};for(const i of Object.values(e.allTags)){const[e,...n]=i.split(":"),s=n[n.length-1];t[e]=t[e]||[],t[e].push({tag:i,label:s})}return t}),[e.allTags]),r=t=>{i(t),e.onActiveTagsChange(t)};return(0,C.jsxs)(l.VStack,{pr:"4",spacing:4,divider:(0,C.jsx)(l.Divider,{}),align:"stretch",children:[n&&(0,C.jsx)(F,{label:"Kategorie",values:n.map((e=>({label:e.label,value:e.tag}))),activeValues:t,onChange:r}),(0,C.jsx)(F,{label:"Hersteller",values:e.allVendors.map((e=>({label:e,value:e}))),activeValues:e.activeVendors,onChange:e.onActiveVendorsChange,height:"24"}),(0,C.jsx)(F,{label:"Art",values:e.allProductTypes.map((e=>({label:e,value:e}))),activeValues:e.activeProductTypes,onChange:e.onActiveProductTypesChange,height:"14"}),e.priceFilter&&(0,C.jsx)(y,{...e.priceFilter}),Object.entries(s).map((([e,i])=>(0,C.jsx)(F,{label:e,values:i.map((e=>({label:e.label,value:e.tag}))),activeValues:t,onChange:r,height:"20"})))]})},k=e=>{const t=(0,a.qY)(),i=v.useRef(null);v.useEffect((()=>{const t=()=>{if(i.current){const t=i.current.getBoundingClientRect().bottom,n=window.pageYOffset+window.innerHeight;console.log(t,n),t<n&&e.fetchNextPage()}};return window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}}),[e.fetchNextPage]);const n=e.filters.tags.length>0||e.filters.vendors.length>0||e.filters.productTypes.length>0,s=!(null===e.filters.minPrice||null===e.filters.maxPrice||e.filters.minPrice===e.filters.maxPrice),r=!n&&!s,d=r?null:(0,C.jsx)(w,{activeTags:e.activeFilters.tags||[],allTags:e.filters.tags,activeVendors:e.activeFilters.vendors||[],allVendors:e.filters.vendors,activeProductTypes:e.activeFilters.productTypes||[],allProductTypes:e.filters.productTypes,onActiveTagsChange:t=>{e.updateFilter({tags:t})},onActiveVendorsChange:t=>{e.updateFilter({vendors:t})},onActiveProductTypesChange:t=>{e.updateFilter({productTypes:t})},priceFilter:s?{minPrice:e.filters.minPrice,maxPrice:e.filters.maxPrice,activeMinPrice:e.activeFilters.minPrice||void 0,activeMaxPrice:e.activeFilters.maxPrice||void 0,onPriceChange:(t,i)=>e.updateFilter({minPrice:t,maxPrice:i})}:void 0});return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(m.f,{title:"Produkte",path:e.path}),(0,C.jsxs)(j.r,{children:[(0,C.jsx)(S,{onMobileFilterClick:t.onToggle,sortOptions:e.sortOptions,onSortChange:e.onSortChange,disableFilter:!n&&!s}),(0,C.jsxs)(l.Flex,{children:[!r&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(c.dy,{isOpen:t.isOpen,onClose:t.onClose,placement:"left",blockScrollOnMount:!1,children:(0,C.jsxs)(c.sc,{p:"4",children:[(0,C.jsx)(l.Heading,{as:"h3",mb:"4",children:"Filter"}),d]})}),(0,C.jsx)(l.Box,{display:["none","none","none","block"],w:"30%",position:"sticky",top:"12",alignSelf:"flex-start",children:d})]}),(0,C.jsxs)(l.Box,{w:"100%",ref:i,children:[(0,C.jsx)(f.e,{products:e.products,columns:{base:2,sm:2,md:3,xl:4},spacing:"4"}),e.isFetching&&(0,C.jsx)(l.Center,{w:"100%",h:"xs",children:(0,C.jsx)(o.$,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"agt.blue",size:"xl"})})]})]})]})]})},S=e=>(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(l.Box,{my:"2",position:"sticky",top:"0",alignSelf:"flex-start",zIndex:"2",bg:(0,d.ff)("white","gray.700"),children:[(0,C.jsxs)(l.Flex,{children:[!e.disableFilter&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(h.zx,{display:["block","block","block","none"],variant:"unstyled",leftIcon:(0,C.jsx)(x.JO,{as:u.u}),onClick:e.onMobileFilterClick,children:"Filter"}),(0,C.jsx)(h.zx,{display:["none","none","none","block"],leftIcon:(0,C.jsx)(x.JO,{as:u.u}),variant:"unstyled",cursor:"default",_focus:{boxShadow:"none"},children:"Filter"})]}),(0,C.jsx)(l.Spacer,{}),(0,C.jsx)(l.Box,{children:(0,C.jsx)(g.Ph,{placeholder:"Sortieren",variant:"unstyled",my:"2",icon:(0,C.jsx)(x.JO,{as:p.r,mb:"1"}),defaultValue:e.sortOptions.length>0?e.sortOptions[0]:[],onChange:t=>e.onSortChange(t.target.value),children:e.sortOptions.map(((e,t)=>(0,C.jsx)("option",{value:e,children:e},t)))})})]}),(0,C.jsx)(l.Divider,{})]})}),T=e=>{const{implicitTags:t,tags:i,maxPrice:a,minPrice:l,vendors:c,productTypes:o}=e.pageContext,d=(0,s.ty)({filters:{mainTag:t.length>0?t[0]:void 0}});return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(n.SEO,{pagePath:e.path,pageMeta:(()=>{const t=e.pageContext.collectionId;let n="Sortiment",r="Unser Sortiment | Hersteller: "+c.join(", ")+" | Produkttypen: "+o.join(", ")+" | Tags: "+i.join(", ");if(t){const e=(0,s.ce)(t);e.name&&(n=e.name,r+=" | Kategorie: "+n)}return{title:n,description:r}})()}),(0,C.jsx)(r.A,{path:e.path,children:(0,C.jsx)(k,{path:e.path,products:d.products,isFetching:d.isFetching,fetchNextPage:d.fetchNextPage,filters:{tags:i,vendors:c,productTypes:o,minPrice:l,maxPrice:a},activeFilters:d.filters,updateFilter:e=>{console.log("set filters",e),d.onChangeFilter({...e,maxPrice:e.maxPrice||void 0,minPrice:e.minPrice||void 0})},sortOptions:["Alphabetisch","Preis aufsteigend","Preis absteigend"],onSortChange:e=>{let t,i;switch(e){case"Alphabetisch":default:t="TITLE",i=!1;break;case"Preis aufsteigend":t="PRICE",i=!1;break;case"Preis absteigend":t="PRICE",i=!0}d.onChangeOptions({sortKey:t,reverse:i})}})})]})};var L=e=>(0,C.jsx)(s.X$,{children:(0,C.jsx)(T,{...e})})}}]);
//# sourceMappingURL=component---src-templates-products-page-template-tsx-ed19ba4497b5be9688c1.js.map