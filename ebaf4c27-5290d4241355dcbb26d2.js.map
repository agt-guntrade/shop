{"version":3,"file":"ebaf4c27-5290d4241355dcbb26d2.js","mappings":"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","sources":["webpack://jaen-template-shopify/./node_modules/framer-motion/dist/framer-motion.cjs.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar tslib = require('tslib');\nvar React = require('react');\nvar heyListen = require('hey-listen');\nvar styleValueTypes = require('style-value-types');\nvar popmotion = require('popmotion');\nvar sync = require('framesync');\nfunction _interopDefaultLegacy(e) {\n  return e && typeof e === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function get() {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n  n['default'] = e;\n  return Object.freeze(n);\n}\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\nvar sync__default = /*#__PURE__*/_interopDefaultLegacy(sync);\nvar createDefinition = function createDefinition(propNames) {\n  return {\n    isEnabled: function isEnabled(props) {\n      return propNames.some(function (name) {\n        return !!props[name];\n      });\n    }\n  };\n};\nvar featureDefinitions = {\n  measureLayout: createDefinition([\"layout\", \"layoutId\", \"drag\", \"_layoutResetTransform\"]),\n  animation: createDefinition([\"animate\", \"exit\", \"variants\", \"whileHover\", \"whileTap\", \"whileFocus\", \"whileDrag\"]),\n  exit: createDefinition([\"exit\"]),\n  drag: createDefinition([\"drag\", \"dragControls\"]),\n  focus: createDefinition([\"whileFocus\"]),\n  hover: createDefinition([\"whileHover\", \"onHoverStart\", \"onHoverEnd\"]),\n  tap: createDefinition([\"whileTap\", \"onTap\", \"onTapStart\", \"onTapCancel\"]),\n  pan: createDefinition([\"onPan\", \"onPanStart\", \"onPanSessionStart\", \"onPanEnd\"]),\n  layoutAnimation: createDefinition([\"layout\", \"layoutId\"])\n};\nfunction loadFeatures(features) {\n  for (var key in features) {\n    var Component = features[key];\n    if (Component !== null) featureDefinitions[key].Component = Component;\n  }\n}\nvar LazyContext = React.createContext({\n  strict: false\n});\nvar featureNames = Object.keys(featureDefinitions);\nvar numFeatures = featureNames.length;\n/**\n * Load features via renderless components based on the provided MotionProps.\n */\nfunction useFeatures(props, visualElement, preloadedFeatures) {\n  var features = [];\n  var lazyContext = React.useContext(LazyContext);\n  if (!visualElement) return null;\n  /**\n   * If we're in development mode, check to make sure we're not rendering a motion component\n   * as a child of LazyMotion, as this will break the file-size benefits of using it.\n   */\n  if (process.env.NODE_ENV !== \"production\" && preloadedFeatures && lazyContext.strict) {\n    heyListen.invariant(false, \"You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.\");\n  }\n  for (var i = 0; i < numFeatures; i++) {\n    var name_1 = featureNames[i];\n    var _a = featureDefinitions[name_1],\n      isEnabled = _a.isEnabled,\n      Component = _a.Component;\n    /**\n     * It might be possible in the future to use this moment to\n     * dynamically request functionality. In initial tests this\n     * was producing a lot of duplication amongst bundles.\n     */\n    if (isEnabled(props) && Component) {\n      features.push(React__namespace.createElement(Component, tslib.__assign({\n        key: name_1\n      }, props, {\n        visualElement: visualElement\n      })));\n    }\n  }\n  return features;\n}\n\n/**\n * @public\n */\nvar MotionConfigContext = React.createContext({\n  transformPagePoint: function transformPagePoint(p) {\n    return p;\n  },\n  isStatic: false\n});\nvar MotionContext = React.createContext({});\nfunction useVisualElementContext() {\n  return React.useContext(MotionContext).visualElement;\n}\n\n/**\n * @public\n */\nvar PresenceContext = React.createContext(null);\n\n/**\n * Creates a constant value over the lifecycle of a component.\n *\n * Even if `useMemo` is provided an empty array as its final argument, it doesn't offer\n * a guarantee that it won't re-run for performance reasons later on. By using `useConstant`\n * you can ensure that initialisers don't execute twice or more.\n */\nfunction useConstant(init) {\n  var ref = React.useRef(null);\n  if (ref.current === null) {\n    ref.current = init();\n  }\n  return ref.current;\n}\n\n/**\n * When a component is the child of `AnimatePresence`, it can use `usePresence`\n * to access information about whether it's still present in the React tree.\n *\n * ```jsx\n * import { usePresence } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const [isPresent, safeToRemove] = usePresence()\n *\n *   useEffect(() => {\n *     !isPresent && setTimeout(safeToRemove, 1000)\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * If `isPresent` is `false`, it means that a component has been removed the tree, but\n * `AnimatePresence` won't really remove it until `safeToRemove` has been called.\n *\n * @public\n */\nfunction usePresence() {\n  var context = React.useContext(PresenceContext);\n  if (context === null) return [true, null];\n  var isPresent = context.isPresent,\n    onExitComplete = context.onExitComplete,\n    register = context.register;\n  // It's safe to call the following hooks conditionally (after an early return) because the context will always\n  // either be null or non-null for the lifespan of the component.\n  // Replace with useOpaqueId when released in React\n  var id = useUniqueId();\n  React.useEffect(function () {\n    return register(id);\n  }, []);\n  var safeToRemove = function safeToRemove() {\n    return onExitComplete === null || onExitComplete === void 0 ? void 0 : onExitComplete(id);\n  };\n  return !isPresent && onExitComplete ? [false, safeToRemove] : [true];\n}\n/**\n * Similar to `usePresence`, except `useIsPresent` simply returns whether or not the component is present.\n * There is no `safeToRemove` function.\n *\n * ```jsx\n * import { useIsPresent } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const isPresent = useIsPresent()\n *\n *   useEffect(() => {\n *     !isPresent && console.log(\"I've been removed!\")\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * @public\n */\nfunction useIsPresent() {\n  return isPresent(React.useContext(PresenceContext));\n}\nfunction isPresent(context) {\n  return context === null ? true : context.isPresent;\n}\nvar counter = 0;\nvar incrementId = function incrementId() {\n  return counter++;\n};\nvar useUniqueId = function useUniqueId() {\n  return useConstant(incrementId);\n};\n\n/**\n * @internal\n */\nvar LayoutGroupContext = React.createContext(null);\nvar isBrowser = typeof window !== \"undefined\";\nvar useIsomorphicLayoutEffect = isBrowser ? React.useLayoutEffect : React.useEffect;\nfunction useLayoutId(_a) {\n  var layoutId = _a.layoutId;\n  var layoutGroupId = React.useContext(LayoutGroupContext);\n  return layoutGroupId && layoutId !== undefined ? layoutGroupId + \"-\" + layoutId : layoutId;\n}\nfunction useVisualElement(Component, visualState, props, createVisualElement) {\n  var config = React.useContext(MotionConfigContext);\n  var lazyContext = React.useContext(LazyContext);\n  var parent = useVisualElementContext();\n  var presenceContext = React.useContext(PresenceContext);\n  var layoutId = useLayoutId(props);\n  var visualElementRef = React.useRef(undefined);\n  /**\n   * If we haven't preloaded a renderer, check to see if we have one lazy-loaded\n   */\n  if (!createVisualElement) createVisualElement = lazyContext.renderer;\n  if (!visualElementRef.current && createVisualElement) {\n    visualElementRef.current = createVisualElement(Component, {\n      visualState: visualState,\n      parent: parent,\n      props: tslib.__assign(tslib.__assign({}, props), {\n        layoutId: layoutId\n      }),\n      presenceId: presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.id,\n      blockInitialAnimation: (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.initial) === false\n    });\n  }\n  var visualElement = visualElementRef.current;\n  useIsomorphicLayoutEffect(function () {\n    if (!visualElement) return;\n    visualElement.setProps(tslib.__assign(tslib.__assign(tslib.__assign({}, config), props), {\n      layoutId: layoutId\n    }));\n    visualElement.isPresent = isPresent(presenceContext);\n    visualElement.isPresenceRoot = !parent || parent.presenceId !== (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.id);\n    /**\n     * Fire a render to ensure the latest state is reflected on-screen.\n     */\n    visualElement.syncRender();\n  });\n  React.useEffect(function () {\n    var _a;\n    if (!visualElement) return;\n    /**\n     * In a future refactor we can replace the features-as-components and\n     * have this loop through them all firing \"effect\" listeners\n     */\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.animateChanges();\n  });\n  useIsomorphicLayoutEffect(function () {\n    return function () {\n      return visualElement === null || visualElement === void 0 ? void 0 : visualElement.notifyUnmount();\n    };\n  }, []);\n  return visualElement;\n}\nfunction isRefObject(ref) {\n  return typeof ref === \"object\" && Object.prototype.hasOwnProperty.call(ref, \"current\");\n}\n\n/**\n * Creates a ref function that, when called, hydrates the provided\n * external ref and VisualElement.\n */\nfunction useMotionRef(visualState, visualElement, externalRef) {\n  return React.useCallback(function (instance) {\n    var _a;\n    instance && ((_a = visualState.mount) === null || _a === void 0 ? void 0 : _a.call(visualState, instance));\n    if (visualElement) {\n      instance ? visualElement.mount(instance) : visualElement.unmount();\n    }\n    if (externalRef) {\n      if (typeof externalRef === \"function\") {\n        externalRef(instance);\n      } else if (isRefObject(externalRef)) {\n        externalRef.current = instance;\n      }\n    }\n  },\n  /**\n   * Only pass a new ref callback to React if we've received a visual element\n   * factory. Otherwise we'll be mounting/remounting every time externalRef\n   * or other dependencies change.\n   */\n  [visualElement]);\n}\n\n/**\n * Decides if the supplied variable is an array of variant labels\n */\nfunction isVariantLabels(v) {\n  return Array.isArray(v);\n}\n/**\n * Decides if the supplied variable is variant label\n */\nfunction isVariantLabel(v) {\n  return typeof v === \"string\" || isVariantLabels(v);\n}\n/**\n * Creates an object containing the latest state of every MotionValue on a VisualElement\n */\nfunction getCurrent(visualElement) {\n  var current = {};\n  visualElement.forEachValue(function (value, key) {\n    return current[key] = value.get();\n  });\n  return current;\n}\n/**\n * Creates an object containing the latest velocity of every MotionValue on a VisualElement\n */\nfunction getVelocity$1(visualElement) {\n  var velocity = {};\n  visualElement.forEachValue(function (value, key) {\n    return velocity[key] = value.getVelocity();\n  });\n  return velocity;\n}\nfunction resolveVariantFromProps(props, definition, custom, currentValues, currentVelocity) {\n  var _a;\n  if (currentValues === void 0) {\n    currentValues = {};\n  }\n  if (currentVelocity === void 0) {\n    currentVelocity = {};\n  }\n  if (typeof definition === \"string\") {\n    definition = (_a = props.variants) === null || _a === void 0 ? void 0 : _a[definition];\n  }\n  return typeof definition === \"function\" ? definition(custom !== null && custom !== void 0 ? custom : props.custom, currentValues, currentVelocity) : definition;\n}\nfunction resolveVariant(visualElement, definition, custom) {\n  var props = visualElement.getProps();\n  return resolveVariantFromProps(props, definition, custom !== null && custom !== void 0 ? custom : props.custom, getCurrent(visualElement), getVelocity$1(visualElement));\n}\nfunction checkIfControllingVariants(props) {\n  var _a;\n  return typeof ((_a = props.animate) === null || _a === void 0 ? void 0 : _a.start) === \"function\" || isVariantLabel(props.initial) || isVariantLabel(props.animate) || isVariantLabel(props.whileHover) || isVariantLabel(props.whileDrag) || isVariantLabel(props.whileTap) || isVariantLabel(props.whileFocus) || isVariantLabel(props.exit);\n}\nfunction checkIfVariantNode(props) {\n  return Boolean(checkIfControllingVariants(props) || props.variants);\n}\nfunction getCurrentTreeVariants(props, context) {\n  if (checkIfControllingVariants(props)) {\n    var initial = props.initial,\n      animate = props.animate;\n    return {\n      initial: initial === false || isVariantLabel(initial) ? initial : undefined,\n      animate: isVariantLabel(animate) ? animate : undefined\n    };\n  }\n  return props.inherit !== false ? context : {};\n}\nfunction useCreateMotionContext(props, isStatic) {\n  var _a = getCurrentTreeVariants(props, React.useContext(MotionContext)),\n    initial = _a.initial,\n    animate = _a.animate;\n  return React.useMemo(function () {\n    return {\n      initial: initial,\n      animate: animate\n    };\n  },\n  /**\n   * Only break memoisation in static mode\n   */\n  isStatic ? [variantLabelsAsDependency(initial), variantLabelsAsDependency(animate)] : []);\n}\nfunction variantLabelsAsDependency(prop) {\n  return Array.isArray(prop) ? prop.join(\" \") : prop;\n}\n\n/**\n * Create a `motion` component.\n *\n * This function accepts a Component argument, which can be either a string (ie \"div\"\n * for `motion.div`), or an actual React component.\n *\n * Alongside this is a config option which provides a way of rendering the provided\n * component \"offline\", or outside the React render cycle.\n *\n * @internal\n */\nfunction createMotionComponent(_a) {\n  var preloadedFeatures = _a.preloadedFeatures,\n    createVisualElement = _a.createVisualElement,\n    useRender = _a.useRender,\n    useVisualState = _a.useVisualState,\n    Component = _a.Component;\n  preloadedFeatures && loadFeatures(preloadedFeatures);\n  function MotionComponent(props, externalRef) {\n    /**\n     * If we're rendering in a static environment, we only visually update the component\n     * as a result of a React-rerender rather than interactions or animations. This\n     * means we don't need to load additional memory structures like VisualElement,\n     * or any gesture/animation features.\n     */\n    var isStatic = React.useContext(MotionConfigContext).isStatic;\n    var features = null;\n    /**\n     * Create the tree context. This is memoized and will only trigger renders\n     * when the current tree variant changes in static mode.\n     */\n    var context = useCreateMotionContext(props, isStatic);\n    /**\n     *\n     */\n    var visualState = useVisualState(props, isStatic);\n    if (!isStatic && isBrowser) {\n      /**\n       * Create a VisualElement for this component. A VisualElement provides a common\n       * interface to renderer-specific APIs (ie DOM/Three.js etc) as well as\n       * providing a way of rendering to these APIs outside of the React render loop\n       * for more performant animations and interactions\n       */\n      context.visualElement = useVisualElement(Component, visualState, props, createVisualElement);\n      /**\n       * Load Motion gesture and animation features. These are rendered as renderless\n       * components so each feature can optionally make use of React lifecycle methods.\n       *\n       * TODO: The intention is to move these away from a React-centric to a\n       * VisualElement-centric lifecycle scheme.\n       */\n      features = useFeatures(props, context.visualElement, preloadedFeatures);\n    }\n    /**\n     * The mount order and hierarchy is specific to ensure our element ref\n     * is hydrated by the time features fire their effects.\n     */\n    return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(MotionContext.Provider, {\n      value: context\n    }, useRender(Component, props, useMotionRef(visualState, context.visualElement, externalRef), visualState, isStatic)), features);\n  }\n  return React.forwardRef(MotionComponent);\n}\n\n/**\n * Convert any React component into a `motion` component. The provided component\n * **must** use `React.forwardRef` to the underlying DOM component you want to animate.\n *\n * ```jsx\n * const Component = React.forwardRef((props, ref) => {\n *   return <div ref={ref} />\n * })\n *\n * const MotionComponent = motion(Component)\n * ```\n *\n * @public\n */\nfunction createMotionProxy(createConfig) {\n  function custom(Component, customMotionComponentConfig) {\n    if (customMotionComponentConfig === void 0) {\n      customMotionComponentConfig = {};\n    }\n    return createMotionComponent(createConfig(Component, customMotionComponentConfig));\n  }\n  /**\n   * A cache of generated `motion` components, e.g `motion.div`, `motion.input` etc.\n   * Rather than generating them anew every render.\n   */\n  var componentCache = new Map();\n  return new Proxy(custom, {\n    /**\n     * Called when `motion` is referenced with a prop: `motion.div`, `motion.input` etc.\n     * The prop name is passed through as `key` and we can use that to generate a `motion`\n     * DOM component with that name.\n     */\n    get: function get(_target, key) {\n      /**\n       * If this element doesn't exist in the component cache, create it and cache.\n       */\n      if (!componentCache.has(key)) {\n        componentCache.set(key, custom(key));\n      }\n      return componentCache.get(key);\n    }\n  });\n}\n\n/**\n * We keep these listed seperately as we use the lowercase tag names as part\n * of the runtime bundle to detect SVG components\n */\nvar lowercaseSVGElements = [\"animate\", \"circle\", \"defs\", \"desc\", \"ellipse\", \"g\", \"image\", \"line\", \"filter\", \"marker\", \"mask\", \"metadata\", \"path\", \"pattern\", \"polygon\", \"polyline\", \"rect\", \"stop\", \"svg\", \"switch\", \"symbol\", \"text\", \"tspan\", \"use\", \"view\"];\nfunction isSVGComponent(Component) {\n  if (\n  /**\n   * If it's not a string, it's a custom React component. Currently we only support\n   * HTML custom React components.\n   */\n  typeof Component !== \"string\" ||\n  /**\n   * If it contains a dash, the element is a custom HTML webcomponent.\n   */\n  Component.includes(\"-\")) {\n    return false;\n  } else if (\n  /**\n   * If it's in our list of lowercase SVG tags, it's an SVG component\n   */\n  lowercaseSVGElements.indexOf(Component) > -1 ||\n  /**\n   * If it contains a capital letter, it's an SVG component\n   */\n  /[A-Z]/.test(Component)) {\n    return true;\n  }\n  return false;\n}\nvar valueScaleCorrection = {};\n/**\n * @internal\n */\nfunction addScaleCorrection(correctors) {\n  for (var key in correctors) {\n    valueScaleCorrection[key] = correctors[key];\n  }\n}\n\n/**\n * A list of all transformable axes. We'll use this list to generated a version\n * of each axes for each transform.\n */\nvar transformAxes = [\"\", \"X\", \"Y\", \"Z\"];\n/**\n * An ordered array of each transformable value. By default, transform values\n * will be sorted to this order.\n */\nvar order = [\"translate\", \"scale\", \"rotate\", \"skew\"];\n/**\n * Generate a list of every possible transform key.\n */\nvar transformProps = [\"transformPerspective\", \"x\", \"y\", \"z\"];\norder.forEach(function (operationKey) {\n  return transformAxes.forEach(function (axesKey) {\n    return transformProps.push(operationKey + axesKey);\n  });\n});\n/**\n * A function to use with Array.sort to sort transform keys by their default order.\n */\nfunction sortTransformProps(a, b) {\n  return transformProps.indexOf(a) - transformProps.indexOf(b);\n}\n/**\n * A quick lookup for transform props.\n */\nvar transformPropSet = new Set(transformProps);\nfunction isTransformProp(key) {\n  return transformPropSet.has(key);\n}\n/**\n * A quick lookup for transform origin props\n */\nvar transformOriginProps = new Set([\"originX\", \"originY\", \"originZ\"]);\nfunction isTransformOriginProp(key) {\n  return transformOriginProps.has(key);\n}\nfunction isForcedMotionValue(key, _a) {\n  var layout = _a.layout,\n    layoutId = _a.layoutId;\n  return isTransformProp(key) || isTransformOriginProp(key) || (layout || layoutId !== undefined) && (!!valueScaleCorrection[key] || key === \"opacity\");\n}\nvar isMotionValue = function isMotionValue(value) {\n  return value !== null && typeof value === \"object\" && value.getVelocity;\n};\nvar translateAlias = {\n  x: \"translateX\",\n  y: \"translateY\",\n  z: \"translateZ\",\n  transformPerspective: \"perspective\"\n};\n/**\n * Build a CSS transform style from individual x/y/scale etc properties.\n *\n * This outputs with a default order of transforms/scales/rotations, this can be customised by\n * providing a transformTemplate function.\n */\nfunction buildTransform(_a, _b, transformIsDefault, transformTemplate) {\n  var transform = _a.transform,\n    transformKeys = _a.transformKeys;\n  var _c = _b.enableHardwareAcceleration,\n    enableHardwareAcceleration = _c === void 0 ? true : _c,\n    _d = _b.allowTransformNone,\n    allowTransformNone = _d === void 0 ? true : _d;\n  // The transform string we're going to build into.\n  var transformString = \"\";\n  // Transform keys into their default order - this will determine the output order.\n  transformKeys.sort(sortTransformProps);\n  // Track whether the defined transform has a defined z so we don't add a\n  // second to enable hardware acceleration\n  var transformHasZ = false;\n  // Loop over each transform and build them into transformString\n  var numTransformKeys = transformKeys.length;\n  for (var i = 0; i < numTransformKeys; i++) {\n    var key = transformKeys[i];\n    transformString += (translateAlias[key] || key) + \"(\" + transform[key] + \") \";\n    if (key === \"z\") transformHasZ = true;\n  }\n  if (!transformHasZ && enableHardwareAcceleration) {\n    transformString += \"translateZ(0)\";\n  } else {\n    transformString = transformString.trim();\n  }\n  // If we have a custom `transform` template, pass our transform values and\n  // generated transformString to that before returning\n  if (transformTemplate) {\n    transformString = transformTemplate(transform, transformIsDefault ? \"\" : transformString);\n  } else if (allowTransformNone && transformIsDefault) {\n    transformString = \"none\";\n  }\n  return transformString;\n}\n/**\n * Build a transformOrigin style. Uses the same defaults as the browser for\n * undefined origins.\n */\nfunction buildTransformOrigin(_a) {\n  var _b = _a.originX,\n    originX = _b === void 0 ? \"50%\" : _b,\n    _c = _a.originY,\n    originY = _c === void 0 ? \"50%\" : _c,\n    _d = _a.originZ,\n    originZ = _d === void 0 ? 0 : _d;\n  return originX + \" \" + originY + \" \" + originZ;\n}\n\n/**\n * Returns true if the provided key is a CSS variable\n */\nfunction isCSSVariable$1(key) {\n  return key.startsWith(\"--\");\n}\n\n/**\n * Provided a value and a ValueType, returns the value as that value type.\n */\nvar getValueAsType = function getValueAsType(value, type) {\n  return type && typeof value === \"number\" ? type.transform(value) : value;\n};\nvar int = tslib.__assign(tslib.__assign({}, styleValueTypes.number), {\n  transform: Math.round\n});\nvar numberValueTypes = {\n  // Border props\n  borderWidth: styleValueTypes.px,\n  borderTopWidth: styleValueTypes.px,\n  borderRightWidth: styleValueTypes.px,\n  borderBottomWidth: styleValueTypes.px,\n  borderLeftWidth: styleValueTypes.px,\n  borderRadius: styleValueTypes.px,\n  radius: styleValueTypes.px,\n  borderTopLeftRadius: styleValueTypes.px,\n  borderTopRightRadius: styleValueTypes.px,\n  borderBottomRightRadius: styleValueTypes.px,\n  borderBottomLeftRadius: styleValueTypes.px,\n  // Positioning props\n  width: styleValueTypes.px,\n  maxWidth: styleValueTypes.px,\n  height: styleValueTypes.px,\n  maxHeight: styleValueTypes.px,\n  size: styleValueTypes.px,\n  top: styleValueTypes.px,\n  right: styleValueTypes.px,\n  bottom: styleValueTypes.px,\n  left: styleValueTypes.px,\n  // Spacing props\n  padding: styleValueTypes.px,\n  paddingTop: styleValueTypes.px,\n  paddingRight: styleValueTypes.px,\n  paddingBottom: styleValueTypes.px,\n  paddingLeft: styleValueTypes.px,\n  margin: styleValueTypes.px,\n  marginTop: styleValueTypes.px,\n  marginRight: styleValueTypes.px,\n  marginBottom: styleValueTypes.px,\n  marginLeft: styleValueTypes.px,\n  // Transform props\n  rotate: styleValueTypes.degrees,\n  rotateX: styleValueTypes.degrees,\n  rotateY: styleValueTypes.degrees,\n  rotateZ: styleValueTypes.degrees,\n  scale: styleValueTypes.scale,\n  scaleX: styleValueTypes.scale,\n  scaleY: styleValueTypes.scale,\n  scaleZ: styleValueTypes.scale,\n  skew: styleValueTypes.degrees,\n  skewX: styleValueTypes.degrees,\n  skewY: styleValueTypes.degrees,\n  distance: styleValueTypes.px,\n  translateX: styleValueTypes.px,\n  translateY: styleValueTypes.px,\n  translateZ: styleValueTypes.px,\n  x: styleValueTypes.px,\n  y: styleValueTypes.px,\n  z: styleValueTypes.px,\n  perspective: styleValueTypes.px,\n  transformPerspective: styleValueTypes.px,\n  opacity: styleValueTypes.alpha,\n  originX: styleValueTypes.progressPercentage,\n  originY: styleValueTypes.progressPercentage,\n  originZ: styleValueTypes.px,\n  // Misc\n  zIndex: int,\n  // SVG\n  fillOpacity: styleValueTypes.alpha,\n  strokeOpacity: styleValueTypes.alpha,\n  numOctaves: int\n};\nfunction buildHTMLStyles(state, latestValues, projection, layoutState, options, transformTemplate, buildProjectionTransform, buildProjectionTransformOrigin) {\n  var _a;\n  var style = state.style,\n    vars = state.vars,\n    transform = state.transform,\n    transformKeys = state.transformKeys,\n    transformOrigin = state.transformOrigin;\n  // Empty the transformKeys array. As we're throwing out refs to its items\n  // this might not be as cheap as suspected. Maybe using the array as a buffer\n  // with a manual incrementation would be better.\n  transformKeys.length = 0;\n  // Track whether we encounter any transform or transformOrigin values.\n  var hasTransform = false;\n  var hasTransformOrigin = false;\n  // Does the calculated transform essentially equal \"none\"?\n  var transformIsNone = true;\n  /**\n   * Loop over all our latest animated values and decide whether to handle them\n   * as a style or CSS variable.\n   *\n   * Transforms and transform origins are kept seperately for further processing.\n   */\n  for (var key in latestValues) {\n    var value = latestValues[key];\n    /**\n     * If this is a CSS variable we don't do any further processing.\n     */\n    if (isCSSVariable$1(key)) {\n      vars[key] = value;\n      continue;\n    }\n    // Convert the value to its default value type, ie 0 -> \"0px\"\n    var valueType = numberValueTypes[key];\n    var valueAsType = getValueAsType(value, valueType);\n    if (isTransformProp(key)) {\n      // If this is a transform, flag to enable further transform processing\n      hasTransform = true;\n      transform[key] = valueAsType;\n      transformKeys.push(key);\n      // If we already know we have a non-default transform, early return\n      if (!transformIsNone) continue;\n      // Otherwise check to see if this is a default transform\n      if (value !== ((_a = valueType.default) !== null && _a !== void 0 ? _a : 0)) transformIsNone = false;\n    } else if (isTransformOriginProp(key)) {\n      transformOrigin[key] = valueAsType;\n      // If this is a transform origin, flag and enable further transform-origin processing\n      hasTransformOrigin = true;\n    } else {\n      /**\n       * If layout projection is on, and we need to perform scale correction for this\n       * value type, perform it.\n       */\n      if ((projection === null || projection === void 0 ? void 0 : projection.isHydrated) && (layoutState === null || layoutState === void 0 ? void 0 : layoutState.isHydrated) && valueScaleCorrection[key]) {\n        var correctedValue = valueScaleCorrection[key].process(value, layoutState, projection);\n        /**\n         * Scale-correctable values can define a number of other values to break\n         * down into. For instance borderRadius needs applying to borderBottomLeftRadius etc\n         */\n        var applyTo = valueScaleCorrection[key].applyTo;\n        if (applyTo) {\n          var num = applyTo.length;\n          for (var i = 0; i < num; i++) {\n            style[applyTo[i]] = correctedValue;\n          }\n        } else {\n          style[key] = correctedValue;\n        }\n      } else {\n        style[key] = valueAsType;\n      }\n    }\n  }\n  if (layoutState && projection && buildProjectionTransform && buildProjectionTransformOrigin) {\n    style.transform = buildProjectionTransform(layoutState.deltaFinal, layoutState.treeScale, hasTransform ? transform : undefined);\n    if (transformTemplate) {\n      style.transform = transformTemplate(transform, style.transform);\n    }\n    style.transformOrigin = buildProjectionTransformOrigin(layoutState);\n  } else {\n    if (hasTransform) {\n      style.transform = buildTransform(state, options, transformIsNone, transformTemplate);\n    }\n    if (hasTransformOrigin) {\n      style.transformOrigin = buildTransformOrigin(transformOrigin);\n    }\n  }\n}\nvar createHtmlRenderState = function createHtmlRenderState() {\n  return {\n    style: {},\n    transform: {},\n    transformKeys: [],\n    transformOrigin: {},\n    vars: {}\n  };\n};\nfunction copyRawValuesOnly(target, source, props) {\n  for (var key in source) {\n    if (!isMotionValue(source[key]) && !isForcedMotionValue(key, props)) {\n      target[key] = source[key];\n    }\n  }\n}\nfunction useInitialMotionValues(_a, visualState, isStatic) {\n  var transformTemplate = _a.transformTemplate;\n  return React.useMemo(function () {\n    var state = createHtmlRenderState();\n    buildHTMLStyles(state, visualState, undefined, undefined, {\n      enableHardwareAcceleration: !isStatic\n    }, transformTemplate);\n    var vars = state.vars,\n      style = state.style;\n    return tslib.__assign(tslib.__assign({}, vars), style);\n  }, [visualState]);\n}\nfunction useStyle(props, visualState, isStatic) {\n  var styleProp = props.style || {};\n  var style = {};\n  /**\n   * Copy non-Motion Values straight into style\n   */\n  copyRawValuesOnly(style, styleProp, props);\n  Object.assign(style, useInitialMotionValues(props, visualState, isStatic));\n  if (props.transformValues) {\n    style = props.transformValues(style);\n  }\n  return style;\n}\nfunction useHTMLProps(props, visualState, isStatic) {\n  // The `any` isn't ideal but it is the type of createElement props argument\n  var htmlProps = {};\n  var style = useStyle(props, visualState, isStatic);\n  if (Boolean(props.drag)) {\n    // Disable the ghost element when a user drags\n    htmlProps.draggable = false;\n    // Disable text selection\n    style.userSelect = style.WebkitUserSelect = style.WebkitTouchCallout = \"none\";\n    // Disable scrolling on the draggable direction\n    style.touchAction = props.drag === true ? \"none\" : \"pan-\" + (props.drag === \"x\" ? \"y\" : \"x\");\n  }\n  htmlProps.style = style;\n  return htmlProps;\n}\n\n/**\n * A list of all valid MotionProps.\n *\n * @internalremarks\n * This doesn't throw if a `MotionProp` name is missing - it should.\n */\nvar validMotionProps = new Set([\"initial\", \"animate\", \"exit\", \"style\", \"variants\", \"transition\", \"transformTemplate\", \"transformValues\", \"custom\", \"inherit\", \"layout\", \"layoutId\", \"_layoutResetTransform\", \"onLayoutAnimationComplete\", \"onViewportBoxUpdate\", \"onLayoutMeasure\", \"onBeforeLayoutMeasure\", \"onAnimationStart\", \"onAnimationComplete\", \"onUpdate\", \"onDragStart\", \"onDrag\", \"onDragEnd\", \"onMeasureDragConstraints\", \"onDirectionLock\", \"onDragTransitionEnd\", \"drag\", \"dragControls\", \"dragListener\", \"dragConstraints\", \"dragDirectionLock\", \"_dragX\", \"_dragY\", \"dragElastic\", \"dragMomentum\", \"dragPropagation\", \"dragTransition\", \"whileDrag\", \"onPan\", \"onPanStart\", \"onPanEnd\", \"onPanSessionStart\", \"onTap\", \"onTapStart\", \"onTapCancel\", \"onHoverStart\", \"onHoverEnd\", \"whileFocus\", \"whileTap\", \"whileHover\"]);\n/**\n * Check whether a prop name is a valid `MotionProp` key.\n *\n * @param key - Name of the property to check\n * @returns `true` is key is a valid `MotionProp`.\n *\n * @public\n */\nfunction isValidMotionProp(key) {\n  return validMotionProps.has(key);\n}\nvar shouldForward = function shouldForward(key) {\n  return !isValidMotionProp(key);\n};\n/**\n * Emotion and Styled Components both allow users to pass through arbitrary props to their components\n * to dynamically generate CSS. They both use the `@emotion/is-prop-valid` package to determine which\n * of these should be passed to the underlying DOM node.\n *\n * However, when styling a Motion component `styled(motion.div)`, both packages pass through *all* props\n * as it's seen as an arbitrary component rather than a DOM node. Motion only allows arbitrary props\n * passed through the `custom` prop so it doesn't *need* the payload or computational overhead of\n * `@emotion/is-prop-valid`, however to fix this problem we need to use it.\n *\n * By making it an optionalDependency we can offer this functionality only in the situations where it's\n * actually required.\n */\ntry {\n  var emotionIsPropValid_1 = require(\"@emotion/is-prop-valid\").default;\n  shouldForward = function shouldForward(key) {\n    // Handle events explicitly as Emotion validates them all as true\n    if (key.startsWith(\"on\")) {\n      return !isValidMotionProp(key);\n    } else {\n      return emotionIsPropValid_1(key);\n    }\n  };\n} catch (_a) {\n  // We don't need to actually do anything here - the fallback is the existing `isPropValid`.\n}\nfunction filterProps(props, isDom, forwardMotionProps) {\n  var filteredProps = {};\n  for (var key in props) {\n    if (shouldForward(key) || forwardMotionProps === true && isValidMotionProp(key) || !isDom && !isValidMotionProp(key)) {\n      filteredProps[key] = props[key];\n    }\n  }\n  return filteredProps;\n}\nfunction calcOrigin$1(origin, offset, size) {\n  return typeof origin === \"string\" ? origin : styleValueTypes.px.transform(offset + size * origin);\n}\n/**\n * The SVG transform origin defaults are different to CSS and is less intuitive,\n * so we use the measured dimensions of the SVG to reconcile these.\n */\nfunction calcSVGTransformOrigin(dimensions, originX, originY) {\n  var pxOriginX = calcOrigin$1(originX, dimensions.x, dimensions.width);\n  var pxOriginY = calcOrigin$1(originY, dimensions.y, dimensions.height);\n  return pxOriginX + \" \" + pxOriginY;\n}\n\n// Convert a progress 0-1 to a pixels value based on the provided length\nvar progressToPixels = function progressToPixels(progress, length) {\n  return styleValueTypes.px.transform(progress * length);\n};\nvar dashKeys = {\n  offset: \"stroke-dashoffset\",\n  array: \"stroke-dasharray\"\n};\nvar camelKeys = {\n  offset: \"strokeDashoffset\",\n  array: \"strokeDasharray\"\n};\n/**\n * Build SVG path properties. Uses the path's measured length to convert\n * our custom pathLength, pathSpacing and pathOffset into stroke-dashoffset\n * and stroke-dasharray attributes.\n *\n * This function is mutative to reduce per-frame GC.\n */\nfunction buildSVGPath(attrs, totalLength, length, spacing, offset, useDashCase) {\n  if (spacing === void 0) {\n    spacing = 1;\n  }\n  if (offset === void 0) {\n    offset = 0;\n  }\n  if (useDashCase === void 0) {\n    useDashCase = true;\n  }\n  // We use dash case when setting attributes directly to the DOM node and camel case\n  // when defining props on a React component.\n  var keys = useDashCase ? dashKeys : camelKeys;\n  // Build the dash offset\n  attrs[keys.offset] = progressToPixels(-offset, totalLength);\n  // Build the dash array\n  var pathLength = progressToPixels(length, totalLength);\n  var pathSpacing = progressToPixels(spacing, totalLength);\n  attrs[keys.array] = pathLength + \" \" + pathSpacing;\n}\n\n/**\n * Build SVG visual attrbutes, like cx and style.transform\n */\nfunction buildSVGAttrs(state, _a, projection, layoutState, options, transformTemplate, buildProjectionTransform, buildProjectionTransformOrigin) {\n  var attrX = _a.attrX,\n    attrY = _a.attrY,\n    originX = _a.originX,\n    originY = _a.originY,\n    pathLength = _a.pathLength,\n    _b = _a.pathSpacing,\n    pathSpacing = _b === void 0 ? 1 : _b,\n    _c = _a.pathOffset,\n    pathOffset = _c === void 0 ? 0 : _c,\n    // This is object creation, which we try to avoid per-frame.\n    latest = tslib.__rest(_a, [\"attrX\", \"attrY\", \"originX\", \"originY\", \"pathLength\", \"pathSpacing\", \"pathOffset\"]);\n  buildHTMLStyles(state, latest, projection, layoutState, options, transformTemplate, buildProjectionTransform, buildProjectionTransformOrigin);\n  state.attrs = state.style;\n  state.style = {};\n  var attrs = state.attrs,\n    style = state.style,\n    dimensions = state.dimensions,\n    totalPathLength = state.totalPathLength;\n  /**\n   * However, we apply transforms as CSS transforms. So if we detect a transform we take it from attrs\n   * and copy it into style.\n   */\n  if (attrs.transform) {\n    if (dimensions) style.transform = attrs.transform;\n    delete attrs.transform;\n  }\n  // Parse transformOrigin\n  if (dimensions && (originX !== undefined || originY !== undefined || style.transform)) {\n    style.transformOrigin = calcSVGTransformOrigin(dimensions, originX !== undefined ? originX : 0.5, originY !== undefined ? originY : 0.5);\n  }\n  // Treat x/y not as shortcuts but as actual attributes\n  if (attrX !== undefined) attrs.x = attrX;\n  if (attrY !== undefined) attrs.y = attrY;\n  // Build SVG path if one has been measured\n  if (totalPathLength !== undefined && pathLength !== undefined) {\n    buildSVGPath(attrs, totalPathLength, pathLength, pathSpacing, pathOffset, false);\n  }\n}\nvar createSvgRenderState = function createSvgRenderState() {\n  return tslib.__assign(tslib.__assign({}, createHtmlRenderState()), {\n    attrs: {}\n  });\n};\nfunction useSVGProps(props, visualState) {\n  var visualProps = React.useMemo(function () {\n    var state = createSvgRenderState();\n    buildSVGAttrs(state, visualState, undefined, undefined, {\n      enableHardwareAcceleration: false\n    }, props.transformTemplate);\n    return tslib.__assign(tslib.__assign({}, state.attrs), {\n      style: tslib.__assign({}, state.style)\n    });\n  }, [visualState]);\n  if (props.style) {\n    var rawStyles = {};\n    copyRawValuesOnly(rawStyles, props.style, props);\n    visualProps.style = tslib.__assign(tslib.__assign({}, rawStyles), visualProps.style);\n  }\n  return visualProps;\n}\nfunction createUseRender(forwardMotionProps) {\n  if (forwardMotionProps === void 0) {\n    forwardMotionProps = false;\n  }\n  var useRender = function useRender(Component, props, ref, _a, isStatic) {\n    var latestValues = _a.latestValues;\n    var useVisualProps = isSVGComponent(Component) ? useSVGProps : useHTMLProps;\n    var visualProps = useVisualProps(props, latestValues, isStatic);\n    var filteredProps = filterProps(props, typeof Component === \"string\", forwardMotionProps);\n    var elementProps = tslib.__assign(tslib.__assign(tslib.__assign({}, filteredProps), visualProps), {\n      ref: ref\n    });\n    return React.createElement(Component, elementProps);\n  };\n  return useRender;\n}\nvar CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = \"$1-$2\";\n/**\n * Convert camelCase to dash-case properties.\n */\nvar camelToDash = function camelToDash(str) {\n  return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\nfunction renderHTML(element, _a) {\n  var style = _a.style,\n    vars = _a.vars;\n  // Directly assign style into the Element's style prop. In tests Object.assign is the\n  // fastest way to assign styles.\n  Object.assign(element.style, style);\n  // Loop over any CSS variables and assign those.\n  for (var key in vars) {\n    element.style.setProperty(key, vars[key]);\n  }\n}\n\n/**\n * A set of attribute names that are always read/written as camel case.\n */\nvar camelCaseAttributes = new Set([\"baseFrequency\", \"diffuseConstant\", \"kernelMatrix\", \"kernelUnitLength\", \"keySplines\", \"keyTimes\", \"limitingConeAngle\", \"markerHeight\", \"markerWidth\", \"numOctaves\", \"targetX\", \"targetY\", \"surfaceScale\", \"specularConstant\", \"specularExponent\", \"stdDeviation\", \"tableValues\", \"viewBox\", \"gradientTransform\"]);\nfunction renderSVG(element, renderState) {\n  renderHTML(element, renderState);\n  for (var key in renderState.attrs) {\n    element.setAttribute(!camelCaseAttributes.has(key) ? camelToDash(key) : key, renderState.attrs[key]);\n  }\n}\nfunction scrapeMotionValuesFromProps$1(props) {\n  var style = props.style;\n  var newValues = {};\n  for (var key in style) {\n    if (isMotionValue(style[key]) || isForcedMotionValue(key, props)) {\n      newValues[key] = style[key];\n    }\n  }\n  return newValues;\n}\nfunction scrapeMotionValuesFromProps(props) {\n  var newValues = scrapeMotionValuesFromProps$1(props);\n  for (var key in props) {\n    if (isMotionValue(props[key])) {\n      var targetKey = key === \"x\" || key === \"y\" ? \"attr\" + key.toUpperCase() : key;\n      newValues[targetKey] = props[key];\n    }\n  }\n  return newValues;\n}\nfunction isAnimationControls(v) {\n  return typeof v === \"object\" && typeof v.start === \"function\";\n}\nvar isKeyframesTarget = function isKeyframesTarget(v) {\n  return Array.isArray(v);\n};\nvar isCustomValue = function isCustomValue(v) {\n  return Boolean(v && typeof v === \"object\" && v.mix && v.toValue);\n};\nvar resolveFinalValueInKeyframes = function resolveFinalValueInKeyframes(v) {\n  // TODO maybe throw if v.length - 1 is placeholder token?\n  return isKeyframesTarget(v) ? v[v.length - 1] || 0 : v;\n};\n\n/**\n * If the provided value is a MotionValue, this returns the actual value, otherwise just the value itself\n *\n * TODO: Remove and move to library\n *\n * @internal\n */\nfunction resolveMotionValue(value) {\n  var unwrappedValue = isMotionValue(value) ? value.get() : value;\n  return isCustomValue(unwrappedValue) ? unwrappedValue.toValue() : unwrappedValue;\n}\nfunction makeState(_a, props, context, presenceContext) {\n  var scrapeMotionValuesFromProps = _a.scrapeMotionValuesFromProps,\n    createRenderState = _a.createRenderState,\n    onMount = _a.onMount;\n  var state = {\n    latestValues: makeLatestValues(props, context, presenceContext, scrapeMotionValuesFromProps),\n    renderState: createRenderState()\n  };\n  if (onMount) {\n    state.mount = function (instance) {\n      return onMount(props, instance, state);\n    };\n  }\n  return state;\n}\nvar makeUseVisualState = function makeUseVisualState(config) {\n  return function (props, isStatic) {\n    var context = React.useContext(MotionContext);\n    var presenceContext = React.useContext(PresenceContext);\n    return isStatic ? makeState(config, props, context, presenceContext) : useConstant(function () {\n      return makeState(config, props, context, presenceContext);\n    });\n  };\n};\nfunction makeLatestValues(props, context, presenceContext, scrapeMotionValues) {\n  var values = {};\n  var blockInitialAnimation = (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.initial) === false;\n  var motionValues = scrapeMotionValues(props);\n  for (var key in motionValues) {\n    values[key] = resolveMotionValue(motionValues[key]);\n  }\n  var initial = props.initial,\n    animate = props.animate;\n  var isControllingVariants = checkIfControllingVariants(props);\n  var isVariantNode = checkIfVariantNode(props);\n  if (context && isVariantNode && !isControllingVariants && props.inherit !== false) {\n    initial !== null && initial !== void 0 ? initial : initial = context.initial;\n    animate !== null && animate !== void 0 ? animate : animate = context.animate;\n  }\n  var variantToSet = blockInitialAnimation || initial === false ? animate : initial;\n  if (variantToSet && typeof variantToSet !== \"boolean\" && !isAnimationControls(variantToSet)) {\n    var list = Array.isArray(variantToSet) ? variantToSet : [variantToSet];\n    list.forEach(function (definition) {\n      var resolved = resolveVariantFromProps(props, definition);\n      if (!resolved) return;\n      var transitionEnd = resolved.transitionEnd;\n      resolved.transition;\n      var target = tslib.__rest(resolved, [\"transitionEnd\", \"transition\"]);\n      for (var key in target) {\n        values[key] = target[key];\n      }\n      for (var key in transitionEnd) {\n        values[key] = transitionEnd[key];\n      }\n    });\n  }\n  return values;\n}\nvar svgMotionConfig = {\n  useVisualState: makeUseVisualState({\n    scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n    createRenderState: createSvgRenderState,\n    onMount: function onMount(props, instance, _a) {\n      var renderState = _a.renderState,\n        latestValues = _a.latestValues;\n      try {\n        renderState.dimensions = typeof instance.getBBox === \"function\" ? instance.getBBox() : instance.getBoundingClientRect();\n      } catch (e) {\n        // Most likely trying to measure an unrendered element under Firefox\n        renderState.dimensions = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      if (isPath(instance)) {\n        renderState.totalPathLength = instance.getTotalLength();\n      }\n      buildSVGAttrs(renderState, latestValues, undefined, undefined, {\n        enableHardwareAcceleration: false\n      }, props.transformTemplate);\n      // TODO: Replace with direct assignment\n      renderSVG(instance, renderState);\n    }\n  })\n};\nfunction isPath(element) {\n  return element.tagName === \"path\";\n}\nvar htmlMotionConfig = {\n  useVisualState: makeUseVisualState({\n    scrapeMotionValuesFromProps: scrapeMotionValuesFromProps$1,\n    createRenderState: createHtmlRenderState\n  })\n};\nfunction createDomMotionConfig(Component, _a, preloadedFeatures, createVisualElement) {\n  var _b = _a.forwardMotionProps,\n    forwardMotionProps = _b === void 0 ? false : _b;\n  var baseConfig = isSVGComponent(Component) ? svgMotionConfig : htmlMotionConfig;\n  return tslib.__assign(tslib.__assign({}, baseConfig), {\n    preloadedFeatures: preloadedFeatures,\n    useRender: createUseRender(forwardMotionProps),\n    createVisualElement: createVisualElement,\n    Component: Component\n  });\n}\nvar AnimationType;\n(function (AnimationType) {\n  AnimationType[\"Animate\"] = \"animate\";\n  AnimationType[\"Hover\"] = \"whileHover\";\n  AnimationType[\"Tap\"] = \"whileTap\";\n  AnimationType[\"Drag\"] = \"whileDrag\";\n  AnimationType[\"Focus\"] = \"whileFocus\";\n  AnimationType[\"Exit\"] = \"exit\";\n})(AnimationType || (AnimationType = {}));\nfunction addDomEvent(target, eventName, handler, options) {\n  target.addEventListener(eventName, handler, options);\n  return function () {\n    return target.removeEventListener(eventName, handler, options);\n  };\n}\n/**\n * Attaches an event listener directly to the provided DOM element.\n *\n * Bypassing React's event system can be desirable, for instance when attaching non-passive\n * event handlers.\n *\n * ```jsx\n * const ref = useRef(null)\n *\n * useDomEvent(ref, 'wheel', onWheel, { passive: false })\n *\n * return <div ref={ref} />\n * ```\n *\n * @param ref - React.RefObject that's been provided to the element you want to bind the listener to.\n * @param eventName - Name of the event you want listen for.\n * @param handler - Function to fire when receiving the event.\n * @param options - Options to pass to `Event.addEventListener`.\n *\n * @public\n */\nfunction useDomEvent(ref, eventName, handler, options) {\n  React.useEffect(function () {\n    var element = ref.current;\n    if (handler && element) {\n      return addDomEvent(element, eventName, handler, options);\n    }\n  }, [ref, eventName, handler, options]);\n}\n\n/**\n *\n * @param props\n * @param ref\n * @internal\n */\nfunction useFocusGesture(_a) {\n  var whileFocus = _a.whileFocus,\n    visualElement = _a.visualElement;\n  var onFocus = function onFocus() {\n    var _a;\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Focus, true);\n  };\n  var onBlur = function onBlur() {\n    var _a;\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Focus, false);\n  };\n  useDomEvent(visualElement, \"focus\", whileFocus ? onFocus : undefined);\n  useDomEvent(visualElement, \"blur\", whileFocus ? onBlur : undefined);\n}\nfunction isMouseEvent(event) {\n  // PointerEvent inherits from MouseEvent so we can't use a straight instanceof check.\n  if (typeof PointerEvent !== \"undefined\" && event instanceof PointerEvent) {\n    return !!(event.pointerType === \"mouse\");\n  }\n  return event instanceof MouseEvent;\n}\nfunction isTouchEvent(event) {\n  var hasTouches = !!event.touches;\n  return hasTouches;\n}\n\n/**\n * Filters out events not attached to the primary pointer (currently left mouse button)\n * @param eventHandler\n */\nfunction filterPrimaryPointer(eventHandler) {\n  return function (event) {\n    var isMouseEvent = event instanceof MouseEvent;\n    var isPrimaryPointer = !isMouseEvent || isMouseEvent && event.button === 0;\n    if (isPrimaryPointer) {\n      eventHandler(event);\n    }\n  };\n}\nvar defaultPagePoint = {\n  pageX: 0,\n  pageY: 0\n};\nfunction pointFromTouch(e, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n  var primaryTouch = e.touches[0] || e.changedTouches[0];\n  var point = primaryTouch || defaultPagePoint;\n  return {\n    x: point[pointType + \"X\"],\n    y: point[pointType + \"Y\"]\n  };\n}\nfunction pointFromMouse(point, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n  return {\n    x: point[pointType + \"X\"],\n    y: point[pointType + \"Y\"]\n  };\n}\nfunction extractEventInfo(event, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n  return {\n    point: isTouchEvent(event) ? pointFromTouch(event, pointType) : pointFromMouse(event, pointType)\n  };\n}\nfunction getViewportPointFromEvent(event) {\n  return extractEventInfo(event, \"client\");\n}\nvar wrapHandler = function wrapHandler(handler, shouldFilterPrimaryPointer) {\n  if (shouldFilterPrimaryPointer === void 0) {\n    shouldFilterPrimaryPointer = false;\n  }\n  var listener = function listener(event) {\n    return handler(event, extractEventInfo(event));\n  };\n  return shouldFilterPrimaryPointer ? filterPrimaryPointer(listener) : listener;\n};\n\n// We check for event support via functions in case they've been mocked by a testing suite.\nvar supportsPointerEvents = function supportsPointerEvents() {\n  return isBrowser && window.onpointerdown === null;\n};\nvar supportsTouchEvents = function supportsTouchEvents() {\n  return isBrowser && window.ontouchstart === null;\n};\nvar supportsMouseEvents = function supportsMouseEvents() {\n  return isBrowser && window.onmousedown === null;\n};\nvar mouseEventNames = {\n  pointerdown: \"mousedown\",\n  pointermove: \"mousemove\",\n  pointerup: \"mouseup\",\n  pointercancel: \"mousecancel\",\n  pointerover: \"mouseover\",\n  pointerout: \"mouseout\",\n  pointerenter: \"mouseenter\",\n  pointerleave: \"mouseleave\"\n};\nvar touchEventNames = {\n  pointerdown: \"touchstart\",\n  pointermove: \"touchmove\",\n  pointerup: \"touchend\",\n  pointercancel: \"touchcancel\"\n};\nfunction getPointerEventName(name) {\n  if (supportsPointerEvents()) {\n    return name;\n  } else if (supportsTouchEvents()) {\n    return touchEventNames[name];\n  } else if (supportsMouseEvents()) {\n    return mouseEventNames[name];\n  }\n  return name;\n}\nfunction addPointerEvent(target, eventName, handler, options) {\n  return addDomEvent(target, getPointerEventName(eventName), wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\nfunction usePointerEvent(ref, eventName, handler, options) {\n  return useDomEvent(ref, getPointerEventName(eventName), handler && wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\nfunction createLock(name) {\n  var lock = null;\n  return function () {\n    var openLock = function openLock() {\n      lock = null;\n    };\n    if (lock === null) {\n      lock = name;\n      return openLock;\n    }\n    return false;\n  };\n}\nvar globalHorizontalLock = createLock(\"dragHorizontal\");\nvar globalVerticalLock = createLock(\"dragVertical\");\nfunction getGlobalLock(drag) {\n  var lock = false;\n  if (drag === \"y\") {\n    lock = globalVerticalLock();\n  } else if (drag === \"x\") {\n    lock = globalHorizontalLock();\n  } else {\n    var openHorizontal_1 = globalHorizontalLock();\n    var openVertical_1 = globalVerticalLock();\n    if (openHorizontal_1 && openVertical_1) {\n      lock = function lock() {\n        openHorizontal_1();\n        openVertical_1();\n      };\n    } else {\n      // Release the locks because we don't use them\n      if (openHorizontal_1) openHorizontal_1();\n      if (openVertical_1) openVertical_1();\n    }\n  }\n  return lock;\n}\nfunction isDragActive() {\n  // Check the gesture lock - if we get it, it means no drag gesture is active\n  // and we can safely fire the tap gesture.\n  var openGestureLock = getGlobalLock(true);\n  if (!openGestureLock) return true;\n  openGestureLock();\n  return false;\n}\nfunction createHoverEvent(visualElement, isActive, callback) {\n  return function (event, info) {\n    var _a;\n    if (!isMouseEvent(event) || isDragActive()) return;\n    callback === null || callback === void 0 ? void 0 : callback(event, info);\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Hover, isActive);\n  };\n}\nfunction useHoverGesture(_a) {\n  var onHoverStart = _a.onHoverStart,\n    onHoverEnd = _a.onHoverEnd,\n    whileHover = _a.whileHover,\n    visualElement = _a.visualElement;\n  usePointerEvent(visualElement, \"pointerenter\", onHoverStart || whileHover ? createHoverEvent(visualElement, true, onHoverStart) : undefined);\n  usePointerEvent(visualElement, \"pointerleave\", onHoverEnd || whileHover ? createHoverEvent(visualElement, false, onHoverEnd) : undefined);\n}\n\n/**\n * Recursively traverse up the tree to check whether the provided child node\n * is the parent or a descendant of it.\n *\n * @param parent - Element to find\n * @param child - Element to test against parent\n */\nvar isNodeOrChild = function isNodeOrChild(parent, child) {\n  if (!child) {\n    return false;\n  } else if (parent === child) {\n    return true;\n  } else {\n    return isNodeOrChild(parent, child.parentElement);\n  }\n};\nfunction useUnmountEffect(callback) {\n  return React.useEffect(function () {\n    return function () {\n      return callback();\n    };\n  }, []);\n}\n\n/**\n * @param handlers -\n * @internal\n */\nfunction useTapGesture(_a) {\n  var onTap = _a.onTap,\n    onTapStart = _a.onTapStart,\n    onTapCancel = _a.onTapCancel,\n    whileTap = _a.whileTap,\n    visualElement = _a.visualElement;\n  var hasPressListeners = onTap || onTapStart || onTapCancel || whileTap;\n  var isPressing = React.useRef(false);\n  var cancelPointerEndListeners = React.useRef(null);\n  function removePointerEndListener() {\n    var _a;\n    (_a = cancelPointerEndListeners.current) === null || _a === void 0 ? void 0 : _a.call(cancelPointerEndListeners);\n    cancelPointerEndListeners.current = null;\n  }\n  function checkPointerEnd() {\n    var _a;\n    removePointerEndListener();\n    isPressing.current = false;\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Tap, false);\n    return !isDragActive();\n  }\n  function onPointerUp(event, info) {\n    if (!checkPointerEnd()) return;\n    /**\n     * We only count this as a tap gesture if the event.target is the same\n     * as, or a child of, this component's element\n     */\n    !isNodeOrChild(visualElement.getInstance(), event.target) ? onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info) : onTap === null || onTap === void 0 ? void 0 : onTap(event, info);\n  }\n  function onPointerCancel(event, info) {\n    if (!checkPointerEnd()) return;\n    onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info);\n  }\n  function onPointerDown(event, info) {\n    var _a;\n    removePointerEndListener();\n    if (isPressing.current) return;\n    isPressing.current = true;\n    cancelPointerEndListeners.current = popmotion.pipe(addPointerEvent(window, \"pointerup\", onPointerUp), addPointerEvent(window, \"pointercancel\", onPointerCancel));\n    onTapStart === null || onTapStart === void 0 ? void 0 : onTapStart(event, info);\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Tap, true);\n  }\n  usePointerEvent(visualElement, \"pointerdown\", hasPressListeners ? onPointerDown : undefined);\n  useUnmountEffect(removePointerEndListener);\n}\nvar makeRenderlessComponent = function makeRenderlessComponent(hook) {\n  return function (props) {\n    hook(props);\n    return null;\n  };\n};\nvar gestureAnimations = {\n  tap: makeRenderlessComponent(useTapGesture),\n  focus: makeRenderlessComponent(useFocusGesture),\n  hover: makeRenderlessComponent(useHoverGesture)\n};\nfunction shallowCompare(next, prev) {\n  if (!Array.isArray(prev)) return false;\n  var prevLength = prev.length;\n  if (prevLength !== next.length) return false;\n  for (var i = 0; i < prevLength; i++) {\n    if (prev[i] !== next[i]) return false;\n  }\n  return true;\n}\n\n/**\n * Converts seconds to milliseconds\n *\n * @param seconds - Time in seconds.\n * @return milliseconds - Converted time in milliseconds.\n */\nvar secondsToMilliseconds = function secondsToMilliseconds(seconds) {\n  return seconds * 1000;\n};\nvar easingLookup = {\n  linear: popmotion.linear,\n  easeIn: popmotion.easeIn,\n  easeInOut: popmotion.easeInOut,\n  easeOut: popmotion.easeOut,\n  circIn: popmotion.circIn,\n  circInOut: popmotion.circInOut,\n  circOut: popmotion.circOut,\n  backIn: popmotion.backIn,\n  backInOut: popmotion.backInOut,\n  backOut: popmotion.backOut,\n  anticipate: popmotion.anticipate,\n  bounceIn: popmotion.bounceIn,\n  bounceInOut: popmotion.bounceInOut,\n  bounceOut: popmotion.bounceOut\n};\nvar easingDefinitionToFunction = function easingDefinitionToFunction(definition) {\n  if (Array.isArray(definition)) {\n    // If cubic bezier definition, create bezier curve\n    heyListen.invariant(definition.length === 4, \"Cubic bezier arrays must contain four numerical values.\");\n    var _a = tslib.__read(definition, 4),\n      x1 = _a[0],\n      y1 = _a[1],\n      x2 = _a[2],\n      y2 = _a[3];\n    return popmotion.cubicBezier(x1, y1, x2, y2);\n  } else if (typeof definition === \"string\") {\n    // Else lookup from table\n    heyListen.invariant(easingLookup[definition] !== undefined, \"Invalid easing type '\" + definition + \"'\");\n    return easingLookup[definition];\n  }\n  return definition;\n};\nvar isEasingArray = function isEasingArray(ease) {\n  return Array.isArray(ease) && typeof ease[0] !== \"number\";\n};\n\n/**\n * Check if a value is animatable. Examples:\n *\n * : 100, \"100px\", \"#fff\"\n * : \"block\", \"url(2.jpg)\"\n * @param value\n *\n * @internal\n */\nvar isAnimatable = function isAnimatable(key, value) {\n  // If the list of keys tat might be non-animatable grows, replace with Set\n  if (key === \"zIndex\") return false;\n  // If it's a number or a keyframes array, we can animate it. We might at some point\n  // need to do a deep isAnimatable check of keyframes, or let Popmotion handle this,\n  // but for now lets leave it like this for performance reasons\n  if (typeof value === \"number\" || Array.isArray(value)) return true;\n  if (typeof value === \"string\" &&\n  // It's animatable if we have a string\n  styleValueTypes.complex.test(value) &&\n  // And it contains numbers and/or colors\n  !value.startsWith(\"url(\") // Unless it starts with \"url(\"\n  ) {\n    return true;\n  }\n  return false;\n};\nvar underDampedSpring = function underDampedSpring() {\n  return {\n    type: \"spring\",\n    stiffness: 500,\n    damping: 25,\n    restDelta: 0.5,\n    restSpeed: 10\n  };\n};\nvar criticallyDampedSpring = function criticallyDampedSpring(to) {\n  return {\n    type: \"spring\",\n    stiffness: 550,\n    damping: to === 0 ? 2 * Math.sqrt(550) : 30,\n    restDelta: 0.01,\n    restSpeed: 10\n  };\n};\nvar linearTween = function linearTween() {\n  return {\n    type: \"keyframes\",\n    ease: \"linear\",\n    duration: 0.3\n  };\n};\nvar keyframes = function keyframes(values) {\n  return {\n    type: \"keyframes\",\n    duration: 0.8,\n    values: values\n  };\n};\nvar defaultTransitions = {\n  x: underDampedSpring,\n  y: underDampedSpring,\n  z: underDampedSpring,\n  rotate: underDampedSpring,\n  rotateX: underDampedSpring,\n  rotateY: underDampedSpring,\n  rotateZ: underDampedSpring,\n  scaleX: criticallyDampedSpring,\n  scaleY: criticallyDampedSpring,\n  scale: criticallyDampedSpring,\n  opacity: linearTween,\n  backgroundColor: linearTween,\n  color: linearTween,\n  default: criticallyDampedSpring\n};\nvar getDefaultTransition = function getDefaultTransition(valueKey, to) {\n  var transitionFactory;\n  if (isKeyframesTarget(to)) {\n    transitionFactory = keyframes;\n  } else {\n    transitionFactory = defaultTransitions[valueKey] || defaultTransitions.default;\n  }\n  return tslib.__assign({\n    to: to\n  }, transitionFactory(to));\n};\n\n/**\n * A map of default value types for common values\n */\nvar defaultValueTypes = tslib.__assign(tslib.__assign({}, numberValueTypes), {\n  // Color props\n  color: styleValueTypes.color,\n  backgroundColor: styleValueTypes.color,\n  outlineColor: styleValueTypes.color,\n  fill: styleValueTypes.color,\n  stroke: styleValueTypes.color,\n  // Border props\n  borderColor: styleValueTypes.color,\n  borderTopColor: styleValueTypes.color,\n  borderRightColor: styleValueTypes.color,\n  borderBottomColor: styleValueTypes.color,\n  borderLeftColor: styleValueTypes.color,\n  filter: styleValueTypes.filter,\n  WebkitFilter: styleValueTypes.filter\n});\n/**\n * Gets the default ValueType for the provided value key\n */\nvar getDefaultValueType = function getDefaultValueType(key) {\n  return defaultValueTypes[key];\n};\nfunction getAnimatableNone(key, value) {\n  var _a;\n  var defaultValueType = getDefaultValueType(key);\n  if (defaultValueType !== styleValueTypes.filter) defaultValueType = styleValueTypes.complex;\n  // If value is not recognised as animatable, ie \"none\", create an animatable version origin based on the target\n  return (_a = defaultValueType.getAnimatableNone) === null || _a === void 0 ? void 0 : _a.call(defaultValueType, value);\n}\n\n/**\n * Decide whether a transition is defined on a given Transition.\n * This filters out orchestration options and returns true\n * if any options are left.\n */\nfunction isTransitionDefined(_a) {\n  _a.when;\n  _a.delay;\n  _a.delayChildren;\n  _a.staggerChildren;\n  _a.staggerDirection;\n  _a.repeat;\n  _a.repeatType;\n  _a.repeatDelay;\n  _a.from;\n  var transition = tslib.__rest(_a, [\"when\", \"delay\", \"delayChildren\", \"staggerChildren\", \"staggerDirection\", \"repeat\", \"repeatType\", \"repeatDelay\", \"from\"]);\n  return !!Object.keys(transition).length;\n}\nvar legacyRepeatWarning = false;\n/**\n * Convert Framer Motion's Transition type into Popmotion-compatible options.\n */\nfunction convertTransitionToAnimationOptions(_a) {\n  var ease = _a.ease,\n    times = _a.times,\n    yoyo = _a.yoyo,\n    flip = _a.flip,\n    loop = _a.loop,\n    transition = tslib.__rest(_a, [\"ease\", \"times\", \"yoyo\", \"flip\", \"loop\"]);\n  var options = tslib.__assign({}, transition);\n  if (times) options[\"offset\"] = times;\n  /**\n   * Convert any existing durations from seconds to milliseconds\n   */\n  if (transition.duration) options[\"duration\"] = secondsToMilliseconds(transition.duration);\n  if (transition.repeatDelay) options.repeatDelay = secondsToMilliseconds(transition.repeatDelay);\n  /**\n   * Map easing names to Popmotion's easing functions\n   */\n  if (ease) {\n    options[\"ease\"] = isEasingArray(ease) ? ease.map(easingDefinitionToFunction) : easingDefinitionToFunction(ease);\n  }\n  /**\n   * Support legacy transition API\n   */\n  if (transition.type === \"tween\") options.type = \"keyframes\";\n  /**\n   * TODO: These options are officially removed from the API.\n   */\n  if (yoyo || loop || flip) {\n    heyListen.warning(!legacyRepeatWarning, \"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options.\");\n    legacyRepeatWarning = true;\n    if (yoyo) {\n      options.repeatType = \"reverse\";\n    } else if (loop) {\n      options.repeatType = \"loop\";\n    } else if (flip) {\n      options.repeatType = \"mirror\";\n    }\n    options.repeat = loop || yoyo || flip || transition.repeat;\n  }\n  /**\n   * TODO: Popmotion 9 has the ability to automatically detect whether to use\n   * a keyframes or spring animation, but does so by detecting velocity and other spring options.\n   * It'd be good to introduce a similar thing here.\n   */\n  if (transition.type !== \"spring\") options.type = \"keyframes\";\n  return options;\n}\n/**\n * Get the delay for a value by checking Transition with decreasing specificity.\n */\nfunction getDelayFromTransition(transition, key) {\n  var _a;\n  var valueTransition = getValueTransition(transition, key) || {};\n  return (_a = valueTransition.delay) !== null && _a !== void 0 ? _a : 0;\n}\nfunction hydrateKeyframes(options) {\n  if (Array.isArray(options.to) && options.to[0] === null) {\n    options.to = tslib.__spreadArray([], tslib.__read(options.to));\n    options.to[0] = options.from;\n  }\n  return options;\n}\nfunction getPopmotionAnimationOptions(transition, options, key) {\n  var _a;\n  if (Array.isArray(options.to)) {\n    (_a = transition.duration) !== null && _a !== void 0 ? _a : transition.duration = 0.8;\n  }\n  hydrateKeyframes(options);\n  /**\n   * Get a default transition if none is determined to be defined.\n   */\n  if (!isTransitionDefined(transition)) {\n    transition = tslib.__assign(tslib.__assign({}, transition), getDefaultTransition(key, options.to));\n  }\n  return tslib.__assign(tslib.__assign({}, options), convertTransitionToAnimationOptions(transition));\n}\n/**\n *\n */\nfunction getAnimation(key, value, target, transition, onComplete) {\n  var _a;\n  var valueTransition = getValueTransition(transition, key);\n  var origin = (_a = valueTransition.from) !== null && _a !== void 0 ? _a : value.get();\n  var isTargetAnimatable = isAnimatable(key, target);\n  if (origin === \"none\" && isTargetAnimatable && typeof target === \"string\") {\n    /**\n     * If we're trying to animate from \"none\", try and get an animatable version\n     * of the target. This could be improved to work both ways.\n     */\n    origin = getAnimatableNone(key, target);\n  } else if (isZero(origin) && typeof target === \"string\") {\n    origin = getZeroUnit(target);\n  } else if (!Array.isArray(target) && isZero(target) && typeof origin === \"string\") {\n    target = getZeroUnit(origin);\n  }\n  var isOriginAnimatable = isAnimatable(key, origin);\n  heyListen.warning(isOriginAnimatable === isTargetAnimatable, \"You are trying to animate \" + key + \" from \\\"\" + origin + \"\\\" to \\\"\" + target + \"\\\". \" + origin + \" is not an animatable value - to enable this animation set \" + origin + \" to a value animatable to \" + target + \" via the `style` property.\");\n  function start() {\n    var options = {\n      from: origin,\n      to: target,\n      velocity: value.getVelocity(),\n      onComplete: onComplete,\n      onUpdate: function onUpdate(v) {\n        return value.set(v);\n      }\n    };\n    return valueTransition.type === \"inertia\" || valueTransition.type === \"decay\" ? popmotion.inertia(tslib.__assign(tslib.__assign({}, options), valueTransition)) : popmotion.animate(tslib.__assign(tslib.__assign({}, getPopmotionAnimationOptions(valueTransition, options, key)), {\n      onUpdate: function onUpdate(v) {\n        var _a;\n        options.onUpdate(v);\n        (_a = valueTransition.onUpdate) === null || _a === void 0 ? void 0 : _a.call(valueTransition, v);\n      },\n      onComplete: function onComplete() {\n        var _a;\n        options.onComplete();\n        (_a = valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n      }\n    }));\n  }\n  function set() {\n    var _a;\n    value.set(target);\n    onComplete();\n    (_a = valueTransition === null || valueTransition === void 0 ? void 0 : valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n    return {\n      stop: function stop() {}\n    };\n  }\n  return !isOriginAnimatable || !isTargetAnimatable || valueTransition.type === false ? set : start;\n}\nfunction isZero(value) {\n  return value === 0 || typeof value === \"string\" && parseFloat(value) === 0 && value.indexOf(\" \") === -1;\n}\nfunction getZeroUnit(potentialUnitType) {\n  return typeof potentialUnitType === \"number\" ? 0 : getAnimatableNone(\"\", potentialUnitType);\n}\nfunction getValueTransition(transition, key) {\n  return transition[key] || transition[\"default\"] || transition;\n}\n/**\n * Start animation on a MotionValue. This function is an interface between\n * Framer Motion and Popmotion\n *\n * @internal\n */\nfunction startAnimation(key, value, target, transition) {\n  if (transition === void 0) {\n    transition = {};\n  }\n  return value.start(function (onComplete) {\n    var delayTimer;\n    var controls;\n    var animation = getAnimation(key, value, target, transition, onComplete);\n    var delay = getDelayFromTransition(transition, key);\n    var start = function start() {\n      return controls = animation();\n    };\n    if (delay) {\n      delayTimer = setTimeout(start, secondsToMilliseconds(delay));\n    } else {\n      start();\n    }\n    return function () {\n      clearTimeout(delayTimer);\n      controls === null || controls === void 0 ? void 0 : controls.stop();\n    };\n  });\n}\n\n/**\n * Check if value is a numerical string, ie a string that is purely a number eg \"100\" or \"-100.1\"\n */\nvar isNumericalString = function isNumericalString(v) {\n  return /^\\-?\\d*\\.?\\d+$/.test(v);\n};\nfunction addUniqueItem(arr, item) {\n  arr.indexOf(item) === -1 && arr.push(item);\n}\nfunction removeItem(arr, item) {\n  var index = arr.indexOf(item);\n  index > -1 && arr.splice(index, 1);\n}\nvar SubscriptionManager = /** @class */function () {\n  function SubscriptionManager() {\n    this.subscriptions = [];\n  }\n  SubscriptionManager.prototype.add = function (handler) {\n    var _this = this;\n    addUniqueItem(this.subscriptions, handler);\n    return function () {\n      return removeItem(_this.subscriptions, handler);\n    };\n  };\n  SubscriptionManager.prototype.notify = function (a, b, c) {\n    var numSubscriptions = this.subscriptions.length;\n    if (!numSubscriptions) return;\n    if (numSubscriptions === 1) {\n      /**\n       * If there's only a single handler we can just call it without invoking a loop.\n       */\n      this.subscriptions[0](a, b, c);\n    } else {\n      for (var i = 0; i < numSubscriptions; i++) {\n        /**\n         * Check whether the handler exists before firing as it's possible\n         * the subscriptions were modified during this loop running.\n         */\n        var handler = this.subscriptions[i];\n        handler && handler(a, b, c);\n      }\n    }\n  };\n  SubscriptionManager.prototype.getSize = function () {\n    return this.subscriptions.length;\n  };\n  SubscriptionManager.prototype.clear = function () {\n    this.subscriptions.length = 0;\n  };\n  return SubscriptionManager;\n}();\nvar isFloat = function isFloat(value) {\n  return !isNaN(parseFloat(value));\n};\n/**\n * `MotionValue` is used to track the state and velocity of motion values.\n *\n * @public\n */\nvar MotionValue = /** @class */function () {\n  /**\n   * @param init - The initiating value\n   * @param config - Optional configuration options\n   *\n   * -  `transformer`: A function to transform incoming values with.\n   *\n   * @internal\n   */\n  function MotionValue(init) {\n    var _this = this;\n    /**\n     * Duration, in milliseconds, since last updating frame.\n     *\n     * @internal\n     */\n    this.timeDelta = 0;\n    /**\n     * Timestamp of the last time this `MotionValue` was updated.\n     *\n     * @internal\n     */\n    this.lastUpdated = 0;\n    /**\n     * Functions to notify when the `MotionValue` updates.\n     *\n     * @internal\n     */\n    this.updateSubscribers = new SubscriptionManager();\n    /**\n     * Functions to notify when the velocity updates.\n     *\n     * @internal\n     */\n    this.velocityUpdateSubscribers = new SubscriptionManager();\n    /**\n     * Functions to notify when the `MotionValue` updates and `render` is set to `true`.\n     *\n     * @internal\n     */\n    this.renderSubscribers = new SubscriptionManager();\n    /**\n     * Tracks whether this value can output a velocity. Currently this is only true\n     * if the value is numerical, but we might be able to widen the scope here and support\n     * other value types.\n     *\n     * @internal\n     */\n    this.canTrackVelocity = false;\n    this.updateAndNotify = function (v, render) {\n      if (render === void 0) {\n        render = true;\n      }\n      _this.prev = _this.current;\n      _this.current = v;\n      // Update timestamp\n      var _a = sync.getFrameData(),\n        delta = _a.delta,\n        timestamp = _a.timestamp;\n      if (_this.lastUpdated !== timestamp) {\n        _this.timeDelta = delta;\n        _this.lastUpdated = timestamp;\n        sync__default['default'].postRender(_this.scheduleVelocityCheck);\n      }\n      // Update update subscribers\n      if (_this.prev !== _this.current) {\n        _this.updateSubscribers.notify(_this.current);\n      }\n      // Update velocity subscribers\n      if (_this.velocityUpdateSubscribers.getSize()) {\n        _this.velocityUpdateSubscribers.notify(_this.getVelocity());\n      }\n      // Update render subscribers\n      if (render) {\n        _this.renderSubscribers.notify(_this.current);\n      }\n    };\n    /**\n     * Schedule a velocity check for the next frame.\n     *\n     * This is an instanced and bound function to prevent generating a new\n     * function once per frame.\n     *\n     * @internal\n     */\n    this.scheduleVelocityCheck = function () {\n      return sync__default['default'].postRender(_this.velocityCheck);\n    };\n    /**\n     * Updates `prev` with `current` if the value hasn't been updated this frame.\n     * This ensures velocity calculations return `0`.\n     *\n     * This is an instanced and bound function to prevent generating a new\n     * function once per frame.\n     *\n     * @internal\n     */\n    this.velocityCheck = function (_a) {\n      var timestamp = _a.timestamp;\n      if (timestamp !== _this.lastUpdated) {\n        _this.prev = _this.current;\n        _this.velocityUpdateSubscribers.notify(_this.getVelocity());\n      }\n    };\n    this.hasAnimated = false;\n    this.prev = this.current = init;\n    this.canTrackVelocity = isFloat(this.current);\n  }\n  /**\n   * Adds a function that will be notified when the `MotionValue` is updated.\n   *\n   * It returns a function that, when called, will cancel the subscription.\n   *\n   * When calling `onChange` inside a React component, it should be wrapped with the\n   * `useEffect` hook. As it returns an unsubscribe function, this should be returned\n   * from the `useEffect` function to ensure you don't add duplicate subscribers..\n   *\n   * @library\n   *\n   * ```jsx\n   * function MyComponent() {\n   *   const x = useMotionValue(0)\n   *   const y = useMotionValue(0)\n   *   const opacity = useMotionValue(1)\n   *\n   *   useEffect(() => {\n   *     function updateOpacity() {\n   *       const maxXY = Math.max(x.get(), y.get())\n   *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n   *       opacity.set(newOpacity)\n   *     }\n   *\n   *     const unsubscribeX = x.onChange(updateOpacity)\n   *     const unsubscribeY = y.onChange(updateOpacity)\n   *\n   *     return () => {\n   *       unsubscribeX()\n   *       unsubscribeY()\n   *     }\n   *   }, [])\n   *\n   *   return <Frame x={x} />\n   * }\n   * ```\n   *\n   * @motion\n   *\n   * ```jsx\n   * export const MyComponent = () => {\n   *   const x = useMotionValue(0)\n   *   const y = useMotionValue(0)\n   *   const opacity = useMotionValue(1)\n   *\n   *   useEffect(() => {\n   *     function updateOpacity() {\n   *       const maxXY = Math.max(x.get(), y.get())\n   *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n   *       opacity.set(newOpacity)\n   *     }\n   *\n   *     const unsubscribeX = x.onChange(updateOpacity)\n   *     const unsubscribeY = y.onChange(updateOpacity)\n   *\n   *     return () => {\n   *       unsubscribeX()\n   *       unsubscribeY()\n   *     }\n   *   }, [])\n   *\n   *   return <motion.div style={{ x }} />\n   * }\n   * ```\n   *\n   * @internalremarks\n   *\n   * We could look into a `useOnChange` hook if the above lifecycle management proves confusing.\n   *\n   * ```jsx\n   * useOnChange(x, () => {})\n   * ```\n   *\n   * @param subscriber - A function that receives the latest value.\n   * @returns A function that, when called, will cancel this subscription.\n   *\n   * @public\n   */\n  MotionValue.prototype.onChange = function (subscription) {\n    return this.updateSubscribers.add(subscription);\n  };\n  MotionValue.prototype.clearListeners = function () {\n    this.updateSubscribers.clear();\n  };\n  /**\n   * Adds a function that will be notified when the `MotionValue` requests a render.\n   *\n   * @param subscriber - A function that's provided the latest value.\n   * @returns A function that, when called, will cancel this subscription.\n   *\n   * @internal\n   */\n  MotionValue.prototype.onRenderRequest = function (subscription) {\n    // Render immediately\n    subscription(this.get());\n    return this.renderSubscribers.add(subscription);\n  };\n  /**\n   * Attaches a passive effect to the `MotionValue`.\n   *\n   * @internal\n   */\n  MotionValue.prototype.attach = function (passiveEffect) {\n    this.passiveEffect = passiveEffect;\n  };\n  /**\n   * Sets the state of the `MotionValue`.\n   *\n   * @remarks\n   *\n   * ```jsx\n   * const x = useMotionValue(0)\n   * x.set(10)\n   * ```\n   *\n   * @param latest - Latest value to set.\n   * @param render - Whether to notify render subscribers. Defaults to `true`\n   *\n   * @public\n   */\n  MotionValue.prototype.set = function (v, render) {\n    if (render === void 0) {\n      render = true;\n    }\n    if (!render || !this.passiveEffect) {\n      this.updateAndNotify(v, render);\n    } else {\n      this.passiveEffect(v, this.updateAndNotify);\n    }\n  };\n  /**\n   * Returns the latest state of `MotionValue`\n   *\n   * @returns - The latest state of `MotionValue`\n   *\n   * @public\n   */\n  MotionValue.prototype.get = function () {\n    return this.current;\n  };\n  /**\n   * @public\n   */\n  MotionValue.prototype.getPrevious = function () {\n    return this.prev;\n  };\n  /**\n   * Returns the latest velocity of `MotionValue`\n   *\n   * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.\n   *\n   * @public\n   */\n  MotionValue.prototype.getVelocity = function () {\n    // This could be isFloat(this.prev) && isFloat(this.current), but that would be wasteful\n    return this.canTrackVelocity ?\n    // These casts could be avoided if parseFloat would be typed better\n    popmotion.velocityPerSecond(parseFloat(this.current) - parseFloat(this.prev), this.timeDelta) : 0;\n  };\n  /**\n   * Registers a new animation to control this `MotionValue`. Only one\n   * animation can drive a `MotionValue` at one time.\n   *\n   * ```jsx\n   * value.start()\n   * ```\n   *\n   * @param animation - A function that starts the provided animation\n   *\n   * @internal\n   */\n  MotionValue.prototype.start = function (animation) {\n    var _this = this;\n    this.stop();\n    return new Promise(function (resolve) {\n      _this.hasAnimated = true;\n      _this.stopAnimation = animation(resolve);\n    }).then(function () {\n      return _this.clearAnimation();\n    });\n  };\n  /**\n   * Stop the currently active animation.\n   *\n   * @public\n   */\n  MotionValue.prototype.stop = function () {\n    if (this.stopAnimation) this.stopAnimation();\n    this.clearAnimation();\n  };\n  /**\n   * Returns `true` if this value is currently animating.\n   *\n   * @public\n   */\n  MotionValue.prototype.isAnimating = function () {\n    return !!this.stopAnimation;\n  };\n  MotionValue.prototype.clearAnimation = function () {\n    this.stopAnimation = null;\n  };\n  /**\n   * Destroy and clean up subscribers to this `MotionValue`.\n   *\n   * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically\n   * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually\n   * created a `MotionValue` via the `motionValue` function.\n   *\n   * @public\n   */\n  MotionValue.prototype.destroy = function () {\n    this.updateSubscribers.clear();\n    this.renderSubscribers.clear();\n    this.stop();\n  };\n  return MotionValue;\n}();\n/**\n * @internal\n */\nfunction motionValue(init) {\n  return new MotionValue(init);\n}\n\n/**\n * Tests a provided value against a ValueType\n */\nvar testValueType = function testValueType(v) {\n  return function (type) {\n    return type.test(v);\n  };\n};\n\n/**\n * ValueType for \"auto\"\n */\nvar auto = {\n  test: function test(v) {\n    return v === \"auto\";\n  },\n  parse: function parse(v) {\n    return v;\n  }\n};\n\n/**\n * A list of value types commonly used for dimensions\n */\nvar dimensionValueTypes = [styleValueTypes.number, styleValueTypes.px, styleValueTypes.percent, styleValueTypes.degrees, styleValueTypes.vw, styleValueTypes.vh, auto];\n/**\n * Tests a dimensional value against the list of dimension ValueTypes\n */\nvar findDimensionValueType = function findDimensionValueType(v) {\n  return dimensionValueTypes.find(testValueType(v));\n};\n\n/**\n * A list of all ValueTypes\n */\nvar valueTypes = tslib.__spreadArray(tslib.__spreadArray([], tslib.__read(dimensionValueTypes)), [styleValueTypes.color, styleValueTypes.complex]);\n/**\n * Tests a value against the list of ValueTypes\n */\nvar findValueType = function findValueType(v) {\n  return valueTypes.find(testValueType(v));\n};\n\n/**\n * Set VisualElement's MotionValue, creating a new MotionValue for it if\n * it doesn't exist.\n */\nfunction setMotionValue(visualElement, key, value) {\n  if (visualElement.hasValue(key)) {\n    visualElement.getValue(key).set(value);\n  } else {\n    visualElement.addValue(key, motionValue(value));\n  }\n}\nfunction setTarget(visualElement, definition) {\n  var resolved = resolveVariant(visualElement, definition);\n  var _a = resolved ? visualElement.makeTargetAnimatable(resolved, false) : {},\n    _b = _a.transitionEnd,\n    transitionEnd = _b === void 0 ? {} : _b;\n  _a.transition;\n  var target = tslib.__rest(_a, [\"transitionEnd\", \"transition\"]);\n  target = tslib.__assign(tslib.__assign({}, target), transitionEnd);\n  for (var key in target) {\n    var value = resolveFinalValueInKeyframes(target[key]);\n    setMotionValue(visualElement, key, value);\n  }\n}\nfunction setVariants(visualElement, variantLabels) {\n  var reversedLabels = tslib.__spreadArray([], tslib.__read(variantLabels)).reverse();\n  reversedLabels.forEach(function (key) {\n    var _a;\n    var variant = visualElement.getVariant(key);\n    variant && setTarget(visualElement, variant);\n    (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n      setVariants(child, variantLabels);\n    });\n  });\n}\nfunction setValues(visualElement, definition) {\n  if (Array.isArray(definition)) {\n    return setVariants(visualElement, definition);\n  } else if (typeof definition === \"string\") {\n    return setVariants(visualElement, [definition]);\n  } else {\n    setTarget(visualElement, definition);\n  }\n}\nfunction checkTargetForNewValues(visualElement, target, origin) {\n  var _a, _b, _c;\n  var _d;\n  var newValueKeys = Object.keys(target).filter(function (key) {\n    return !visualElement.hasValue(key);\n  });\n  var numNewValues = newValueKeys.length;\n  if (!numNewValues) return;\n  for (var i = 0; i < numNewValues; i++) {\n    var key = newValueKeys[i];\n    var targetValue = target[key];\n    var value = null;\n    /**\n     * If the target is a series of keyframes, we can use the first value\n     * in the array. If this first value is null, we'll still need to read from the DOM.\n     */\n    if (Array.isArray(targetValue)) {\n      value = targetValue[0];\n    }\n    /**\n     * If the target isn't keyframes, or the first keyframe was null, we need to\n     * first check if an origin value was explicitly defined in the transition as \"from\",\n     * if not read the value from the DOM. As an absolute fallback, take the defined target value.\n     */\n    if (value === null) {\n      value = (_b = (_a = origin[key]) !== null && _a !== void 0 ? _a : visualElement.readValue(key)) !== null && _b !== void 0 ? _b : target[key];\n    }\n    /**\n     * If value is still undefined or null, ignore it. Preferably this would throw,\n     * but this was causing issues in Framer.\n     */\n    if (value === undefined || value === null) continue;\n    if (typeof value === \"string\" && isNumericalString(value)) {\n      // If this is a number read as a string, ie \"0\" or \"200\", convert it to a number\n      value = parseFloat(value);\n    } else if (!findValueType(value) && styleValueTypes.complex.test(targetValue)) {\n      value = getAnimatableNone(key, targetValue);\n    }\n    visualElement.addValue(key, motionValue(value));\n    (_c = (_d = origin)[key]) !== null && _c !== void 0 ? _c : _d[key] = value;\n    visualElement.setBaseTarget(key, value);\n  }\n}\nfunction getOriginFromTransition(key, transition) {\n  if (!transition) return;\n  var valueTransition = transition[key] || transition[\"default\"] || transition;\n  return valueTransition.from;\n}\nfunction getOrigin(target, transition, visualElement) {\n  var _a, _b;\n  var origin = {};\n  for (var key in target) {\n    origin[key] = (_a = getOriginFromTransition(key, transition)) !== null && _a !== void 0 ? _a : (_b = visualElement.getValue(key)) === null || _b === void 0 ? void 0 : _b.get();\n  }\n  return origin;\n}\n\n/**\n * @internal\n */\nfunction animateVisualElement(visualElement, definition, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  visualElement.notifyAnimationStart();\n  var animation;\n  if (Array.isArray(definition)) {\n    var animations = definition.map(function (variant) {\n      return animateVariant(visualElement, variant, options);\n    });\n    animation = Promise.all(animations);\n  } else if (typeof definition === \"string\") {\n    animation = animateVariant(visualElement, definition, options);\n  } else {\n    var resolvedDefinition = typeof definition === \"function\" ? resolveVariant(visualElement, definition, options.custom) : definition;\n    animation = animateTarget(visualElement, resolvedDefinition, options);\n  }\n  return animation.then(function () {\n    return visualElement.notifyAnimationComplete(definition);\n  });\n}\nfunction animateVariant(visualElement, variant, options) {\n  var _a;\n  if (options === void 0) {\n    options = {};\n  }\n  var resolved = resolveVariant(visualElement, variant, options.custom);\n  var _b = (resolved || {}).transition,\n    transition = _b === void 0 ? visualElement.getDefaultTransition() || {} : _b;\n  if (options.transitionOverride) {\n    transition = options.transitionOverride;\n  }\n  /**\n   * If we have a variant, create a callback that runs it as an animation.\n   * Otherwise, we resolve a Promise immediately for a composable no-op.\n   */\n  var getAnimation = resolved ? function () {\n    return animateTarget(visualElement, resolved, options);\n  } : function () {\n    return Promise.resolve();\n  };\n  /**\n   * If we have children, create a callback that runs all their animations.\n   * Otherwise, we resolve a Promise immediately for a composable no-op.\n   */\n  var getChildAnimations = ((_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.size) ? function (forwardDelay) {\n    if (forwardDelay === void 0) {\n      forwardDelay = 0;\n    }\n    var _a = transition.delayChildren,\n      delayChildren = _a === void 0 ? 0 : _a,\n      staggerChildren = transition.staggerChildren,\n      staggerDirection = transition.staggerDirection;\n    return animateChildren(visualElement, variant, delayChildren + forwardDelay, staggerChildren, staggerDirection, options);\n  } : function () {\n    return Promise.resolve();\n  };\n  /**\n   * If the transition explicitly defines a \"when\" option, we need to resolve either\n   * this animation or all children animations before playing the other.\n   */\n  var when = transition.when;\n  if (when) {\n    var _c = tslib.__read(when === \"beforeChildren\" ? [getAnimation, getChildAnimations] : [getChildAnimations, getAnimation], 2),\n      first = _c[0],\n      last = _c[1];\n    return first().then(last);\n  } else {\n    return Promise.all([getAnimation(), getChildAnimations(options.delay)]);\n  }\n}\n/**\n * @internal\n */\nfunction animateTarget(visualElement, definition, _a) {\n  var _b;\n  var _c = _a === void 0 ? {} : _a,\n    _d = _c.delay,\n    delay = _d === void 0 ? 0 : _d,\n    transitionOverride = _c.transitionOverride,\n    type = _c.type;\n  var _e = visualElement.makeTargetAnimatable(definition),\n    _f = _e.transition,\n    transition = _f === void 0 ? visualElement.getDefaultTransition() : _f,\n    transitionEnd = _e.transitionEnd,\n    target = tslib.__rest(_e, [\"transition\", \"transitionEnd\"]);\n  if (transitionOverride) transition = transitionOverride;\n  var animations = [];\n  var animationTypeState = type && ((_b = visualElement.animationState) === null || _b === void 0 ? void 0 : _b.getState()[type]);\n  for (var key in target) {\n    var value = visualElement.getValue(key);\n    var valueTarget = target[key];\n    if (!value || valueTarget === undefined || animationTypeState && shouldBlockAnimation(animationTypeState, key)) {\n      continue;\n    }\n    var animation = startAnimation(key, value, valueTarget, tslib.__assign({\n      delay: delay\n    }, transition));\n    animations.push(animation);\n  }\n  return Promise.all(animations).then(function () {\n    transitionEnd && setTarget(visualElement, transitionEnd);\n  });\n}\nfunction animateChildren(visualElement, variant, delayChildren, staggerChildren, staggerDirection, options) {\n  if (delayChildren === void 0) {\n    delayChildren = 0;\n  }\n  if (staggerChildren === void 0) {\n    staggerChildren = 0;\n  }\n  if (staggerDirection === void 0) {\n    staggerDirection = 1;\n  }\n  var animations = [];\n  var maxStaggerDuration = (visualElement.variantChildren.size - 1) * staggerChildren;\n  var generateStaggerDuration = staggerDirection === 1 ? function (i) {\n    if (i === void 0) {\n      i = 0;\n    }\n    return i * staggerChildren;\n  } : function (i) {\n    if (i === void 0) {\n      i = 0;\n    }\n    return maxStaggerDuration - i * staggerChildren;\n  };\n  Array.from(visualElement.variantChildren).sort(sortByTreeOrder).forEach(function (child, i) {\n    animations.push(animateVariant(child, variant, tslib.__assign(tslib.__assign({}, options), {\n      delay: delayChildren + generateStaggerDuration(i)\n    })).then(function () {\n      return child.notifyAnimationComplete(variant);\n    }));\n  });\n  return Promise.all(animations);\n}\nfunction stopAnimation(visualElement) {\n  visualElement.forEachValue(function (value) {\n    return value.stop();\n  });\n}\nfunction sortByTreeOrder(a, b) {\n  return a.sortNodePosition(b);\n}\n/**\n * Decide whether we should block this animation. Previously, we achieved this\n * just by checking whether the key was listed in protectedKeys, but this\n * posed problems if an animation was triggered by afterChildren and protectedKeys\n * had been set to true in the meantime.\n */\nfunction shouldBlockAnimation(_a, key) {\n  var protectedKeys = _a.protectedKeys,\n    needsAnimating = _a.needsAnimating;\n  var shouldBlock = protectedKeys.hasOwnProperty(key) && needsAnimating[key] !== true;\n  needsAnimating[key] = false;\n  return shouldBlock;\n}\nvar variantPriorityOrder = [AnimationType.Animate, AnimationType.Hover, AnimationType.Tap, AnimationType.Drag, AnimationType.Focus, AnimationType.Exit];\nvar reversePriorityOrder = tslib.__spreadArray([], tslib.__read(variantPriorityOrder)).reverse();\nvar numAnimationTypes = variantPriorityOrder.length;\nfunction animateList(visualElement) {\n  return function (animations) {\n    return Promise.all(animations.map(function (_a) {\n      var animation = _a.animation,\n        options = _a.options;\n      return animateVisualElement(visualElement, animation, options);\n    }));\n  };\n}\nfunction createAnimationState(visualElement) {\n  var animate = animateList(visualElement);\n  var state = createState();\n  var allAnimatedKeys = {};\n  var isInitialRender = true;\n  /**\n   * This function will be used to reduce the animation definitions for\n   * each active animation type into an object of resolved values for it.\n   */\n  var buildResolvedTypeValues = function buildResolvedTypeValues(acc, definition) {\n    var resolved = resolveVariant(visualElement, definition);\n    if (resolved) {\n      resolved.transition;\n      var transitionEnd = resolved.transitionEnd,\n        target = tslib.__rest(resolved, [\"transition\", \"transitionEnd\"]);\n      acc = tslib.__assign(tslib.__assign(tslib.__assign({}, acc), target), transitionEnd);\n    }\n    return acc;\n  };\n  function isAnimated(key) {\n    return allAnimatedKeys[key] !== undefined;\n  }\n  /**\n   * This just allows us to inject mocked animation functions\n   * @internal\n   */\n  function setAnimateFunction(makeAnimator) {\n    animate = makeAnimator(visualElement);\n  }\n  /**\n   * When we receive new props, we need to:\n   * 1. Create a list of protected keys for each type. This is a directory of\n   *    value keys that are currently being \"handled\" by types of a higher priority\n   *    so that whenever an animation is played of a given type, these values are\n   *    protected from being animated.\n   * 2. Determine if an animation type needs animating.\n   * 3. Determine if any values have been removed from a type and figure out\n   *    what to animate those to.\n   */\n  function animateChanges(options, changedActiveType) {\n    var _a;\n    var props = visualElement.getProps();\n    var context = visualElement.getVariantContext(true) || {};\n    /**\n     * A list of animations that we'll build into as we iterate through the animation\n     * types. This will get executed at the end of the function.\n     */\n    var animations = [];\n    /**\n     * Keep track of which values have been removed. Then, as we hit lower priority\n     * animation types, we can check if they contain removed values and animate to that.\n     */\n    var removedKeys = new Set();\n    /**\n     * A dictionary of all encountered keys. This is an object to let us build into and\n     * copy it without iteration. Each time we hit an animation type we set its protected\n     * keys - the keys its not allowed to animate - to the latest version of this object.\n     */\n    var encounteredKeys = {};\n    /**\n     * If a variant has been removed at a given index, and this component is controlling\n     * variant animations, we want to ensure lower-priority variants are forced to animate.\n     */\n    var removedVariantIndex = Infinity;\n    var _loop_1 = function _loop_1(i) {\n      var type = reversePriorityOrder[i];\n      var typeState = state[type];\n      var prop = (_a = props[type]) !== null && _a !== void 0 ? _a : context[type];\n      var propIsVariant = isVariantLabel(prop);\n      /**\n       * If this type has *just* changed isActive status, set activeDelta\n       * to that status. Otherwise set to null.\n       */\n      var activeDelta = type === changedActiveType ? typeState.isActive : null;\n      if (activeDelta === false) removedVariantIndex = i;\n      /**\n       * If this prop is an inherited variant, rather than been set directly on the\n       * component itself, we want to make sure we allow the parent to trigger animations.\n       *\n       * TODO: Can probably change this to a !isControllingVariants check\n       */\n      var isInherited = prop === context[type] && prop !== props[type] && propIsVariant;\n      /**\n       *\n       */\n      if (isInherited && isInitialRender && visualElement.manuallyAnimateOnMount) {\n        isInherited = false;\n      }\n      /**\n       * Set all encountered keys so far as the protected keys for this type. This will\n       * be any key that has been animated or otherwise handled by active, higher-priortiy types.\n       */\n      typeState.protectedKeys = tslib.__assign({}, encounteredKeys);\n      // Check if we can skip analysing this prop early\n      if (\n      // If it isn't active and hasn't *just* been set as inactive\n      !typeState.isActive && activeDelta === null ||\n      // If we didn't and don't have any defined prop for this animation type\n      !prop && !typeState.prevProp ||\n      // Or if the prop doesn't define an animation\n      isAnimationControls(prop) || typeof prop === \"boolean\") {\n        return \"continue\";\n      }\n      /**\n       * As we go look through the values defined on this type, if we detect\n       * a changed value or a value that was removed in a higher priority, we set\n       * this to true and add this prop to the animation list.\n       */\n      var shouldAnimateType = variantsHaveChanged(typeState.prevProp, prop) ||\n      // If we're making this variant active, we want to always make it active\n      type === changedActiveType && typeState.isActive && !isInherited && propIsVariant ||\n      // If we removed a higher-priority variant (i is in reverse order)\n      i > removedVariantIndex && propIsVariant;\n      /**\n       * As animations can be set as variant lists, variants or target objects, we\n       * coerce everything to an array if it isn't one already\n       */\n      var definitionList = Array.isArray(prop) ? prop : [prop];\n      /**\n       * Build an object of all the resolved values. We'll use this in the subsequent\n       * animateChanges calls to determine whether a value has changed.\n       */\n      var resolvedValues = definitionList.reduce(buildResolvedTypeValues, {});\n      if (activeDelta === false) resolvedValues = {};\n      /**\n       * Now we need to loop through all the keys in the prev prop and this prop,\n       * and decide:\n       * 1. If the value has changed, and needs animating\n       * 2. If it has been removed, and needs adding to the removedKeys set\n       * 3. If it has been removed in a higher priority type and needs animating\n       * 4. If it hasn't been removed in a higher priority but hasn't changed, and\n       *    needs adding to the type's protectedKeys list.\n       */\n      var _b = typeState.prevResolvedValues,\n        prevResolvedValues = _b === void 0 ? {} : _b;\n      var allKeys = tslib.__assign(tslib.__assign({}, prevResolvedValues), resolvedValues);\n      var markToAnimate = function markToAnimate(key) {\n        shouldAnimateType = true;\n        removedKeys.delete(key);\n        typeState.needsAnimating[key] = true;\n      };\n      for (var key in allKeys) {\n        var next = resolvedValues[key];\n        var prev = prevResolvedValues[key];\n        // If we've already handled this we can just skip ahead\n        if (encounteredKeys.hasOwnProperty(key)) continue;\n        /**\n         * If the value has changed, we probably want to animate it.\n         */\n        if (next !== prev) {\n          /**\n           * If both values are keyframes, we need to shallow compare them to\n           * detect whether any value has changed. If it has, we animate it.\n           */\n          if (isKeyframesTarget(next) && isKeyframesTarget(prev)) {\n            if (!shallowCompare(next, prev)) {\n              markToAnimate(key);\n            } else {\n              /**\n               * If it hasn't changed, we want to ensure it doesn't animate by\n               * adding it to the list of protected keys.\n               */\n              typeState.protectedKeys[key] = true;\n            }\n          } else if (next !== undefined) {\n            // If next is defined and doesn't equal prev, it needs animating\n            markToAnimate(key);\n          } else {\n            // If it's undefined, it's been removed.\n            removedKeys.add(key);\n          }\n        } else if (next !== undefined && removedKeys.has(key)) {\n          /**\n           * If next hasn't changed and it isn't undefined, we want to check if it's\n           * been removed by a higher priority\n           */\n          markToAnimate(key);\n        } else {\n          /**\n           * If it hasn't changed, we add it to the list of protected values\n           * to ensure it doesn't get animated.\n           */\n          typeState.protectedKeys[key] = true;\n        }\n      }\n      /**\n       * Update the typeState so next time animateChanges is called we can compare the\n       * latest prop and resolvedValues to these.\n       */\n      typeState.prevProp = prop;\n      typeState.prevResolvedValues = resolvedValues;\n      /**\n       *\n       */\n      if (typeState.isActive) {\n        encounteredKeys = tslib.__assign(tslib.__assign({}, encounteredKeys), resolvedValues);\n      }\n      if (isInitialRender && visualElement.blockInitialAnimation) {\n        shouldAnimateType = false;\n      }\n      /**\n       * If this is an inherited prop we want to hard-block animations\n       * TODO: Test as this should probably still handle animations triggered\n       * by removed values?\n       */\n      if (shouldAnimateType && !isInherited) {\n        animations.push.apply(animations, tslib.__spreadArray([], tslib.__read(definitionList.map(function (animation) {\n          return {\n            animation: animation,\n            options: tslib.__assign({\n              type: type\n            }, options)\n          };\n        }))));\n      }\n    };\n    /**\n     * Iterate through all animation types in reverse priority order. For each, we want to\n     * detect which values it's handling and whether or not they've changed (and therefore\n     * need to be animated). If any values have been removed, we want to detect those in\n     * lower priority props and flag for animation.\n     */\n    for (var i = 0; i < numAnimationTypes; i++) {\n      _loop_1(i);\n    }\n    allAnimatedKeys = tslib.__assign({}, encounteredKeys);\n    /**\n     * If there are some removed value that haven't been dealt with,\n     * we need to create a new animation that falls back either to the value\n     * defined in the style prop, or the last read value.\n     */\n    if (removedKeys.size) {\n      var fallbackAnimation_1 = {};\n      removedKeys.forEach(function (key) {\n        var fallbackTarget = visualElement.getBaseTarget(key);\n        if (fallbackTarget !== undefined) {\n          fallbackAnimation_1[key] = fallbackTarget;\n        }\n      });\n      animations.push({\n        animation: fallbackAnimation_1\n      });\n    }\n    var shouldAnimate = Boolean(animations.length);\n    if (isInitialRender && props.initial === false && !visualElement.manuallyAnimateOnMount) {\n      shouldAnimate = false;\n    }\n    isInitialRender = false;\n    return shouldAnimate ? animate(animations) : Promise.resolve();\n  }\n  /**\n   * Change whether a certain animation type is active.\n   */\n  function setActive(type, isActive, options) {\n    var _a;\n    // If the active state hasn't changed, we can safely do nothing here\n    if (state[type].isActive === isActive) return Promise.resolve();\n    // Propagate active change to children\n    (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n      var _a;\n      return (_a = child.animationState) === null || _a === void 0 ? void 0 : _a.setActive(type, isActive);\n    });\n    state[type].isActive = isActive;\n    return animateChanges(options, type);\n  }\n  return {\n    isAnimated: isAnimated,\n    animateChanges: animateChanges,\n    setActive: setActive,\n    setAnimateFunction: setAnimateFunction,\n    getState: function getState() {\n      return state;\n    }\n  };\n}\nfunction variantsHaveChanged(prev, next) {\n  if (typeof next === \"string\") {\n    return next !== prev;\n  } else if (isVariantLabels(next)) {\n    return !shallowCompare(next, prev);\n  }\n  return false;\n}\nfunction createTypeState(isActive) {\n  if (isActive === void 0) {\n    isActive = false;\n  }\n  return {\n    isActive: isActive,\n    protectedKeys: {},\n    needsAnimating: {},\n    prevResolvedValues: {}\n  };\n}\nfunction createState() {\n  var _a;\n  return _a = {}, _a[AnimationType.Animate] = createTypeState(true), _a[AnimationType.Hover] = createTypeState(), _a[AnimationType.Tap] = createTypeState(), _a[AnimationType.Drag] = createTypeState(), _a[AnimationType.Focus] = createTypeState(), _a[AnimationType.Exit] = createTypeState(), _a;\n}\nvar animations = {\n  animation: makeRenderlessComponent(function (_a) {\n    var visualElement = _a.visualElement,\n      animate = _a.animate;\n    /**\n     * We dynamically generate the AnimationState manager as it contains a reference\n     * to the underlying animation library. We only want to load that if we load this,\n     * so people can optionally code split it out using the `m` component.\n     */\n    visualElement.animationState || (visualElement.animationState = createAnimationState(visualElement));\n    /**\n     * Subscribe any provided AnimationControls to the component's VisualElement\n     */\n    if (isAnimationControls(animate)) {\n      React.useEffect(function () {\n        return animate.subscribe(visualElement);\n      }, [animate]);\n    }\n  }),\n  exit: makeRenderlessComponent(function (props) {\n    var custom = props.custom,\n      visualElement = props.visualElement;\n    var _a = tslib.__read(usePresence(), 2),\n      isPresent = _a[0],\n      onExitComplete = _a[1];\n    var presenceContext = React.useContext(PresenceContext);\n    React.useEffect(function () {\n      var _a, _b;\n      var animation = (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Exit, !isPresent, {\n        custom: (_b = presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.custom) !== null && _b !== void 0 ? _b : custom\n      });\n      !isPresent && (animation === null || animation === void 0 ? void 0 : animation.then(onExitComplete));\n    }, [isPresent]);\n  })\n};\n\n/**\n * @internal\n */\nvar PanSession = /** @class */function () {\n  function PanSession(event, handlers, _a) {\n    var _this = this;\n    var _b = _a === void 0 ? {} : _a,\n      transformPagePoint = _b.transformPagePoint;\n    /**\n     * @internal\n     */\n    this.startEvent = null;\n    /**\n     * @internal\n     */\n    this.lastMoveEvent = null;\n    /**\n     * @internal\n     */\n    this.lastMoveEventInfo = null;\n    /**\n     * @internal\n     */\n    this.handlers = {};\n    this.updatePoint = function () {\n      if (!(_this.lastMoveEvent && _this.lastMoveEventInfo)) return;\n      var info = getPanInfo(_this.lastMoveEventInfo, _this.history);\n      var isPanStarted = _this.startEvent !== null;\n      // Only start panning if the offset is larger than 3 pixels. If we make it\n      // any larger than this we'll want to reset the pointer history\n      // on the first update to avoid visual snapping to the cursoe.\n      var isDistancePastThreshold = popmotion.distance(info.offset, {\n        x: 0,\n        y: 0\n      }) >= 3;\n      if (!isPanStarted && !isDistancePastThreshold) return;\n      var point = info.point;\n      var timestamp = sync.getFrameData().timestamp;\n      _this.history.push(tslib.__assign(tslib.__assign({}, point), {\n        timestamp: timestamp\n      }));\n      var _a = _this.handlers,\n        onStart = _a.onStart,\n        onMove = _a.onMove;\n      if (!isPanStarted) {\n        onStart && onStart(_this.lastMoveEvent, info);\n        _this.startEvent = _this.lastMoveEvent;\n      }\n      onMove && onMove(_this.lastMoveEvent, info);\n    };\n    this.handlePointerMove = function (event, info) {\n      _this.lastMoveEvent = event;\n      _this.lastMoveEventInfo = transformPoint(info, _this.transformPagePoint);\n      // Because Safari doesn't trigger mouseup events when it's above a `<select>`\n      if (isMouseEvent(event) && event.buttons === 0) {\n        _this.handlePointerUp(event, info);\n        return;\n      }\n      // Throttle mouse move event to once per frame\n      sync__default['default'].update(_this.updatePoint, true);\n    };\n    this.handlePointerUp = function (event, info) {\n      _this.end();\n      var _a = _this.handlers,\n        onEnd = _a.onEnd,\n        onSessionEnd = _a.onSessionEnd;\n      var panInfo = getPanInfo(transformPoint(info, _this.transformPagePoint), _this.history);\n      if (_this.startEvent && onEnd) {\n        onEnd(event, panInfo);\n      }\n      onSessionEnd && onSessionEnd(event, panInfo);\n    };\n    // If we have more than one touch, don't start detecting this gesture\n    if (isTouchEvent(event) && event.touches.length > 1) return;\n    this.handlers = handlers;\n    this.transformPagePoint = transformPagePoint;\n    var info = extractEventInfo(event);\n    var initialInfo = transformPoint(info, this.transformPagePoint);\n    var point = initialInfo.point;\n    var timestamp = sync.getFrameData().timestamp;\n    this.history = [tslib.__assign(tslib.__assign({}, point), {\n      timestamp: timestamp\n    })];\n    var onSessionStart = handlers.onSessionStart;\n    onSessionStart && onSessionStart(event, getPanInfo(initialInfo, this.history));\n    this.removeListeners = popmotion.pipe(addPointerEvent(window, \"pointermove\", this.handlePointerMove), addPointerEvent(window, \"pointerup\", this.handlePointerUp), addPointerEvent(window, \"pointercancel\", this.handlePointerUp));\n  }\n  PanSession.prototype.updateHandlers = function (handlers) {\n    this.handlers = handlers;\n  };\n  PanSession.prototype.end = function () {\n    this.removeListeners && this.removeListeners();\n    sync.cancelSync.update(this.updatePoint);\n  };\n  return PanSession;\n}();\nfunction transformPoint(info, transformPagePoint) {\n  return transformPagePoint ? {\n    point: transformPagePoint(info.point)\n  } : info;\n}\nfunction subtractPoint(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\nfunction getPanInfo(_a, history) {\n  var point = _a.point;\n  return {\n    point: point,\n    delta: subtractPoint(point, lastDevicePoint(history)),\n    offset: subtractPoint(point, startDevicePoint(history)),\n    velocity: getVelocity(history, 0.1)\n  };\n}\nfunction startDevicePoint(history) {\n  return history[0];\n}\nfunction lastDevicePoint(history) {\n  return history[history.length - 1];\n}\nfunction getVelocity(history, timeDelta) {\n  if (history.length < 2) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n  var i = history.length - 1;\n  var timestampedPoint = null;\n  var lastPoint = lastDevicePoint(history);\n  while (i >= 0) {\n    timestampedPoint = history[i];\n    if (lastPoint.timestamp - timestampedPoint.timestamp > secondsToMilliseconds(timeDelta)) {\n      break;\n    }\n    i--;\n  }\n  if (!timestampedPoint) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n  var time = (lastPoint.timestamp - timestampedPoint.timestamp) / 1000;\n  if (time === 0) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n  var currentVelocity = {\n    x: (lastPoint.x - timestampedPoint.x) / time,\n    y: (lastPoint.y - timestampedPoint.y) / time\n  };\n  if (currentVelocity.x === Infinity) {\n    currentVelocity.x = 0;\n  }\n  if (currentVelocity.y === Infinity) {\n    currentVelocity.y = 0;\n  }\n  return currentVelocity;\n}\nfunction noop(any) {\n  return any;\n}\n\n/**\n * Bounding boxes tend to be defined as top, left, right, bottom. For various operations\n * it's easier to consider each axis individually. This function returns a bounding box\n * as a map of single-axis min/max values.\n */\nfunction convertBoundingBoxToAxisBox(_a) {\n  var top = _a.top,\n    left = _a.left,\n    right = _a.right,\n    bottom = _a.bottom;\n  return {\n    x: {\n      min: left,\n      max: right\n    },\n    y: {\n      min: top,\n      max: bottom\n    }\n  };\n}\nfunction convertAxisBoxToBoundingBox(_a) {\n  var x = _a.x,\n    y = _a.y;\n  return {\n    top: y.min,\n    bottom: y.max,\n    left: x.min,\n    right: x.max\n  };\n}\n/**\n * Applies a TransformPoint function to a bounding box. TransformPoint is usually a function\n * provided by Framer to allow measured points to be corrected for device scaling. This is used\n * when measuring DOM elements and DOM event points.\n */\nfunction transformBoundingBox(_a, transformPoint) {\n  var top = _a.top,\n    left = _a.left,\n    bottom = _a.bottom,\n    right = _a.right;\n  if (transformPoint === void 0) {\n    transformPoint = noop;\n  }\n  var topLeft = transformPoint({\n    x: left,\n    y: top\n  });\n  var bottomRight = transformPoint({\n    x: right,\n    y: bottom\n  });\n  return {\n    top: topLeft.y,\n    left: topLeft.x,\n    bottom: bottomRight.y,\n    right: bottomRight.x\n  };\n}\n/**\n * Create an empty axis box of zero size\n */\nfunction axisBox() {\n  return {\n    x: {\n      min: 0,\n      max: 1\n    },\n    y: {\n      min: 0,\n      max: 1\n    }\n  };\n}\nfunction copyAxisBox(box) {\n  return {\n    x: tslib.__assign({}, box.x),\n    y: tslib.__assign({}, box.y)\n  };\n}\n/**\n * Create an empty box delta\n */\nvar zeroDelta = {\n  translate: 0,\n  scale: 1,\n  origin: 0,\n  originPoint: 0\n};\nfunction delta() {\n  return {\n    x: tslib.__assign({}, zeroDelta),\n    y: tslib.__assign({}, zeroDelta)\n  };\n}\n\n// Call a handler once for each axis\nfunction eachAxis(handler) {\n  return [handler(\"x\"), handler(\"y\")];\n}\nvar clampProgress = function clampProgress(v) {\n  return popmotion.clamp(0, 1, v);\n};\n/**\n * Returns true if the provided value is within maxDistance of the provided target\n */\nfunction isNear(value, target, maxDistance) {\n  if (target === void 0) {\n    target = 0;\n  }\n  if (maxDistance === void 0) {\n    maxDistance = 0.01;\n  }\n  return popmotion.distance(value, target) < maxDistance;\n}\nfunction calcLength(axis) {\n  return axis.max - axis.min;\n}\n/**\n * Calculate a transform origin relative to the source axis, between 0-1, that results\n * in an asthetically pleasing scale/transform needed to project from source to target.\n */\nfunction calcOrigin(source, target) {\n  var origin = 0.5;\n  var sourceLength = calcLength(source);\n  var targetLength = calcLength(target);\n  if (targetLength > sourceLength) {\n    origin = popmotion.progress(target.min, target.max - sourceLength, source.min);\n  } else if (sourceLength > targetLength) {\n    origin = popmotion.progress(source.min, source.max - targetLength, target.min);\n  }\n  return clampProgress(origin);\n}\n/**\n * Update the AxisDelta with a transform that projects source into target.\n *\n * The transform `origin` is optional. If not provided, it'll be automatically\n * calculated based on the relative positions of the two bounding boxes.\n */\nfunction updateAxisDelta(delta, source, target, origin) {\n  if (origin === void 0) {\n    origin = 0.5;\n  }\n  delta.origin = origin;\n  delta.originPoint = popmotion.mix(source.min, source.max, delta.origin);\n  delta.scale = calcLength(target) / calcLength(source);\n  if (isNear(delta.scale, 1, 0.0001)) delta.scale = 1;\n  delta.translate = popmotion.mix(target.min, target.max, delta.origin) - delta.originPoint;\n  if (isNear(delta.translate)) delta.translate = 0;\n}\n/**\n * Update the BoxDelta with a transform that projects the source into the target.\n *\n * The transform `origin` is optional. If not provided, it'll be automatically\n * calculated based on the relative positions of the two bounding boxes.\n */\nfunction updateBoxDelta(delta, source, target, origin) {\n  updateAxisDelta(delta.x, source.x, target.x, defaultOrigin(origin.originX));\n  updateAxisDelta(delta.y, source.y, target.y, defaultOrigin(origin.originY));\n}\n/**\n * Currently this only accepts numerical origins, measured as 0-1, but could\n * accept pixel values by comparing to the target axis.\n */\nfunction defaultOrigin(origin) {\n  return typeof origin === \"number\" ? origin : 0.5;\n}\nfunction calcRelativeAxis(target, relative, parent) {\n  target.min = parent.min + relative.min;\n  target.max = target.min + calcLength(relative);\n}\nfunction calcRelativeBox(projection, parentProjection) {\n  calcRelativeAxis(projection.target.x, projection.relativeTarget.x, parentProjection.target.x);\n  calcRelativeAxis(projection.target.y, projection.relativeTarget.y, parentProjection.target.y);\n}\n\n/**\n * Apply constraints to a point. These constraints are both physical along an\n * axis, and an elastic factor that determines how much to constrain the point\n * by if it does lie outside the defined parameters.\n */\nfunction applyConstraints(point, _a, elastic) {\n  var min = _a.min,\n    max = _a.max;\n  if (min !== undefined && point < min) {\n    // If we have a min point defined, and this is outside of that, constrain\n    point = elastic ? popmotion.mix(min, point, elastic.min) : Math.max(point, min);\n  } else if (max !== undefined && point > max) {\n    // If we have a max point defined, and this is outside of that, constrain\n    point = elastic ? popmotion.mix(max, point, elastic.max) : Math.min(point, max);\n  }\n  return point;\n}\n/**\n * Calculates a min projection point based on a pointer, pointer progress\n * within the drag target, and constraints.\n *\n * For instance if an element was 100px width, we were dragging from 0.25\n * along this axis, the pointer is at 200px, and there were no constraints,\n * we would calculate a min projection point of 175px.\n */\nfunction calcConstrainedMinPoint(point, length, progress, constraints, elastic) {\n  // Calculate a min point for this axis and apply it to the current pointer\n  var min = point - length * progress;\n  return constraints ? applyConstraints(min, constraints, elastic) : min;\n}\n/**\n * Calculate constraints in terms of the viewport when defined relatively to the\n * measured axis. This is measured from the nearest edge, so a max constraint of 200\n * on an axis with a max value of 300 would return a constraint of 500 - axis length\n */\nfunction calcRelativeAxisConstraints(axis, min, max) {\n  return {\n    min: min !== undefined ? axis.min + min : undefined,\n    max: max !== undefined ? axis.max + max - (axis.max - axis.min) : undefined\n  };\n}\n/**\n * Calculate constraints in terms of the viewport when\n * defined relatively to the measured bounding box.\n */\nfunction calcRelativeConstraints(layoutBox, _a) {\n  var top = _a.top,\n    left = _a.left,\n    bottom = _a.bottom,\n    right = _a.right;\n  return {\n    x: calcRelativeAxisConstraints(layoutBox.x, left, right),\n    y: calcRelativeAxisConstraints(layoutBox.y, top, bottom)\n  };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative axis\n */\nfunction calcViewportAxisConstraints(layoutAxis, constraintsAxis) {\n  var _a;\n  var min = constraintsAxis.min - layoutAxis.min;\n  var max = constraintsAxis.max - layoutAxis.max;\n  // If the constraints axis is actually smaller than the layout axis then we can\n  // flip the constraints\n  if (constraintsAxis.max - constraintsAxis.min < layoutAxis.max - layoutAxis.min) {\n    _a = tslib.__read([max, min], 2), min = _a[0], max = _a[1];\n  }\n  return {\n    min: layoutAxis.min + min,\n    max: layoutAxis.min + max\n  };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative box\n */\nfunction calcViewportConstraints(layoutBox, constraintsBox) {\n  return {\n    x: calcViewportAxisConstraints(layoutBox.x, constraintsBox.x),\n    y: calcViewportAxisConstraints(layoutBox.y, constraintsBox.y)\n  };\n}\n/**\n * Calculate the an axis position based on two axes and a progress value.\n */\nfunction calcPositionFromProgress(axis, constraints, progress) {\n  var axisLength = axis.max - axis.min;\n  var min = popmotion.mix(constraints.min, constraints.max - axisLength, progress);\n  return {\n    min: min,\n    max: min + axisLength\n  };\n}\n/**\n * Rebase the calculated viewport constraints relative to the layout.min point.\n */\nfunction rebaseAxisConstraints(layout, constraints) {\n  var relativeConstraints = {};\n  if (constraints.min !== undefined) {\n    relativeConstraints.min = constraints.min - layout.min;\n  }\n  if (constraints.max !== undefined) {\n    relativeConstraints.max = constraints.max - layout.min;\n  }\n  return relativeConstraints;\n}\nvar defaultElastic = 0.35;\n/**\n * Accepts a dragElastic prop and returns resolved elastic values for each axis.\n */\nfunction resolveDragElastic(dragElastic) {\n  if (dragElastic === false) {\n    dragElastic = 0;\n  } else if (dragElastic === true) {\n    dragElastic = defaultElastic;\n  }\n  return {\n    x: resolveAxisElastic(dragElastic, \"left\", \"right\"),\n    y: resolveAxisElastic(dragElastic, \"top\", \"bottom\")\n  };\n}\nfunction resolveAxisElastic(dragElastic, minLabel, maxLabel) {\n  return {\n    min: resolvePointElastic(dragElastic, minLabel),\n    max: resolvePointElastic(dragElastic, maxLabel)\n  };\n}\nfunction resolvePointElastic(dragElastic, label) {\n  var _a;\n  return typeof dragElastic === \"number\" ? dragElastic : (_a = dragElastic[label]) !== null && _a !== void 0 ? _a : 0;\n}\n\n/**\n * Measure and return the element bounding box.\n *\n * We convert the box into an AxisBox2D to make it easier to work with each axis\n * individually and programmatically.\n *\n * This function optionally accepts a transformPagePoint function which allows us to compensate\n * for, for instance, measuring the element within a scaled plane like a Framer devivce preview component.\n */\nfunction getBoundingBox(element, transformPagePoint) {\n  var box = element.getBoundingClientRect();\n  return convertBoundingBoxToAxisBox(transformBoundingBox(box, transformPagePoint));\n}\nvar compareByDepth = function compareByDepth(a, b) {\n  return a.depth - b.depth;\n};\nfunction isProjecting(visualElement) {\n  var isEnabled = visualElement.projection.isEnabled;\n  return isEnabled || visualElement.shouldResetTransform();\n}\nfunction collectProjectingAncestors(visualElement, ancestors) {\n  if (ancestors === void 0) {\n    ancestors = [];\n  }\n  var parent = visualElement.parent;\n  if (parent) collectProjectingAncestors(parent, ancestors);\n  if (isProjecting(visualElement)) ancestors.push(visualElement);\n  return ancestors;\n}\nfunction collectProjectingChildren(visualElement) {\n  var children = [];\n  var addChild = function addChild(child) {\n    if (isProjecting(child)) children.push(child);\n    child.children.forEach(addChild);\n  };\n  visualElement.children.forEach(addChild);\n  return children.sort(compareByDepth);\n}\n/**\n * Update the layoutState by measuring the DOM layout. This\n * should be called after resetting any layout-affecting transforms.\n */\nfunction updateLayoutMeasurement(visualElement) {\n  if (visualElement.shouldResetTransform()) return;\n  var layoutState = visualElement.getLayoutState();\n  visualElement.notifyBeforeLayoutMeasure(layoutState.layout);\n  layoutState.isHydrated = true;\n  layoutState.layout = visualElement.measureViewportBox();\n  layoutState.layoutCorrected = copyAxisBox(layoutState.layout);\n  visualElement.notifyLayoutMeasure(layoutState.layout, visualElement.prevViewportBox || layoutState.layout);\n  sync__default['default'].update(function () {\n    return visualElement.rebaseProjectionTarget();\n  });\n}\n/**\n * Record the viewport box as it was before an expected mutation/re-render\n */\nfunction snapshotViewportBox(visualElement) {\n  if (visualElement.shouldResetTransform()) return;\n  visualElement.prevViewportBox = visualElement.measureViewportBox(false);\n  /**\n   * Update targetBox to match the prevViewportBox. This is just to ensure\n   * that targetBox is affected by scroll in the same way as the measured box\n   */\n  visualElement.rebaseProjectionTarget(false, visualElement.prevViewportBox);\n}\nfunction tweenAxis(target, prev, next, p) {\n  target.min = popmotion.mix(prev.min, next.min, p);\n  target.max = popmotion.mix(prev.max, next.max, p);\n}\nfunction calcRelativeOffsetAxis(parent, child) {\n  return {\n    min: child.min - parent.min,\n    max: child.max - parent.min\n  };\n}\nfunction calcRelativeOffset(parent, child) {\n  return {\n    x: calcRelativeOffsetAxis(parent.x, child.x),\n    y: calcRelativeOffsetAxis(parent.y, child.y)\n  };\n}\nfunction checkIfParentHasChanged(prev, next) {\n  var prevId = prev.getLayoutId();\n  var nextId = next.getLayoutId();\n  return prevId !== nextId || nextId === undefined && prev !== next;\n}\nfunction isDraggable(visualElement) {\n  var _a = visualElement.getProps(),\n    drag = _a.drag,\n    _dragX = _a._dragX;\n  return drag && !_dragX;\n}\n\n/**\n * Reset an axis to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction resetAxis(axis, originAxis) {\n  axis.min = originAxis.min;\n  axis.max = originAxis.max;\n}\n/**\n * Reset a box to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction resetBox(box, originBox) {\n  resetAxis(box.x, originBox.x);\n  resetAxis(box.y, originBox.y);\n}\n/**\n * Scales a point based on a factor and an originPoint\n */\nfunction scalePoint(point, scale, originPoint) {\n  var distanceFromOrigin = point - originPoint;\n  var scaled = scale * distanceFromOrigin;\n  return originPoint + scaled;\n}\n/**\n * Applies a translate/scale delta to a point\n */\nfunction applyPointDelta(point, translate, scale, originPoint, boxScale) {\n  if (boxScale !== undefined) {\n    point = scalePoint(point, boxScale, originPoint);\n  }\n  return scalePoint(point, scale, originPoint) + translate;\n}\n/**\n * Applies a translate/scale delta to an axis\n */\nfunction applyAxisDelta(axis, translate, scale, originPoint, boxScale) {\n  if (translate === void 0) {\n    translate = 0;\n  }\n  if (scale === void 0) {\n    scale = 1;\n  }\n  axis.min = applyPointDelta(axis.min, translate, scale, originPoint, boxScale);\n  axis.max = applyPointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Applies a translate/scale delta to a box\n */\nfunction applyBoxDelta(box, _a) {\n  var x = _a.x,\n    y = _a.y;\n  applyAxisDelta(box.x, x.translate, x.scale, x.originPoint);\n  applyAxisDelta(box.y, y.translate, y.scale, y.originPoint);\n}\n/**\n * Apply a transform to an axis from the latest resolved motion values.\n * This function basically acts as a bridge between a flat motion value map\n * and applyAxisDelta\n */\nfunction applyAxisTransforms(final, axis, transforms, _a) {\n  var _b = tslib.__read(_a, 3),\n    key = _b[0],\n    scaleKey = _b[1],\n    originKey = _b[2];\n  // Copy the current axis to the final axis before mutation\n  final.min = axis.min;\n  final.max = axis.max;\n  var axisOrigin = transforms[originKey] !== undefined ? transforms[originKey] : 0.5;\n  var originPoint = popmotion.mix(axis.min, axis.max, axisOrigin);\n  // Apply the axis delta to the final axis\n  applyAxisDelta(final, transforms[key], transforms[scaleKey], originPoint, transforms.scale);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\nvar xKeys = [\"x\", \"scaleX\", \"originX\"];\nvar yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Apply a transform to a box from the latest resolved motion values.\n */\nfunction applyBoxTransforms(finalBox, box, transforms) {\n  applyAxisTransforms(finalBox.x, box.x, transforms, xKeys);\n  applyAxisTransforms(finalBox.y, box.y, transforms, yKeys);\n}\n/**\n * Remove a delta from a point. This is essentially the steps of applyPointDelta in reverse\n */\nfunction removePointDelta(point, translate, scale, originPoint, boxScale) {\n  point -= translate;\n  point = scalePoint(point, 1 / scale, originPoint);\n  if (boxScale !== undefined) {\n    point = scalePoint(point, 1 / boxScale, originPoint);\n  }\n  return point;\n}\n/**\n * Remove a delta from an axis. This is essentially the steps of applyAxisDelta in reverse\n */\nfunction removeAxisDelta(axis, translate, scale, origin, boxScale) {\n  if (translate === void 0) {\n    translate = 0;\n  }\n  if (scale === void 0) {\n    scale = 1;\n  }\n  if (origin === void 0) {\n    origin = 0.5;\n  }\n  var originPoint = popmotion.mix(axis.min, axis.max, origin) - translate;\n  axis.min = removePointDelta(axis.min, translate, scale, originPoint, boxScale);\n  axis.max = removePointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Remove a transforms from an axis. This is essentially the steps of applyAxisTransforms in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeAxisTransforms(axis, transforms, _a) {\n  var _b = tslib.__read(_a, 3),\n    key = _b[0],\n    scaleKey = _b[1],\n    originKey = _b[2];\n  removeAxisDelta(axis, transforms[key], transforms[scaleKey], transforms[originKey], transforms.scale);\n}\n/**\n * Remove a transforms from an box. This is essentially the steps of applyAxisBox in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeBoxTransforms(box, transforms) {\n  removeAxisTransforms(box.x, transforms, xKeys);\n  removeAxisTransforms(box.y, transforms, yKeys);\n}\n/**\n * Apply a tree of deltas to a box. We do this to calculate the effect of all the transforms\n * in a tree upon our box before then calculating how to project it into our desired viewport-relative box\n *\n * This is the final nested loop within updateLayoutDelta for future refactoring\n */\nfunction applyTreeDeltas(box, treeScale, treePath) {\n  var treeLength = treePath.length;\n  if (!treeLength) return;\n  // Reset the treeScale\n  treeScale.x = treeScale.y = 1;\n  var node;\n  var delta;\n  for (var i = 0; i < treeLength; i++) {\n    node = treePath[i];\n    delta = node.getLayoutState().delta;\n    // Incoporate each ancestor's scale into a culmulative treeScale for this component\n    treeScale.x *= delta.x.scale;\n    treeScale.y *= delta.y.scale;\n    // Apply each ancestor's calculated delta into this component's recorded layout box\n    applyBoxDelta(box, delta);\n    // If this is a draggable ancestor, also incorporate the node's transform to the layout box\n    if (isDraggable(node)) {\n      applyBoxTransforms(box, box, node.getLatestValues());\n    }\n  }\n}\n\n/**\n * Returns a boolean stating whether or not we converted the projection\n * to relative projection.\n */\nfunction convertToRelativeProjection(visualElement, isLayoutDrag) {\n  if (isLayoutDrag === void 0) {\n    isLayoutDrag = true;\n  }\n  var projectionParent = visualElement.getProjectionParent();\n  if (!projectionParent) return false;\n  var offset;\n  if (isLayoutDrag) {\n    offset = calcRelativeOffset(projectionParent.projection.target, visualElement.projection.target);\n    removeBoxTransforms(offset, projectionParent.getLatestValues());\n  } else {\n    offset = calcRelativeOffset(projectionParent.getLayoutState().layout, visualElement.getLayoutState().layout);\n  }\n  eachAxis(function (axis) {\n    return visualElement.setProjectionTargetAxis(axis, offset[axis].min, offset[axis].max, true);\n  });\n  return true;\n}\nvar unresolvedJobs = new Set();\nfunction pushJob(stack, job, pointer) {\n  if (!stack[pointer]) stack[pointer] = [];\n  stack[pointer].push(job);\n}\nfunction batchLayout(callback) {\n  unresolvedJobs.add(callback);\n  return function () {\n    return unresolvedJobs.delete(callback);\n  };\n}\nfunction flushLayout() {\n  if (!unresolvedJobs.size) return;\n  var pointer = 0;\n  var reads = [[]];\n  var writes = [];\n  var setRead = function setRead(job) {\n    return pushJob(reads, job, pointer);\n  };\n  var setWrite = function setWrite(job) {\n    pushJob(writes, job, pointer);\n    pointer++;\n  };\n  /**\n   * Resolve jobs into their array stacks\n   */\n  unresolvedJobs.forEach(function (callback) {\n    callback(setRead, setWrite);\n    pointer = 0;\n  });\n  unresolvedJobs.clear();\n  /**\n   * Execute jobs\n   */\n  var numStacks = writes.length;\n  for (var i = 0; i <= numStacks; i++) {\n    reads[i] && reads[i].forEach(executeJob);\n    writes[i] && writes[i].forEach(executeJob);\n  }\n}\nvar executeJob = function executeJob(job) {\n  return job();\n};\nvar elementDragControls = new WeakMap();\n/**\n *\n */\nvar lastPointerEvent;\nvar VisualElementDragControls = /** @class */function () {\n  function VisualElementDragControls(_a) {\n    var visualElement = _a.visualElement;\n    /**\n     * Track whether we're currently dragging.\n     *\n     * @internal\n     */\n    this.isDragging = false;\n    /**\n     * The current direction of drag, or `null` if both.\n     *\n     * @internal\n     */\n    this.currentDirection = null;\n    /**\n     * The permitted boundaries of travel, in pixels.\n     *\n     * @internal\n     */\n    this.constraints = false;\n    /**\n     * The per-axis resolved elastic values.\n     *\n     * @internal\n     */\n    this.elastic = axisBox();\n    /**\n     * A reference to the host component's latest props.\n     *\n     * @internal\n     */\n    this.props = {};\n    /**\n     * @internal\n     */\n    this.hasMutatedConstraints = false;\n    /**\n     * Track the initial position of the cursor relative to the dragging element\n     * when dragging starts as a value of 0-1 on each axis. We then use this to calculate\n     * an ideal bounding box for the VisualElement renderer to project into every frame.\n     *\n     * @internal\n     */\n    this.cursorProgress = {\n      x: 0.5,\n      y: 0.5\n    };\n    // When updating _dragX, or _dragY instead of the VisualElement,\n    // persist their values between drag gestures.\n    this.originPoint = {};\n    // This is a reference to the global drag gesture lock, ensuring only one component\n    // can \"capture\" the drag of one or both axes.\n    // TODO: Look into moving this into pansession?\n    this.openGlobalLock = null;\n    /**\n     * @internal\n     */\n    this.panSession = null;\n    this.visualElement = visualElement;\n    this.visualElement.enableLayoutProjection();\n    elementDragControls.set(visualElement, this);\n  }\n  /**\n   * Instantiate a PanSession for the drag gesture\n   *\n   * @public\n   */\n  VisualElementDragControls.prototype.start = function (originEvent, _a) {\n    var _this = this;\n    var _b = _a === void 0 ? {} : _a,\n      _c = _b.snapToCursor,\n      snapToCursor = _c === void 0 ? false : _c,\n      cursorProgress = _b.cursorProgress;\n    var onSessionStart = function onSessionStart(event) {\n      var _a;\n      // Stop any animations on both axis values immediately. This allows the user to throw and catch\n      // the component.\n      _this.stopMotion();\n      /**\n       * Save the initial point. We'll use this to calculate the pointer's position rather\n       * than the one we receive when the gesture actually starts. By then, the pointer will\n       * have already moved, and the perception will be of the pointer \"slipping\" across the element\n       */\n      var initialPoint = getViewportPointFromEvent(event).point;\n      (_a = _this.cancelLayout) === null || _a === void 0 ? void 0 : _a.call(_this);\n      _this.cancelLayout = batchLayout(function (read, write) {\n        var ancestors = collectProjectingAncestors(_this.visualElement);\n        var children = collectProjectingChildren(_this.visualElement);\n        var tree = tslib.__spreadArray(tslib.__spreadArray([], tslib.__read(ancestors)), tslib.__read(children));\n        var hasManuallySetCursorOrigin = false;\n        /**\n         * Apply a simple lock to the projection target. This ensures no animations\n         * can run on the projection box while this lock is active.\n         */\n        _this.isLayoutDrag() && _this.visualElement.lockProjectionTarget();\n        write(function () {\n          tree.forEach(function (element) {\n            return element.resetTransform();\n          });\n        });\n        read(function () {\n          updateLayoutMeasurement(_this.visualElement);\n          children.forEach(updateLayoutMeasurement);\n        });\n        write(function () {\n          tree.forEach(function (element) {\n            return element.restoreTransform();\n          });\n          if (snapToCursor) {\n            hasManuallySetCursorOrigin = _this.snapToCursor(initialPoint);\n          }\n        });\n        read(function () {\n          var isRelativeDrag = Boolean(_this.getAxisMotionValue(\"x\") && !_this.isExternalDrag());\n          if (!isRelativeDrag) {\n            _this.visualElement.rebaseProjectionTarget(true, _this.visualElement.measureViewportBox(false));\n          }\n          _this.visualElement.scheduleUpdateLayoutProjection();\n          /**\n           * When dragging starts, we want to find where the cursor is relative to the bounding box\n           * of the element. Every frame, we calculate a new bounding box using this relative position\n           * and let the visualElement renderer figure out how to reproject the element into this bounding\n           * box.\n           *\n           * By doing it this way, rather than applying an x/y transform directly to the element,\n           * we can ensure the component always visually sticks to the cursor as we'd expect, even\n           * if the DOM element itself changes layout as a result of React updates the user might\n           * make based on the drag position.\n           */\n          var projection = _this.visualElement.projection;\n          eachAxis(function (axis) {\n            if (!hasManuallySetCursorOrigin) {\n              var _a = projection.target[axis],\n                min = _a.min,\n                max = _a.max;\n              _this.cursorProgress[axis] = cursorProgress ? cursorProgress[axis] : popmotion.progress(min, max, initialPoint[axis]);\n            }\n            /**\n             * If we have external drag MotionValues, record their origin point. On pointermove\n             * we'll apply the pan gesture offset directly to this value.\n             */\n            var axisValue = _this.getAxisMotionValue(axis);\n            if (axisValue) {\n              _this.originPoint[axis] = axisValue.get();\n            }\n          });\n        });\n        write(function () {\n          sync.flushSync.update();\n          sync.flushSync.preRender();\n          sync.flushSync.render();\n          sync.flushSync.postRender();\n        });\n        read(function () {\n          return _this.resolveDragConstraints();\n        });\n      });\n    };\n    var onStart = function onStart(event, info) {\n      var _a, _b, _c;\n      // Attempt to grab the global drag gesture lock - maybe make this part of PanSession\n      var _d = _this.props,\n        drag = _d.drag,\n        dragPropagation = _d.dragPropagation;\n      if (drag && !dragPropagation) {\n        if (_this.openGlobalLock) _this.openGlobalLock();\n        _this.openGlobalLock = getGlobalLock(drag);\n        // If we don 't have the lock, don't start dragging\n        if (!_this.openGlobalLock) return;\n      }\n      flushLayout();\n      // Set current drag status\n      _this.isDragging = true;\n      _this.currentDirection = null;\n      // Fire onDragStart event\n      (_b = (_a = _this.props).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, event, info);\n      (_c = _this.visualElement.animationState) === null || _c === void 0 ? void 0 : _c.setActive(AnimationType.Drag, true);\n    };\n    var onMove = function onMove(event, info) {\n      var _a, _b, _c, _d;\n      var _e = _this.props,\n        dragPropagation = _e.dragPropagation,\n        dragDirectionLock = _e.dragDirectionLock;\n      // If we didn't successfully receive the gesture lock, early return.\n      if (!dragPropagation && !_this.openGlobalLock) return;\n      var offset = info.offset;\n      // Attempt to detect drag direction if directionLock is true\n      if (dragDirectionLock && _this.currentDirection === null) {\n        _this.currentDirection = getCurrentDirection(offset);\n        // If we've successfully set a direction, notify listener\n        if (_this.currentDirection !== null) {\n          (_b = (_a = _this.props).onDirectionLock) === null || _b === void 0 ? void 0 : _b.call(_a, _this.currentDirection);\n        }\n        return;\n      }\n      // Update each point with the latest position\n      _this.updateAxis(\"x\", info.point, offset);\n      _this.updateAxis(\"y\", info.point, offset);\n      // Fire onDrag event\n      (_d = (_c = _this.props).onDrag) === null || _d === void 0 ? void 0 : _d.call(_c, event, info);\n      // Update the last pointer event\n      lastPointerEvent = event;\n    };\n    var onSessionEnd = function onSessionEnd(event, info) {\n      return _this.stop(event, info);\n    };\n    var transformPagePoint = this.props.transformPagePoint;\n    this.panSession = new PanSession(originEvent, {\n      onSessionStart: onSessionStart,\n      onStart: onStart,\n      onMove: onMove,\n      onSessionEnd: onSessionEnd\n    }, {\n      transformPagePoint: transformPagePoint\n    });\n  };\n  VisualElementDragControls.prototype.resolveDragConstraints = function () {\n    var _this = this;\n    var _a = this.props,\n      dragConstraints = _a.dragConstraints,\n      dragElastic = _a.dragElastic;\n    var layout = this.visualElement.getLayoutState().layoutCorrected;\n    if (dragConstraints) {\n      this.constraints = isRefObject(dragConstraints) ? this.resolveRefConstraints(layout, dragConstraints) : calcRelativeConstraints(layout, dragConstraints);\n    } else {\n      this.constraints = false;\n    }\n    this.elastic = resolveDragElastic(dragElastic);\n    /**\n     * If we're outputting to external MotionValues, we want to rebase the measured constraints\n     * from viewport-relative to component-relative.\n     */\n    if (this.constraints && !this.hasMutatedConstraints) {\n      eachAxis(function (axis) {\n        if (_this.getAxisMotionValue(axis)) {\n          _this.constraints[axis] = rebaseAxisConstraints(layout[axis], _this.constraints[axis]);\n        }\n      });\n    }\n  };\n  VisualElementDragControls.prototype.resolveRefConstraints = function (layoutBox, constraints) {\n    var _a = this.props,\n      onMeasureDragConstraints = _a.onMeasureDragConstraints,\n      transformPagePoint = _a.transformPagePoint;\n    var constraintsElement = constraints.current;\n    heyListen.invariant(constraintsElement !== null, \"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.\");\n    this.constraintsBox = getBoundingBox(constraintsElement, transformPagePoint);\n    var measuredConstraints = calcViewportConstraints(layoutBox, this.constraintsBox);\n    /**\n     * If there's an onMeasureDragConstraints listener we call it and\n     * if different constraints are returned, set constraints to that\n     */\n    if (onMeasureDragConstraints) {\n      var userConstraints = onMeasureDragConstraints(convertAxisBoxToBoundingBox(measuredConstraints));\n      this.hasMutatedConstraints = !!userConstraints;\n      if (userConstraints) {\n        measuredConstraints = convertBoundingBoxToAxisBox(userConstraints);\n      }\n    }\n    return measuredConstraints;\n  };\n  VisualElementDragControls.prototype.cancelDrag = function () {\n    var _a, _b;\n    this.visualElement.unlockProjectionTarget();\n    (_a = this.cancelLayout) === null || _a === void 0 ? void 0 : _a.call(this);\n    this.isDragging = false;\n    this.panSession && this.panSession.end();\n    this.panSession = null;\n    if (!this.props.dragPropagation && this.openGlobalLock) {\n      this.openGlobalLock();\n      this.openGlobalLock = null;\n    }\n    (_b = this.visualElement.animationState) === null || _b === void 0 ? void 0 : _b.setActive(AnimationType.Drag, false);\n  };\n  VisualElementDragControls.prototype.stop = function (event, info) {\n    var _a, _b, _c;\n    (_a = this.panSession) === null || _a === void 0 ? void 0 : _a.end();\n    this.panSession = null;\n    var isDragging = this.isDragging;\n    this.cancelDrag();\n    if (!isDragging) return;\n    var velocity = info.velocity;\n    this.animateDragEnd(velocity);\n    (_c = (_b = this.props).onDragEnd) === null || _c === void 0 ? void 0 : _c.call(_b, event, info);\n  };\n  VisualElementDragControls.prototype.snapToCursor = function (point) {\n    var _this = this;\n    return eachAxis(function (axis) {\n      var drag = _this.props.drag;\n      // If we're not dragging this axis, do an early return.\n      if (!shouldDrag(axis, drag, _this.currentDirection)) return;\n      var axisValue = _this.getAxisMotionValue(axis);\n      if (axisValue) {\n        var box = _this.visualElement.getLayoutState().layout;\n        var length_1 = box[axis].max - box[axis].min;\n        var center = box[axis].min + length_1 / 2;\n        var offset = point[axis] - center;\n        _this.originPoint[axis] = point[axis];\n        axisValue.set(offset);\n      } else {\n        _this.cursorProgress[axis] = 0.5;\n        return true;\n      }\n    }).includes(true);\n  };\n  /**\n   * Update the specified axis with the latest pointer information.\n   */\n  VisualElementDragControls.prototype.updateAxis = function (axis, point, offset) {\n    var drag = this.props.drag;\n    // If we're not dragging this axis, do an early return.\n    if (!shouldDrag(axis, drag, this.currentDirection)) return;\n    return this.getAxisMotionValue(axis) ? this.updateAxisMotionValue(axis, offset) : this.updateVisualElementAxis(axis, point);\n  };\n  VisualElementDragControls.prototype.updateAxisMotionValue = function (axis, offset) {\n    var axisValue = this.getAxisMotionValue(axis);\n    if (!offset || !axisValue) return;\n    var nextValue = this.originPoint[axis] + offset[axis];\n    var update = this.constraints ? applyConstraints(nextValue, this.constraints[axis], this.elastic[axis]) : nextValue;\n    axisValue.set(update);\n  };\n  VisualElementDragControls.prototype.updateVisualElementAxis = function (axis, point) {\n    var _a;\n    // Get the actual layout bounding box of the element\n    var axisLayout = this.visualElement.getLayoutState().layout[axis];\n    // Calculate its current length. In the future we might want to lerp this to animate\n    // between lengths if the layout changes as we change the DOM\n    var axisLength = axisLayout.max - axisLayout.min;\n    // Get the initial progress that the pointer sat on this axis on gesture start.\n    var axisProgress = this.cursorProgress[axis];\n    // Calculate a new min point based on the latest pointer position, constraints and elastic\n    var min = calcConstrainedMinPoint(point[axis], axisLength, axisProgress, (_a = this.constraints) === null || _a === void 0 ? void 0 : _a[axis], this.elastic[axis]);\n    // Update the axis viewport target with this new min and the length\n    this.visualElement.setProjectionTargetAxis(axis, min, min + axisLength);\n  };\n  VisualElementDragControls.prototype.setProps = function (_a) {\n    var _b = _a.drag,\n      drag = _b === void 0 ? false : _b,\n      _c = _a.dragDirectionLock,\n      dragDirectionLock = _c === void 0 ? false : _c,\n      _d = _a.dragPropagation,\n      dragPropagation = _d === void 0 ? false : _d,\n      _e = _a.dragConstraints,\n      dragConstraints = _e === void 0 ? false : _e,\n      _f = _a.dragElastic,\n      dragElastic = _f === void 0 ? defaultElastic : _f,\n      _g = _a.dragMomentum,\n      dragMomentum = _g === void 0 ? true : _g,\n      remainingProps = tslib.__rest(_a, [\"drag\", \"dragDirectionLock\", \"dragPropagation\", \"dragConstraints\", \"dragElastic\", \"dragMomentum\"]);\n    this.props = tslib.__assign({\n      drag: drag,\n      dragDirectionLock: dragDirectionLock,\n      dragPropagation: dragPropagation,\n      dragConstraints: dragConstraints,\n      dragElastic: dragElastic,\n      dragMomentum: dragMomentum\n    }, remainingProps);\n  };\n  /**\n   * Drag works differently depending on which props are provided.\n   *\n   * - If _dragX and _dragY are provided, we output the gesture delta directly to those motion values.\n   * - If the component will perform layout animations, we output the gesture to the component's\n   *      visual bounding box\n   * - Otherwise, we apply the delta to the x/y motion values.\n   */\n  VisualElementDragControls.prototype.getAxisMotionValue = function (axis) {\n    var _a = this.props,\n      layout = _a.layout,\n      layoutId = _a.layoutId;\n    var dragKey = \"_drag\" + axis.toUpperCase();\n    if (this.props[dragKey]) {\n      return this.props[dragKey];\n    } else if (!layout && layoutId === undefined) {\n      return this.visualElement.getValue(axis, 0);\n    }\n  };\n  VisualElementDragControls.prototype.isLayoutDrag = function () {\n    return !this.getAxisMotionValue(\"x\");\n  };\n  VisualElementDragControls.prototype.isExternalDrag = function () {\n    var _a = this.props,\n      _dragX = _a._dragX,\n      _dragY = _a._dragY;\n    return _dragX || _dragY;\n  };\n  VisualElementDragControls.prototype.animateDragEnd = function (velocity) {\n    var _this = this;\n    var _a = this.props,\n      drag = _a.drag,\n      dragMomentum = _a.dragMomentum,\n      dragElastic = _a.dragElastic,\n      dragTransition = _a.dragTransition;\n    /**\n     * Everything beyond the drag gesture should be performed with\n     * relative projection so children stay in sync with their parent element.\n     */\n    var isRelative = convertToRelativeProjection(this.visualElement, this.isLayoutDrag() && !this.isExternalDrag());\n    /**\n     * If we had previously resolved constraints relative to the viewport,\n     * we need to also convert those to a relative coordinate space for the animation\n     */\n    var constraints = this.constraints || {};\n    if (isRelative && Object.keys(constraints).length && this.isLayoutDrag()) {\n      var projectionParent = this.visualElement.getProjectionParent();\n      if (projectionParent) {\n        var relativeConstraints_1 = calcRelativeOffset(projectionParent.projection.targetFinal, constraints);\n        eachAxis(function (axis) {\n          var _a = relativeConstraints_1[axis],\n            min = _a.min,\n            max = _a.max;\n          constraints[axis] = {\n            min: isNaN(min) ? undefined : min,\n            max: isNaN(max) ? undefined : max\n          };\n        });\n      }\n    }\n    var momentumAnimations = eachAxis(function (axis) {\n      var _a;\n      if (!shouldDrag(axis, drag, _this.currentDirection)) {\n        return;\n      }\n      var transition = (_a = constraints === null || constraints === void 0 ? void 0 : constraints[axis]) !== null && _a !== void 0 ? _a : {};\n      /**\n       * Overdamp the boundary spring if `dragElastic` is disabled. There's still a frame\n       * of spring animations so we should look into adding a disable spring option to `inertia`.\n       * We could do something here where we affect the `bounceStiffness` and `bounceDamping`\n       * using the value of `dragElastic`.\n       */\n      var bounceStiffness = dragElastic ? 200 : 1000000;\n      var bounceDamping = dragElastic ? 40 : 10000000;\n      var inertia = tslib.__assign(tslib.__assign({\n        type: \"inertia\",\n        velocity: dragMomentum ? velocity[axis] : 0,\n        bounceStiffness: bounceStiffness,\n        bounceDamping: bounceDamping,\n        timeConstant: 750,\n        restDelta: 1,\n        restSpeed: 10\n      }, dragTransition), transition);\n      // If we're not animating on an externally-provided `MotionValue` we can use the\n      // component's animation controls which will handle interactions with whileHover (etc),\n      // otherwise we just have to animate the `MotionValue` itself.\n      return _this.getAxisMotionValue(axis) ? _this.startAxisValueAnimation(axis, inertia) : _this.visualElement.startLayoutAnimation(axis, inertia, isRelative);\n    });\n    // Run all animations and then resolve the new drag constraints.\n    return Promise.all(momentumAnimations).then(function () {\n      var _a, _b;\n      (_b = (_a = _this.props).onDragTransitionEnd) === null || _b === void 0 ? void 0 : _b.call(_a);\n    });\n  };\n  VisualElementDragControls.prototype.stopMotion = function () {\n    var _this = this;\n    eachAxis(function (axis) {\n      var axisValue = _this.getAxisMotionValue(axis);\n      axisValue ? axisValue.stop() : _this.visualElement.stopLayoutAnimation();\n    });\n  };\n  VisualElementDragControls.prototype.startAxisValueAnimation = function (axis, transition) {\n    var axisValue = this.getAxisMotionValue(axis);\n    if (!axisValue) return;\n    var currentValue = axisValue.get();\n    axisValue.set(currentValue);\n    axisValue.set(currentValue); // Set twice to hard-reset velocity\n    return startAnimation(axis, axisValue, 0, transition);\n  };\n  VisualElementDragControls.prototype.scalePoint = function () {\n    var _this = this;\n    var _a = this.props,\n      drag = _a.drag,\n      dragConstraints = _a.dragConstraints;\n    if (!isRefObject(dragConstraints) || !this.constraintsBox) return;\n    // Stop any current animations as there can be some visual glitching if we resize mid animation\n    this.stopMotion();\n    // Record the relative progress of the targetBox relative to the constraintsBox\n    var boxProgress = {\n      x: 0,\n      y: 0\n    };\n    eachAxis(function (axis) {\n      boxProgress[axis] = calcOrigin(_this.visualElement.projection.target[axis], _this.constraintsBox[axis]);\n    });\n    /**\n     * For each axis, calculate the current progress of the layout axis within the constraints.\n     * Then, using the latest layout and constraints measurements, reposition the new layout axis\n     * proportionally within the constraints.\n     */\n    this.updateConstraints(function () {\n      eachAxis(function (axis) {\n        if (!shouldDrag(axis, drag, null)) return;\n        // Calculate the position of the targetBox relative to the constraintsBox using the\n        // previously calculated progress\n        var _a = calcPositionFromProgress(_this.visualElement.projection.target[axis], _this.constraintsBox[axis], boxProgress[axis]),\n          min = _a.min,\n          max = _a.max;\n        _this.visualElement.setProjectionTargetAxis(axis, min, max);\n      });\n    });\n    /**\n     * If any other draggable components are queuing the same tasks synchronously\n     * this will wait until they've all been scheduled before flushing.\n     */\n    setTimeout(flushLayout, 1);\n  };\n  VisualElementDragControls.prototype.updateConstraints = function (onReady) {\n    var _this = this;\n    this.cancelLayout = batchLayout(function (read, write) {\n      var ancestors = collectProjectingAncestors(_this.visualElement);\n      write(function () {\n        return ancestors.forEach(function (element) {\n          return element.resetTransform();\n        });\n      });\n      read(function () {\n        return updateLayoutMeasurement(_this.visualElement);\n      });\n      write(function () {\n        return ancestors.forEach(function (element) {\n          return element.restoreTransform();\n        });\n      });\n      read(function () {\n        _this.resolveDragConstraints();\n      });\n      if (onReady) write(onReady);\n    });\n  };\n  VisualElementDragControls.prototype.mount = function (visualElement) {\n    var _this = this;\n    var element = visualElement.getInstance();\n    /**\n     * Attach a pointerdown event listener on this DOM element to initiate drag tracking.\n     */\n    var stopPointerListener = addPointerEvent(element, \"pointerdown\", function (event) {\n      var _a = _this.props,\n        drag = _a.drag,\n        _b = _a.dragListener,\n        dragListener = _b === void 0 ? true : _b;\n      drag && dragListener && _this.start(event);\n    });\n    /**\n     * Attach a window resize listener to scale the draggable target within its defined\n     * constraints as the window resizes.\n     */\n    var stopResizeListener = addDomEvent(window, \"resize\", function () {\n      _this.scalePoint();\n    });\n    /**\n     * Ensure drag constraints are resolved correctly relative to the dragging element\n     * whenever its layout changes.\n     */\n    var stopLayoutUpdateListener = visualElement.onLayoutUpdate(function () {\n      if (_this.isDragging) {\n        _this.resolveDragConstraints();\n      }\n    });\n    /**\n     * If the previous component with this same layoutId was dragging at the time\n     * it was unmounted, we want to continue the same gesture on this component.\n     */\n    var prevDragCursor = visualElement.prevDragCursor;\n    if (prevDragCursor) {\n      this.start(lastPointerEvent, {\n        cursorProgress: prevDragCursor\n      });\n    }\n    /**\n     * Return a function that will teardown the drag gesture\n     */\n    return function () {\n      stopPointerListener === null || stopPointerListener === void 0 ? void 0 : stopPointerListener();\n      stopResizeListener === null || stopResizeListener === void 0 ? void 0 : stopResizeListener();\n      stopLayoutUpdateListener === null || stopLayoutUpdateListener === void 0 ? void 0 : stopLayoutUpdateListener();\n      _this.cancelDrag();\n    };\n  };\n  return VisualElementDragControls;\n}();\nfunction shouldDrag(direction, drag, currentDirection) {\n  return (drag === true || drag === direction) && (currentDirection === null || currentDirection === direction);\n}\n/**\n * Based on an x/y offset determine the current drag direction. If both axis' offsets are lower\n * than the provided threshold, return `null`.\n *\n * @param offset - The x/y offset from origin.\n * @param lockThreshold - (Optional) - the minimum absolute offset before we can determine a drag direction.\n */\nfunction getCurrentDirection(offset, lockThreshold) {\n  if (lockThreshold === void 0) {\n    lockThreshold = 10;\n  }\n  var direction = null;\n  if (Math.abs(offset.y) > lockThreshold) {\n    direction = \"y\";\n  } else if (Math.abs(offset.x) > lockThreshold) {\n    direction = \"x\";\n  }\n  return direction;\n}\n\n/**\n * A hook that allows an element to be dragged.\n *\n * @internal\n */\nfunction useDrag(props) {\n  var groupDragControls = props.dragControls,\n    visualElement = props.visualElement;\n  var transformPagePoint = React.useContext(MotionConfigContext).transformPagePoint;\n  var dragControls = useConstant(function () {\n    return new VisualElementDragControls({\n      visualElement: visualElement\n    });\n  });\n  dragControls.setProps(tslib.__assign(tslib.__assign({}, props), {\n    transformPagePoint: transformPagePoint\n  }));\n  // If we've been provided a DragControls for manual control over the drag gesture,\n  // subscribe this component to it on mount.\n  React.useEffect(function () {\n    return groupDragControls && groupDragControls.subscribe(dragControls);\n  }, [dragControls]);\n  // Mount the drag controls with the visualElement\n  React.useEffect(function () {\n    return dragControls.mount(visualElement);\n  }, []);\n}\n\n/**\n *\n * @param handlers -\n * @param ref -\n *\n * @internalremarks\n * Currently this sets new pan gesture functions every render. The memo route has been explored\n * in the past but ultimately we're still creating new functions every render. An optimisation\n * to explore is creating the pan gestures and loading them into a `ref`.\n *\n * @internal\n */\nfunction usePanGesture(_a) {\n  var onPan = _a.onPan,\n    onPanStart = _a.onPanStart,\n    onPanEnd = _a.onPanEnd,\n    onPanSessionStart = _a.onPanSessionStart,\n    visualElement = _a.visualElement;\n  var hasPanEvents = onPan || onPanStart || onPanEnd || onPanSessionStart;\n  var panSession = React.useRef(null);\n  var transformPagePoint = React.useContext(MotionConfigContext).transformPagePoint;\n  var handlers = {\n    onSessionStart: onPanSessionStart,\n    onStart: onPanStart,\n    onMove: onPan,\n    onEnd: function onEnd(event, info) {\n      panSession.current = null;\n      onPanEnd && onPanEnd(event, info);\n    }\n  };\n  React.useEffect(function () {\n    if (panSession.current !== null) {\n      panSession.current.updateHandlers(handlers);\n    }\n  });\n  function onPointerDown(event) {\n    panSession.current = new PanSession(event, handlers, {\n      transformPagePoint: transformPagePoint\n    });\n  }\n  usePointerEvent(visualElement, \"pointerdown\", hasPanEvents && onPointerDown);\n  useUnmountEffect(function () {\n    return panSession.current && panSession.current.end();\n  });\n}\nvar drag = {\n  pan: makeRenderlessComponent(usePanGesture),\n  drag: makeRenderlessComponent(useDrag)\n};\n\n/**\n * @public\n */\nvar Presence;\n(function (Presence) {\n  Presence[Presence[\"Entering\"] = 0] = \"Entering\";\n  Presence[Presence[\"Present\"] = 1] = \"Present\";\n  Presence[Presence[\"Exiting\"] = 2] = \"Exiting\";\n})(Presence || (Presence = {}));\n/**\n * @public\n */\nexports.VisibilityAction = void 0;\n(function (VisibilityAction) {\n  VisibilityAction[VisibilityAction[\"Hide\"] = 0] = \"Hide\";\n  VisibilityAction[VisibilityAction[\"Show\"] = 1] = \"Show\";\n})(exports.VisibilityAction || (exports.VisibilityAction = {}));\nfunction isCSSVariable(value) {\n  return typeof value === \"string\" && value.startsWith(\"var(--\");\n}\n/**\n * Parse Framer's special CSS variable format into a CSS token and a fallback.\n *\n * ```\n * `var(--foo, #fff)` => [`--foo`, '#fff']\n * ```\n *\n * @param current\n */\nvar cssVariableRegex = /var\\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\\)/;\nfunction parseCSSVariable(current) {\n  var match = cssVariableRegex.exec(current);\n  if (!match) return [,];\n  var _a = tslib.__read(match, 3),\n    token = _a[1],\n    fallback = _a[2];\n  return [token, fallback];\n}\nvar maxDepth = 4;\nfunction getVariableValue(current, element, depth) {\n  if (depth === void 0) {\n    depth = 1;\n  }\n  heyListen.invariant(depth <= maxDepth, \"Max CSS variable fallback depth detected in property \\\"\" + current + \"\\\". This may indicate a circular fallback dependency.\");\n  var _a = tslib.__read(parseCSSVariable(current), 2),\n    token = _a[0],\n    fallback = _a[1];\n  // No CSS variable detected\n  if (!token) return;\n  // Attempt to read this CSS variable off the element\n  var resolved = window.getComputedStyle(element).getPropertyValue(token);\n  if (resolved) {\n    return resolved.trim();\n  } else if (isCSSVariable(fallback)) {\n    // The fallback might itself be a CSS variable, in which case we attempt to resolve it too.\n    return getVariableValue(fallback, element, depth + 1);\n  } else {\n    return fallback;\n  }\n}\n/**\n * Resolve CSS variables from\n *\n * @internal\n */\nfunction resolveCSSVariables(visualElement, _a, transitionEnd) {\n  var _b;\n  var target = tslib.__rest(_a, []);\n  var element = visualElement.getInstance();\n  if (!(element instanceof HTMLElement)) return {\n    target: target,\n    transitionEnd: transitionEnd\n  };\n  // If `transitionEnd` isn't `undefined`, clone it. We could clone `target` and `transitionEnd`\n  // only if they change but I think this reads clearer and this isn't a performance-critical path.\n  if (transitionEnd) {\n    transitionEnd = tslib.__assign({}, transitionEnd);\n  }\n  // Go through existing `MotionValue`s and ensure any existing CSS variables are resolved\n  visualElement.forEachValue(function (value) {\n    var current = value.get();\n    if (!isCSSVariable(current)) return;\n    var resolved = getVariableValue(current, element);\n    if (resolved) value.set(resolved);\n  });\n  // Cycle through every target property and resolve CSS variables. Currently\n  // we only read single-var properties like `var(--foo)`, not `calc(var(--foo) + 20px)`\n  for (var key in target) {\n    var current = target[key];\n    if (!isCSSVariable(current)) continue;\n    var resolved = getVariableValue(current, element);\n    if (!resolved) continue;\n    // Clone target if it hasn't already been\n    target[key] = resolved;\n    // If the user hasn't already set this key on `transitionEnd`, set it to the unresolved\n    // CSS variable. This will ensure that after the animation the component will reflect\n    // changes in the value of the CSS variable.\n    if (transitionEnd) (_b = transitionEnd[key]) !== null && _b !== void 0 ? _b : transitionEnd[key] = current;\n  }\n  return {\n    target: target,\n    transitionEnd: transitionEnd\n  };\n}\nfunction pixelsToPercent(pixels, axis) {\n  return pixels / (axis.max - axis.min) * 100;\n}\n/**\n * We always correct borderRadius as a percentage rather than pixels to reduce paints.\n * For example, if you are projecting a box that is 100px wide with a 10px borderRadius\n * into a box that is 200px wide with a 20px borderRadius, that is actually a 10%\n * borderRadius in both states. If we animate between the two in pixels that will trigger\n * a paint each time. If we animate between the two in percentage we'll avoid a paint.\n */\nfunction correctBorderRadius(latest, _layoutState, _a) {\n  var target = _a.target;\n  /**\n   * If latest is a string, if it's a percentage we can return immediately as it's\n   * going to be stretched appropriately. Otherwise, if it's a pixel, convert it to a number.\n   */\n  if (typeof latest === \"string\") {\n    if (styleValueTypes.px.test(latest)) {\n      latest = parseFloat(latest);\n    } else {\n      return latest;\n    }\n  }\n  /**\n   * If latest is a number, it's a pixel value. We use the current viewportBox to calculate that\n   * pixel value as a percentage of each axis\n   */\n  var x = pixelsToPercent(latest, target.x);\n  var y = pixelsToPercent(latest, target.y);\n  return x + \"% \" + y + \"%\";\n}\nvar varToken = \"_$css\";\nfunction correctBoxShadow(latest, _a) {\n  var delta = _a.delta,\n    treeScale = _a.treeScale;\n  var original = latest;\n  /**\n   * We need to first strip and store CSS variables from the string.\n   */\n  var containsCSSVariables = latest.includes(\"var(\");\n  var cssVariables = [];\n  if (containsCSSVariables) {\n    latest = latest.replace(cssVariableRegex, function (match) {\n      cssVariables.push(match);\n      return varToken;\n    });\n  }\n  var shadow = styleValueTypes.complex.parse(latest);\n  // TODO: Doesn't support multiple shadows\n  if (shadow.length > 5) return original;\n  var template = styleValueTypes.complex.createTransformer(latest);\n  var offset = typeof shadow[0] !== \"number\" ? 1 : 0;\n  // Calculate the overall context scale\n  var xScale = delta.x.scale * treeScale.x;\n  var yScale = delta.y.scale * treeScale.y;\n  shadow[0 + offset] /= xScale;\n  shadow[1 + offset] /= yScale;\n  /**\n   * Ideally we'd correct x and y scales individually, but because blur and\n   * spread apply to both we have to take a scale average and apply that instead.\n   * We could potentially improve the outcome of this by incorporating the ratio between\n   * the two scales.\n   */\n  var averageScale = popmotion.mix(xScale, yScale, 0.5);\n  // Blur\n  if (typeof shadow[2 + offset] === \"number\") shadow[2 + offset] /= averageScale;\n  // Spread\n  if (typeof shadow[3 + offset] === \"number\") shadow[3 + offset] /= averageScale;\n  var output = template(shadow);\n  if (containsCSSVariables) {\n    var i_1 = 0;\n    output = output.replace(varToken, function () {\n      var cssVariable = cssVariables[i_1];\n      i_1++;\n      return cssVariable;\n    });\n  }\n  return output;\n}\nvar borderCorrectionDefinition = {\n  process: correctBorderRadius\n};\nvar defaultScaleCorrectors = {\n  borderRadius: tslib.__assign(tslib.__assign({}, borderCorrectionDefinition), {\n    applyTo: [\"borderTopLeftRadius\", \"borderTopRightRadius\", \"borderBottomLeftRadius\", \"borderBottomRightRadius\"]\n  }),\n  borderTopLeftRadius: borderCorrectionDefinition,\n  borderTopRightRadius: borderCorrectionDefinition,\n  borderBottomLeftRadius: borderCorrectionDefinition,\n  borderBottomRightRadius: borderCorrectionDefinition,\n  boxShadow: {\n    process: correctBoxShadow\n  }\n};\nvar progressTarget = 1000;\nvar Animate = /** @class */function (_super) {\n  tslib.__extends(Animate, _super);\n  function Animate() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    /**\n     * A mutable object that tracks the target viewport box\n     * for the current animation frame.\n     */\n    _this.frameTarget = axisBox();\n    /**\n     * The current animation target, we use this to check whether to start\n     * a new animation or continue the existing one.\n     */\n    _this.currentAnimationTarget = axisBox();\n    /**\n     * Track whether we're animating this axis.\n     */\n    _this.isAnimating = {\n      x: false,\n      y: false\n    };\n    _this.stopAxisAnimation = {\n      x: undefined,\n      y: undefined\n    };\n    _this.isAnimatingTree = false;\n    _this.animate = function (target, origin, _a) {\n      if (_a === void 0) {\n        _a = {};\n      }\n      var originBox = _a.originBox,\n        targetBox = _a.targetBox,\n        visibilityAction = _a.visibilityAction,\n        shouldStackAnimate = _a.shouldStackAnimate,\n        onComplete = _a.onComplete,\n        prevParent = _a.prevParent,\n        config = tslib.__rest(_a, [\"originBox\", \"targetBox\", \"visibilityAction\", \"shouldStackAnimate\", \"onComplete\", \"prevParent\"]);\n      var _b = _this.props,\n        visualElement = _b.visualElement,\n        layout = _b.layout;\n      /**\n       * Early return if we've been instructed not to animate this render.\n       */\n      if (shouldStackAnimate === false) {\n        _this.isAnimatingTree = false;\n        return _this.safeToRemove();\n      }\n      /**\n       * Prioritise tree animations\n       */\n      if (_this.isAnimatingTree && shouldStackAnimate !== true) {\n        return;\n      } else if (shouldStackAnimate) {\n        _this.isAnimatingTree = true;\n      }\n      /**\n       * Allow the measured origin (prev bounding box) and target (actual layout) to be\n       * overridden by the provided config.\n       */\n      origin = originBox || origin;\n      target = targetBox || target;\n      /**\n       * If this element has a projecting parent, there's an opportunity to animate\n       * it relatively to that parent rather than relatively to the viewport. This\n       * allows us to add orchestrated animations.\n       */\n      var isRelative = false;\n      var projectionParent = visualElement.getProjectionParent();\n      if (projectionParent) {\n        var prevParentViewportBox = projectionParent.prevViewportBox;\n        var parentLayout = projectionParent.getLayoutState().layout;\n        /**\n         * If we're being provided a previous parent VisualElement by AnimateSharedLayout\n         */\n        if (prevParent) {\n          /**\n           * If we've been provided an explicit target box it means we're animating back\n           * to this previous parent. So we can make a relative box by comparing to the previous\n           * parent's layout\n           */\n          if (targetBox) {\n            parentLayout = prevParent.getLayoutState().layout;\n          }\n          /**\n           * Likewise if we've been provided an explicit origin box it means we're\n           * animating out from a different element. So we should figure out where that was\n           * on screen relative to the new parent element.\n           */\n          if (originBox && !checkIfParentHasChanged(prevParent, projectionParent) && prevParent.prevViewportBox) {\n            prevParentViewportBox = prevParent.prevViewportBox;\n          }\n        }\n        if (prevParentViewportBox && isProvidedCorrectDataForRelativeSharedLayout(prevParent, originBox, targetBox)) {\n          isRelative = true;\n          origin = calcRelativeOffset(prevParentViewportBox, origin);\n          target = calcRelativeOffset(parentLayout, target);\n        }\n      }\n      var boxHasMoved = hasMoved(origin, target);\n      var animations = eachAxis(function (axis) {\n        var _a, _b;\n        /**\n         * If layout is set to \"position\", we can resize the origin box based on the target\n         * box and only animate its position.\n         */\n        if (layout === \"position\") {\n          var targetLength = target[axis].max - target[axis].min;\n          origin[axis].max = origin[axis].min + targetLength;\n        }\n        if (visualElement.projection.isTargetLocked) {\n          return;\n        } else if (visibilityAction !== undefined) {\n          visualElement.setVisibility(visibilityAction === exports.VisibilityAction.Show);\n        } else if (boxHasMoved) {\n          // If the box has moved, animate between it's current visual state and its\n          // final state\n          return _this.animateAxis(axis, target[axis], origin[axis], tslib.__assign(tslib.__assign({}, config), {\n            isRelative: isRelative\n          }));\n        } else {\n          (_b = (_a = _this.stopAxisAnimation)[axis]) === null || _b === void 0 ? void 0 : _b.call(_a);\n          // If the box has remained in the same place, immediately set the axis target\n          // to the final desired state\n          return visualElement.setProjectionTargetAxis(axis, target[axis].min, target[axis].max, isRelative);\n        }\n      });\n      // Force a render to ensure there's no flash of uncorrected bounding box.\n      visualElement.syncRender();\n      /**\n       * If this visualElement isn't present (ie it's been removed from the tree by the user but\n       * kept in by the tree by AnimatePresence) then call safeToRemove when all axis animations\n       * have successfully finished.\n       */\n      return Promise.all(animations).then(function () {\n        _this.isAnimatingTree = false;\n        onComplete && onComplete();\n        visualElement.notifyLayoutAnimationComplete();\n      });\n    };\n    return _this;\n  }\n  Animate.prototype.componentDidMount = function () {\n    var _this = this;\n    var visualElement = this.props.visualElement;\n    visualElement.animateMotionValue = startAnimation;\n    visualElement.enableLayoutProjection();\n    this.unsubLayoutReady = visualElement.onLayoutUpdate(this.animate);\n    visualElement.layoutSafeToRemove = function () {\n      return _this.safeToRemove();\n    };\n    addScaleCorrection(defaultScaleCorrectors);\n  };\n  Animate.prototype.componentWillUnmount = function () {\n    var _this = this;\n    this.unsubLayoutReady();\n    eachAxis(function (axis) {\n      var _a, _b;\n      return (_b = (_a = _this.stopAxisAnimation)[axis]) === null || _b === void 0 ? void 0 : _b.call(_a);\n    });\n  };\n  /**\n   * TODO: This manually performs animations on the visualElement's layout progress\n   * values. It'd be preferable to amend the startLayoutAxisAnimation\n   * API to accept more custom animations like this.\n   */\n  Animate.prototype.animateAxis = function (axis, target, origin, _a) {\n    var _this = this;\n    var _b, _c;\n    var _d = _a === void 0 ? {} : _a,\n      transition = _d.transition,\n      isRelative = _d.isRelative;\n    /**\n     * If we're not animating to a new target, don't run this animation\n     */\n    if (this.isAnimating[axis] && axisIsEqual(target, this.currentAnimationTarget[axis])) {\n      return;\n    }\n    (_c = (_b = this.stopAxisAnimation)[axis]) === null || _c === void 0 ? void 0 : _c.call(_b);\n    this.isAnimating[axis] = true;\n    var visualElement = this.props.visualElement;\n    var frameTarget = this.frameTarget[axis];\n    var layoutProgress = visualElement.getProjectionAnimationProgress()[axis];\n    /**\n     * Set layout progress back to 0. We set it twice to hard-reset any velocity that might\n     * be re-incoporated into a subsequent spring animation.\n     */\n    layoutProgress.clearListeners();\n    layoutProgress.set(0);\n    layoutProgress.set(0);\n    /**\n     * Create an animation function to run once per frame. This will tween the visual bounding box from\n     * origin to target using the latest progress value.\n     */\n    var frame = function frame() {\n      // Convert the latest layoutProgress, which is a value from 0-1000, into a 0-1 progress\n      var p = layoutProgress.get() / progressTarget;\n      // Tween the axis and update the visualElement with the latest values\n      tweenAxis(frameTarget, origin, target, p);\n      visualElement.setProjectionTargetAxis(axis, frameTarget.min, frameTarget.max, isRelative);\n    };\n    // Synchronously run a frame to ensure there's no flash of the uncorrected bounding box.\n    frame();\n    // Create a function to stop animation on this specific axis\n    var unsubscribeProgress = layoutProgress.onChange(frame);\n    this.stopAxisAnimation[axis] = function () {\n      _this.isAnimating[axis] = false;\n      layoutProgress.stop();\n      unsubscribeProgress();\n    };\n    this.currentAnimationTarget[axis] = target;\n    var layoutTransition = transition || visualElement.getDefaultTransition() || defaultLayoutTransition;\n    // Start the animation on this axis\n    var animation = startAnimation(axis === \"x\" ? \"layoutX\" : \"layoutY\", layoutProgress, progressTarget, layoutTransition && getValueTransition(layoutTransition, \"layout\")).then(this.stopAxisAnimation[axis]);\n    return animation;\n  };\n  Animate.prototype.safeToRemove = function () {\n    var _a, _b;\n    (_b = (_a = this.props).safeToRemove) === null || _b === void 0 ? void 0 : _b.call(_a);\n  };\n  Animate.prototype.render = function () {\n    return null;\n  };\n  return Animate;\n}(React__namespace.Component);\nfunction AnimateLayoutContextProvider(props) {\n  var _a = tslib.__read(usePresence(), 2),\n    safeToRemove = _a[1];\n  return React__namespace.createElement(Animate, tslib.__assign({}, props, {\n    safeToRemove: safeToRemove\n  }));\n}\nfunction hasMoved(a, b) {\n  return !isZeroBox(a) && !isZeroBox(b) && (!axisIsEqual(a.x, b.x) || !axisIsEqual(a.y, b.y));\n}\nvar zeroAxis = {\n  min: 0,\n  max: 0\n};\nfunction isZeroBox(a) {\n  return axisIsEqual(a.x, zeroAxis) && axisIsEqual(a.y, zeroAxis);\n}\nfunction axisIsEqual(a, b) {\n  return a.min === b.min && a.max === b.max;\n}\nvar defaultLayoutTransition = {\n  duration: 0.45,\n  ease: [0.4, 0, 0.1, 1]\n};\nfunction isProvidedCorrectDataForRelativeSharedLayout(prevParent, originBox, targetBox) {\n  return prevParent || !prevParent && !(originBox || targetBox);\n}\n\n/**\n * Default handlers for batching VisualElements\n */\nvar defaultHandler = {\n  layoutReady: function layoutReady(child) {\n    return child.notifyLayoutReady();\n  }\n};\n/**\n * Create a batcher to process VisualElements\n */\nfunction createBatcher() {\n  var queue = new Set();\n  return {\n    add: function add(child) {\n      return queue.add(child);\n    },\n    flush: function flush(_a) {\n      var _b = _a === void 0 ? defaultHandler : _a,\n        layoutReady = _b.layoutReady,\n        parent = _b.parent;\n      batchLayout(function (read, write) {\n        var order = Array.from(queue).sort(compareByDepth);\n        var ancestors = parent ? collectProjectingAncestors(parent) : [];\n        write(function () {\n          var allElements = tslib.__spreadArray(tslib.__spreadArray([], tslib.__read(ancestors)), tslib.__read(order));\n          allElements.forEach(function (element) {\n            return element.resetTransform();\n          });\n        });\n        read(function () {\n          order.forEach(updateLayoutMeasurement);\n        });\n        write(function () {\n          ancestors.forEach(function (element) {\n            return element.restoreTransform();\n          });\n          order.forEach(layoutReady);\n        });\n        read(function () {\n          /**\n           * After all children have started animating, ensure any Entering components are set to Present.\n           * If we add deferred animations (set up all animations and then start them in two loops) this\n           * could be moved to the start loop. But it needs to happen after all the animations configs\n           * are generated in AnimateSharedLayout as this relies on presence data\n           */\n          order.forEach(function (child) {\n            if (child.isPresent) child.presence = Presence.Present;\n          });\n        });\n        write(function () {\n          /**\n           * Starting these animations will have queued jobs on the frame loop. In some situations,\n           * like when removing an element, these will be processed too late after the DOM is manipulated,\n           * leaving a flash of incorrectly-projected content. By manually flushing these jobs\n           * we ensure there's no flash.\n           */\n          sync.flushSync.preRender();\n          sync.flushSync.render();\n        });\n        read(function () {\n          /**\n           * Schedule a callback at the end of the following frame to assign the latest projection\n           * box to the prevViewportBox snapshot. Once global batching is in place this could be run\n           * synchronously. But for now it ensures that if any nested `AnimateSharedLayout` top-level\n           * child attempts to calculate its previous relative position against a prevViewportBox\n           * it will be against its latest projection box instead, as the snapshot is useless beyond this\n           * render.\n           */\n          sync__default['default'].postRender(function () {\n            return order.forEach(assignProjectionToSnapshot);\n          });\n          queue.clear();\n        });\n      });\n      // TODO: Need to find a layout-synchronous way of flushing this\n      flushLayout();\n    }\n  };\n}\nfunction assignProjectionToSnapshot(child) {\n  child.prevViewportBox = child.projection.target;\n}\nvar SharedLayoutContext = React.createContext(createBatcher());\n/**\n * @internal\n */\nvar FramerTreeLayoutContext = React.createContext(createBatcher());\nfunction isSharedLayout(context) {\n  return !!context.forceUpdate;\n}\n\n/**\n * This component is responsible for scheduling the measuring of the motion component\n */\nvar Measure = /** @class */function (_super) {\n  tslib.__extends(Measure, _super);\n  function Measure() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * If this is a child of a SyncContext, register the VisualElement with it on mount.\n   */\n  Measure.prototype.componentDidMount = function () {\n    var _a = this.props,\n      syncLayout = _a.syncLayout,\n      framerSyncLayout = _a.framerSyncLayout,\n      visualElement = _a.visualElement;\n    isSharedLayout(syncLayout) && syncLayout.register(visualElement);\n    isSharedLayout(framerSyncLayout) && framerSyncLayout.register(visualElement);\n    visualElement.onUnmount(function () {\n      if (isSharedLayout(syncLayout)) {\n        syncLayout.remove(visualElement);\n      }\n      if (isSharedLayout(framerSyncLayout)) {\n        framerSyncLayout.remove(visualElement);\n      }\n    });\n  };\n  /**\n   * If this is a child of a SyncContext, notify it that it needs to re-render. It will then\n   * handle the snapshotting.\n   *\n   * If it is stand-alone component, add it to the batcher.\n   */\n  Measure.prototype.getSnapshotBeforeUpdate = function () {\n    var _a = this.props,\n      syncLayout = _a.syncLayout,\n      visualElement = _a.visualElement;\n    if (isSharedLayout(syncLayout)) {\n      syncLayout.syncUpdate();\n    } else {\n      snapshotViewportBox(visualElement);\n      syncLayout.add(visualElement);\n    }\n    return null;\n  };\n  Measure.prototype.componentDidUpdate = function () {\n    var syncLayout = this.props.syncLayout;\n    if (!isSharedLayout(syncLayout)) syncLayout.flush();\n  };\n  Measure.prototype.render = function () {\n    return null;\n  };\n  return Measure;\n}(React__default['default'].Component);\nfunction MeasureContextProvider(props) {\n  var syncLayout = React.useContext(SharedLayoutContext);\n  var framerSyncLayout = React.useContext(FramerTreeLayoutContext);\n  return React__default['default'].createElement(Measure, tslib.__assign({}, props, {\n    syncLayout: syncLayout,\n    framerSyncLayout: framerSyncLayout\n  }));\n}\nvar layoutAnimations = {\n  measureLayout: MeasureContextProvider,\n  layoutAnimation: AnimateLayoutContextProvider\n};\nvar createProjectionState = function createProjectionState() {\n  return {\n    isEnabled: false,\n    isHydrated: false,\n    isTargetLocked: false,\n    target: axisBox(),\n    targetFinal: axisBox()\n  };\n};\nfunction createLayoutState() {\n  return {\n    isHydrated: false,\n    layout: axisBox(),\n    layoutCorrected: axisBox(),\n    treeScale: {\n      x: 1,\n      y: 1\n    },\n    delta: delta(),\n    deltaFinal: delta(),\n    deltaTransform: \"\"\n  };\n}\nvar zeroLayout = createLayoutState();\n\n/**\n * Build a transform style that takes a calculated delta between the element's current\n * space on screen and projects it into the desired space.\n */\nfunction buildLayoutProjectionTransform(_a, treeScale, latestTransform) {\n  var x = _a.x,\n    y = _a.y;\n  /**\n   * The translations we use to calculate are always relative to the viewport coordinate space.\n   * But when we apply scales, we also scale the coordinate space of an element and its children.\n   * For instance if we have a treeScale (the culmination of all parent scales) of 0.5 and we need\n   * to move an element 100 pixels, we actually need to move it 200 in within that scaled space.\n   */\n  var xTranslate = x.translate / treeScale.x;\n  var yTranslate = y.translate / treeScale.y;\n  var transform = \"translate3d(\" + xTranslate + \"px, \" + yTranslate + \"px, 0) \";\n  if (latestTransform) {\n    var rotate = latestTransform.rotate,\n      rotateX = latestTransform.rotateX,\n      rotateY = latestTransform.rotateY;\n    if (rotate) transform += \"rotate(\" + rotate + \") \";\n    if (rotateX) transform += \"rotateX(\" + rotateX + \") \";\n    if (rotateY) transform += \"rotateY(\" + rotateY + \") \";\n  }\n  transform += \"scale(\" + x.scale + \", \" + y.scale + \")\";\n  return !latestTransform && transform === identityProjection ? \"\" : transform;\n}\n/**\n * Take the calculated delta origin and apply it as a transform string.\n */\nfunction buildLayoutProjectionTransformOrigin(_a) {\n  var deltaFinal = _a.deltaFinal;\n  return deltaFinal.x.origin * 100 + \"% \" + deltaFinal.y.origin * 100 + \"% 0\";\n}\nvar identityProjection = buildLayoutProjectionTransform(zeroLayout.delta, zeroLayout.treeScale, {\n  x: 1,\n  y: 1\n});\nvar names = [\"LayoutMeasure\", \"BeforeLayoutMeasure\", \"LayoutUpdate\", \"ViewportBoxUpdate\", \"Update\", \"Render\", \"AnimationComplete\", \"LayoutAnimationComplete\", \"AnimationStart\", \"SetAxisTarget\", \"Unmount\"];\nfunction createLifecycles() {\n  var managers = names.map(function () {\n    return new SubscriptionManager();\n  });\n  var propSubscriptions = {};\n  var lifecycles = {\n    clearAllListeners: function clearAllListeners() {\n      return managers.forEach(function (manager) {\n        return manager.clear();\n      });\n    },\n    updatePropListeners: function updatePropListeners(props) {\n      return names.forEach(function (name) {\n        var _a;\n        (_a = propSubscriptions[name]) === null || _a === void 0 ? void 0 : _a.call(propSubscriptions);\n        var on = \"on\" + name;\n        var propListener = props[on];\n        if (propListener) {\n          propSubscriptions[name] = lifecycles[on](propListener);\n        }\n      });\n    }\n  };\n  managers.forEach(function (manager, i) {\n    lifecycles[\"on\" + names[i]] = function (handler) {\n      return manager.add(handler);\n    };\n    lifecycles[\"notify\" + names[i]] = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return manager.notify.apply(manager, tslib.__spreadArray([], tslib.__read(args)));\n    };\n  });\n  return lifecycles;\n}\nfunction updateMotionValuesFromProps(element, next, prev) {\n  var _a;\n  for (var key in next) {\n    var nextValue = next[key];\n    var prevValue = prev[key];\n    if (isMotionValue(nextValue)) {\n      /**\n       * If this is a motion value found in props or style, we want to add it\n       * to our visual element's motion value map.\n       */\n      element.addValue(key, nextValue);\n    } else if (isMotionValue(prevValue)) {\n      /**\n       * If we're swapping to a new motion value, create a new motion value\n       * from that\n       */\n      element.addValue(key, motionValue(nextValue));\n    } else if (prevValue !== nextValue) {\n      /**\n       * If this is a flat value that has changed, update the motion value\n       * or create one if it doesn't exist. We only want to do this if we're\n       * not handling the value with our animation state.\n       */\n      if (element.hasValue(key)) {\n        var existingValue = element.getValue(key);\n        // TODO: Only update values that aren't being animated or even looked at\n        !existingValue.hasAnimated && existingValue.set(nextValue);\n      } else {\n        element.addValue(key, motionValue((_a = element.getStaticValue(key)) !== null && _a !== void 0 ? _a : nextValue));\n      }\n    }\n  }\n  // Handle removed values\n  for (var key in prev) {\n    if (next[key] === undefined) element.removeValue(key);\n  }\n  return next;\n}\nfunction updateLayoutDeltas(_a, _b, treePath, transformOrigin) {\n  var delta = _a.delta,\n    layout = _a.layout,\n    layoutCorrected = _a.layoutCorrected,\n    treeScale = _a.treeScale;\n  var target = _b.target;\n  /**\n   * Reset the corrected box with the latest values from box, as we're then going\n   * to perform mutative operations on it.\n   */\n  resetBox(layoutCorrected, layout);\n  /**\n   * Apply all the parent deltas to this box to produce the corrected box. This\n   * is the layout box, as it will appear on screen as a result of the transforms of its parents.\n   */\n  applyTreeDeltas(layoutCorrected, treeScale, treePath);\n  /**\n   * Update the delta between the corrected box and the target box before user-set transforms were applied.\n   * This will allow us to calculate the corrected borderRadius and boxShadow to compensate\n   * for our layout reprojection, but still allow them to be scaled correctly by the user.\n   * It might be that to simplify this we may want to accept that user-set scale is also corrected\n   * and we wouldn't have to keep and calc both deltas, OR we could support a user setting\n   * to allow people to choose whether these styles are corrected based on just the\n   * layout reprojection or the final bounding box.\n   */\n  updateBoxDelta(delta, layoutCorrected, target, transformOrigin);\n}\nvar FlatTree = /** @class */function () {\n  function FlatTree() {\n    this.children = [];\n    this.isDirty = false;\n  }\n  FlatTree.prototype.add = function (child) {\n    addUniqueItem(this.children, child);\n    this.isDirty = true;\n  };\n  FlatTree.prototype.remove = function (child) {\n    removeItem(this.children, child);\n    this.isDirty = true;\n  };\n  FlatTree.prototype.forEach = function (callback) {\n    this.isDirty && this.children.sort(compareByDepth);\n    this.isDirty = false;\n    this.children.forEach(callback);\n  };\n  return FlatTree;\n}();\nfunction setCurrentViewportBox(visualElement) {\n  var projectionParent = visualElement.getProjectionParent();\n  if (!projectionParent) {\n    visualElement.rebaseProjectionTarget();\n    return;\n  }\n  var relativeOffset = calcRelativeOffset(projectionParent.getLayoutState().layout, visualElement.getLayoutState().layout);\n  eachAxis(function (axis) {\n    visualElement.setProjectionTargetAxis(axis, relativeOffset[axis].min, relativeOffset[axis].max, true);\n  });\n}\nvar visualElement = function visualElement(_a) {\n  var _b = _a.treeType,\n    treeType = _b === void 0 ? \"\" : _b,\n    build = _a.build,\n    _getBaseTarget = _a.getBaseTarget,\n    _makeTargetAnimatable = _a.makeTargetAnimatable,\n    _measureViewportBox = _a.measureViewportBox,\n    renderInstance = _a.render,\n    readValueFromInstance = _a.readValueFromInstance,\n    _resetTransform = _a.resetTransform,\n    _restoreTransform = _a.restoreTransform,\n    removeValueFromRenderState = _a.removeValueFromRenderState,\n    _sortNodePosition = _a.sortNodePosition,\n    scrapeMotionValuesFromProps = _a.scrapeMotionValuesFromProps;\n  return function (_a, options) {\n    var parent = _a.parent,\n      props = _a.props,\n      presenceId = _a.presenceId,\n      blockInitialAnimation = _a.blockInitialAnimation,\n      visualState = _a.visualState;\n    if (options === void 0) {\n      options = {};\n    }\n    var latestValues = visualState.latestValues,\n      renderState = visualState.renderState;\n    /**\n     * The instance of the render-specific node that will be hydrated by the\n     * exposed React ref. So for example, this visual element can host a\n     * HTMLElement, plain object, or Three.js object. The functions provided\n     * in VisualElementConfig allow us to interface with this instance.\n     */\n    var instance;\n    /**\n     * Manages the subscriptions for a visual element's lifecycle, for instance\n     * onRender and onViewportBoxUpdate.\n     */\n    var lifecycles = createLifecycles();\n    /**\n     *\n     */\n    var projection = createProjectionState();\n    /**\n     * A reference to the nearest projecting parent. This is either\n     * undefined if we haven't looked for the nearest projecting parent,\n     * false if there is no parent performing layout projection, or a reference\n     * to the projecting parent.\n     */\n    var projectionParent;\n    /**\n     * This is a reference to the visual state of the \"lead\" visual element.\n     * Usually, this will be this visual element. But if it shares a layoutId\n     * with other visual elements, only one of them will be designated lead by\n     * AnimateSharedLayout. All the other visual elements will take on the visual\n     * appearance of the lead while they crossfade to it.\n     */\n    var leadProjection = projection;\n    var leadLatestValues = latestValues;\n    var unsubscribeFromLeadVisualElement;\n    /**\n     * The latest layout measurements and calculated projections. This\n     * is seperate from the target projection data in visualState as\n     * many visual elements might point to the same piece of visualState as\n     * a target, whereas they might each have different layouts and thus\n     * projection calculations needed to project into the same viewport box.\n     */\n    var layoutState = createLayoutState();\n    /**\n     *\n     */\n    var crossfader;\n    /**\n     * Keep track of whether the viewport box has been updated since the\n     * last time the layout projection was re-calculated.\n     */\n    var hasViewportBoxUpdated = false;\n    /**\n     * A map of all motion values attached to this visual element. Motion\n     * values are source of truth for any given animated value. A motion\n     * value might be provided externally by the component via props.\n     */\n    var values = new Map();\n    /**\n     * A map of every subscription that binds the provided or generated\n     * motion values onChange listeners to this visual element.\n     */\n    var valueSubscriptions = new Map();\n    /**\n     * A reference to the previously-provided motion values as returned\n     * from scrapeMotionValuesFromProps. We use the keys in here to determine\n     * if any motion values need to be removed after props are updated.\n     */\n    var prevMotionValues = {};\n    /**\n     * x/y motion values that track the progress of initiated layout\n     * animations.\n     *\n     * TODO: Target for removal\n     */\n    var projectionTargetProgress;\n    /**\n     * When values are removed from all animation props we need to search\n     * for a fallback value to animate to. These values are tracked in baseTarget.\n     */\n    var baseTarget = tslib.__assign({}, latestValues);\n    // Internal methods ========================\n    /**\n     * On mount, this will be hydrated with a callback to disconnect\n     * this visual element from its parent on unmount.\n     */\n    var removeFromVariantTree;\n    /**\n     *\n     */\n    function render() {\n      if (!instance) return;\n      if (element.isProjectionReady()) {\n        /**\n         * Apply the latest user-set transforms to the targetBox to produce the targetBoxFinal.\n         * This is the final box that we will then project into by calculating a transform delta and\n         * applying it to the corrected box.\n         */\n        applyBoxTransforms(leadProjection.targetFinal, leadProjection.target, leadLatestValues);\n        /**\n         * Update the delta between the corrected box and the final target box, after\n         * user-set transforms are applied to it. This will be used by the renderer to\n         * create a transform style that will reproject the element from its actual layout\n         * into the desired bounding box.\n         */\n        updateBoxDelta(layoutState.deltaFinal, layoutState.layoutCorrected, leadProjection.targetFinal, latestValues);\n      }\n      triggerBuild();\n      renderInstance(instance, renderState);\n    }\n    function triggerBuild() {\n      var valuesToRender = latestValues;\n      if (crossfader && crossfader.isActive()) {\n        var crossfadedValues = crossfader.getCrossfadeState(element);\n        if (crossfadedValues) valuesToRender = crossfadedValues;\n      }\n      build(element, renderState, valuesToRender, leadProjection, layoutState, options, props);\n    }\n    function update() {\n      lifecycles.notifyUpdate(latestValues);\n    }\n    function updateLayoutProjection() {\n      if (!element.isProjectionReady()) return;\n      var delta = layoutState.delta,\n        treeScale = layoutState.treeScale;\n      var prevTreeScaleX = treeScale.x;\n      var prevTreeScaleY = treeScale.y;\n      var prevDeltaTransform = layoutState.deltaTransform;\n      updateLayoutDeltas(layoutState, leadProjection, element.path, latestValues);\n      hasViewportBoxUpdated && element.notifyViewportBoxUpdate(leadProjection.target, delta);\n      hasViewportBoxUpdated = false;\n      var deltaTransform = buildLayoutProjectionTransform(delta, treeScale);\n      if (deltaTransform !== prevDeltaTransform ||\n      // Also compare calculated treeScale, for values that rely on this only for scale correction\n      prevTreeScaleX !== treeScale.x || prevTreeScaleY !== treeScale.y) {\n        element.scheduleRender();\n      }\n      layoutState.deltaTransform = deltaTransform;\n    }\n    function _updateTreeLayoutProjection() {\n      element.layoutTree.forEach(fireUpdateLayoutProjection);\n    }\n    /**\n     *\n     */\n    function bindToMotionValue(key, value) {\n      var removeOnChange = value.onChange(function (latestValue) {\n        latestValues[key] = latestValue;\n        props.onUpdate && sync__default['default'].update(update, false, true);\n      });\n      var removeOnRenderRequest = value.onRenderRequest(element.scheduleRender);\n      valueSubscriptions.set(key, function () {\n        removeOnChange();\n        removeOnRenderRequest();\n      });\n    }\n    /**\n     * Any motion values that are provided to the element when created\n     * aren't yet bound to the element, as this would technically be impure.\n     * However, we iterate through the motion values and set them to the\n     * initial values for this component.\n     *\n     * TODO: This is impure and we should look at changing this to run on mount.\n     * Doing so will break some tests but this isn't neccessarily a breaking change,\n     * more a reflection of the test.\n     */\n    var initialMotionValues = scrapeMotionValuesFromProps(props);\n    for (var key in initialMotionValues) {\n      var value = initialMotionValues[key];\n      if (latestValues[key] !== undefined && isMotionValue(value)) {\n        value.set(latestValues[key], false);\n      }\n    }\n    /**\n     * Determine what role this visual element should take in the variant tree.\n     */\n    var isControllingVariants = checkIfControllingVariants(props);\n    var isVariantNode = checkIfVariantNode(props);\n    var element = tslib.__assign(tslib.__assign({\n      treeType: treeType,\n      /**\n       * This is a mirror of the internal instance prop, which keeps\n       * VisualElement type-compatible with React's RefObject.\n       */\n      current: null,\n      /**\n       * The depth of this visual element within the visual element tree.\n       */\n      depth: parent ? parent.depth + 1 : 0,\n      parent: parent,\n      children: new Set(),\n      /**\n       * An ancestor path back to the root visual element. This is used\n       * by layout projection to quickly recurse back up the tree.\n       */\n      path: parent ? tslib.__spreadArray(tslib.__spreadArray([], tslib.__read(parent.path)), [parent]) : [],\n      layoutTree: parent ? parent.layoutTree : new FlatTree(),\n      /**\n       *\n       */\n      presenceId: presenceId,\n      projection: projection,\n      /**\n       * If this component is part of the variant tree, it should track\n       * any children that are also part of the tree. This is essentially\n       * a shadow tree to simplify logic around how to stagger over children.\n       */\n      variantChildren: isVariantNode ? new Set() : undefined,\n      /**\n       * Whether this instance is visible. This can be changed imperatively\n       * by AnimateSharedLayout, is analogous to CSS's visibility in that\n       * hidden elements should take up layout, and needs enacting by the configured\n       * render function.\n       */\n      isVisible: undefined,\n      /**\n       * Normally, if a component is controlled by a parent's variants, it can\n       * rely on that ancestor to trigger animations further down the tree.\n       * However, if a component is created after its parent is mounted, the parent\n       * won't trigger that mount animation so the child needs to.\n       *\n       * TODO: This might be better replaced with a method isParentMounted\n       */\n      manuallyAnimateOnMount: Boolean(parent === null || parent === void 0 ? void 0 : parent.isMounted()),\n      /**\n       * This can be set by AnimatePresence to force components that mount\n       * at the same time as it to mount as if they have initial={false} set.\n       */\n      blockInitialAnimation: blockInitialAnimation,\n      /**\n       * Determine whether this component has mounted yet. This is mostly used\n       * by variant children to determine whether they need to trigger their\n       * own animations on mount.\n       */\n      isMounted: function isMounted() {\n        return Boolean(instance);\n      },\n      mount: function mount(newInstance) {\n        instance = element.current = newInstance;\n        element.pointTo(element);\n        if (isVariantNode && parent && !isControllingVariants) {\n          removeFromVariantTree = parent === null || parent === void 0 ? void 0 : parent.addVariantChild(element);\n        }\n        parent === null || parent === void 0 ? void 0 : parent.children.add(element);\n      },\n      /**\n       *\n       */\n      unmount: function unmount() {\n        sync.cancelSync.update(update);\n        sync.cancelSync.render(render);\n        sync.cancelSync.preRender(element.updateLayoutProjection);\n        valueSubscriptions.forEach(function (remove) {\n          return remove();\n        });\n        element.stopLayoutAnimation();\n        element.layoutTree.remove(element);\n        removeFromVariantTree === null || removeFromVariantTree === void 0 ? void 0 : removeFromVariantTree();\n        parent === null || parent === void 0 ? void 0 : parent.children.delete(element);\n        unsubscribeFromLeadVisualElement === null || unsubscribeFromLeadVisualElement === void 0 ? void 0 : unsubscribeFromLeadVisualElement();\n        lifecycles.clearAllListeners();\n      },\n      /**\n       * Add a child visual element to our set of children.\n       */\n      addVariantChild: function addVariantChild(child) {\n        var _a;\n        var closestVariantNode = element.getClosestVariantNode();\n        if (closestVariantNode) {\n          (_a = closestVariantNode.variantChildren) === null || _a === void 0 ? void 0 : _a.add(child);\n          return function () {\n            return closestVariantNode.variantChildren.delete(child);\n          };\n        }\n      },\n      sortNodePosition: function sortNodePosition(other) {\n        /**\n         * If these nodes aren't even of the same type we can't compare their depth.\n         */\n        if (!_sortNodePosition || treeType !== other.treeType) return 0;\n        return _sortNodePosition(element.getInstance(), other.getInstance());\n      },\n      /**\n       * Returns the closest variant node in the tree starting from\n       * this visual element.\n       */\n      getClosestVariantNode: function getClosestVariantNode() {\n        return isVariantNode ? element : parent === null || parent === void 0 ? void 0 : parent.getClosestVariantNode();\n      },\n      /**\n       * A method that schedules an update to layout projections throughout\n       * the tree. We inherit from the parent so there's only ever one\n       * job scheduled on the next frame - that of the root visual element.\n       */\n      scheduleUpdateLayoutProjection: parent ? parent.scheduleUpdateLayoutProjection : function () {\n        return sync__default['default'].preRender(element.updateTreeLayoutProjection, false, true);\n      },\n      /**\n       * Expose the latest layoutId prop.\n       */\n      getLayoutId: function getLayoutId() {\n        return props.layoutId;\n      },\n      /**\n       * Returns the current instance.\n       */\n      getInstance: function getInstance() {\n        return instance;\n      },\n      /**\n       * Get/set the latest static values.\n       */\n      getStaticValue: function getStaticValue(key) {\n        return latestValues[key];\n      },\n      setStaticValue: function setStaticValue(key, value) {\n        return latestValues[key] = value;\n      },\n      /**\n       * Returns the latest motion value state. Currently only used to take\n       * a snapshot of the visual element - perhaps this can return the whole\n       * visual state\n       */\n      getLatestValues: function getLatestValues() {\n        return latestValues;\n      },\n      /**\n       * Set the visiblity of the visual element. If it's changed, schedule\n       * a render to reflect these changes.\n       */\n      setVisibility: function setVisibility(visibility) {\n        if (element.isVisible === visibility) return;\n        element.isVisible = visibility;\n        element.scheduleRender();\n      },\n      /**\n       * Make a target animatable by Popmotion. For instance, if we're\n       * trying to animate width from 100px to 100vw we need to measure 100vw\n       * in pixels to determine what we really need to animate to. This is also\n       * pluggable to support Framer's custom value types like Color,\n       * and CSS variables.\n       */\n      makeTargetAnimatable: function makeTargetAnimatable(target, canMutate) {\n        if (canMutate === void 0) {\n          canMutate = true;\n        }\n        return _makeTargetAnimatable(element, target, props, canMutate);\n      },\n      // Motion values ========================\n      /**\n       * Add a motion value and bind it to this visual element.\n       */\n      addValue: function addValue(key, value) {\n        // Remove existing value if it exists\n        if (element.hasValue(key)) element.removeValue(key);\n        values.set(key, value);\n        latestValues[key] = value.get();\n        bindToMotionValue(key, value);\n      },\n      /**\n       * Remove a motion value and unbind any active subscriptions.\n       */\n      removeValue: function removeValue(key) {\n        var _a;\n        values.delete(key);\n        (_a = valueSubscriptions.get(key)) === null || _a === void 0 ? void 0 : _a();\n        valueSubscriptions.delete(key);\n        delete latestValues[key];\n        removeValueFromRenderState(key, renderState);\n      },\n      /**\n       * Check whether we have a motion value for this key\n       */\n      hasValue: function hasValue(key) {\n        return values.has(key);\n      },\n      /**\n       * Get a motion value for this key. If called with a default\n       * value, we'll create one if none exists.\n       */\n      getValue: function getValue(key, defaultValue) {\n        var value = values.get(key);\n        if (value === undefined && defaultValue !== undefined) {\n          value = motionValue(defaultValue);\n          element.addValue(key, value);\n        }\n        return value;\n      },\n      /**\n       * Iterate over our motion values.\n       */\n      forEachValue: function forEachValue(callback) {\n        return values.forEach(callback);\n      },\n      /**\n       * If we're trying to animate to a previously unencountered value,\n       * we need to check for it in our state and as a last resort read it\n       * directly from the instance (which might have performance implications).\n       */\n      readValue: function readValue(key) {\n        var _a;\n        return (_a = latestValues[key]) !== null && _a !== void 0 ? _a : readValueFromInstance(instance, key, options);\n      },\n      /**\n       * Set the base target to later animate back to. This is currently\n       * only hydrated on creation and when we first read a value.\n       */\n      setBaseTarget: function setBaseTarget(key, value) {\n        baseTarget[key] = value;\n      },\n      /**\n       * Find the base target for a value thats been removed from all animation\n       * props.\n       */\n      getBaseTarget: function getBaseTarget(key) {\n        if (_getBaseTarget) {\n          var target = _getBaseTarget(props, key);\n          if (target !== undefined && !isMotionValue(target)) return target;\n        }\n        return baseTarget[key];\n      }\n    }, lifecycles), {\n      /**\n       * Build the renderer state based on the latest visual state.\n       */\n      build: function build() {\n        triggerBuild();\n        return renderState;\n      },\n      /**\n       * Schedule a render on the next animation frame.\n       */\n      scheduleRender: function scheduleRender() {\n        sync__default['default'].render(render, false, true);\n      },\n      /**\n       * Synchronously fire render. It's prefered that we batch renders but\n       * in many circumstances, like layout measurement, we need to run this\n       * synchronously. However in those instances other measures should be taken\n       * to batch reads/writes.\n       */\n      syncRender: render,\n      /**\n       * Update the provided props. Ensure any newly-added motion values are\n       * added to our map, old ones removed, and listeners updated.\n       */\n      setProps: function setProps(newProps) {\n        props = newProps;\n        lifecycles.updatePropListeners(newProps);\n        prevMotionValues = updateMotionValuesFromProps(element, scrapeMotionValuesFromProps(props), prevMotionValues);\n      },\n      getProps: function getProps() {\n        return props;\n      },\n      // Variants ==============================\n      /**\n       * Returns the variant definition with a given name.\n       */\n      getVariant: function getVariant(name) {\n        var _a;\n        return (_a = props.variants) === null || _a === void 0 ? void 0 : _a[name];\n      },\n      /**\n       * Returns the defined default transition on this component.\n       */\n      getDefaultTransition: function getDefaultTransition() {\n        return props.transition;\n      },\n      /**\n       * Used by child variant nodes to get the closest ancestor variant props.\n       */\n      getVariantContext: function getVariantContext(startAtParent) {\n        if (startAtParent === void 0) {\n          startAtParent = false;\n        }\n        if (startAtParent) return parent === null || parent === void 0 ? void 0 : parent.getVariantContext();\n        if (!isControllingVariants) {\n          var context_1 = (parent === null || parent === void 0 ? void 0 : parent.getVariantContext()) || {};\n          if (props.initial !== undefined) {\n            context_1.initial = props.initial;\n          }\n          return context_1;\n        }\n        var context = {};\n        for (var i = 0; i < numVariantProps; i++) {\n          var name_1 = variantProps[i];\n          var prop = props[name_1];\n          if (isVariantLabel(prop) || prop === false) {\n            context[name_1] = prop;\n          }\n        }\n        return context;\n      },\n      // Layout projection ==============================\n      /**\n       * Enable layout projection for this visual element. Won't actually\n       * occur until we also have hydrated layout measurements.\n       */\n      enableLayoutProjection: function enableLayoutProjection() {\n        projection.isEnabled = true;\n        element.layoutTree.add(element);\n      },\n      /**\n       * Lock the projection target, for instance when dragging, so\n       * nothing else can try and animate it.\n       */\n      lockProjectionTarget: function lockProjectionTarget() {\n        projection.isTargetLocked = true;\n      },\n      unlockProjectionTarget: function unlockProjectionTarget() {\n        element.stopLayoutAnimation();\n        projection.isTargetLocked = false;\n      },\n      getLayoutState: function getLayoutState() {\n        return layoutState;\n      },\n      setCrossfader: function setCrossfader(newCrossfader) {\n        crossfader = newCrossfader;\n      },\n      isProjectionReady: function isProjectionReady() {\n        return projection.isEnabled && projection.isHydrated && layoutState.isHydrated;\n      },\n      /**\n       * Start a layout animation on a given axis.\n       */\n      startLayoutAnimation: function startLayoutAnimation(axis, transition, isRelative) {\n        if (isRelative === void 0) {\n          isRelative = false;\n        }\n        var progress = element.getProjectionAnimationProgress()[axis];\n        var _a = isRelative ? projection.relativeTarget[axis] : projection.target[axis],\n          min = _a.min,\n          max = _a.max;\n        var length = max - min;\n        progress.clearListeners();\n        progress.set(min);\n        progress.set(min); // Set twice to hard-reset velocity\n        progress.onChange(function (v) {\n          element.setProjectionTargetAxis(axis, v, v + length, isRelative);\n        });\n        return element.animateMotionValue(axis, progress, 0, transition);\n      },\n      /**\n       * Stop layout animations.\n       */\n      stopLayoutAnimation: function stopLayoutAnimation() {\n        eachAxis(function (axis) {\n          return element.getProjectionAnimationProgress()[axis].stop();\n        });\n      },\n      /**\n       * Measure the current viewport box with or without transforms.\n       * Only measures axis-aligned boxes, rotate and skew must be manually\n       * removed with a re-render to work.\n       */\n      measureViewportBox: function measureViewportBox(withTransform) {\n        if (withTransform === void 0) {\n          withTransform = true;\n        }\n        var viewportBox = _measureViewportBox(instance, options);\n        if (!withTransform) removeBoxTransforms(viewportBox, latestValues);\n        return viewportBox;\n      },\n      /**\n       * Get the motion values tracking the layout animations on each\n       * axis. Lazy init if not already created.\n       */\n      getProjectionAnimationProgress: function getProjectionAnimationProgress() {\n        projectionTargetProgress || (projectionTargetProgress = {\n          x: motionValue(0),\n          y: motionValue(0)\n        });\n        return projectionTargetProgress;\n      },\n      /**\n       * Update the projection of a single axis. Schedule an update to\n       * the tree layout projection.\n       */\n      setProjectionTargetAxis: function setProjectionTargetAxis(axis, min, max, isRelative) {\n        if (isRelative === void 0) {\n          isRelative = false;\n        }\n        var target;\n        if (isRelative) {\n          if (!projection.relativeTarget) {\n            projection.relativeTarget = axisBox();\n          }\n          target = projection.relativeTarget[axis];\n        } else {\n          projection.relativeTarget = undefined;\n          target = projection.target[axis];\n        }\n        projection.isHydrated = true;\n        target.min = min;\n        target.max = max;\n        // Flag that we want to fire the onViewportBoxUpdate event handler\n        hasViewportBoxUpdated = true;\n        lifecycles.notifySetAxisTarget();\n      },\n      /**\n       * Rebase the projection target on top of the provided viewport box\n       * or the measured layout. This ensures that non-animating elements\n       * don't fall out of sync differences in measurements vs projections\n       * after a page scroll or other relayout.\n       */\n      rebaseProjectionTarget: function rebaseProjectionTarget(force, box) {\n        if (box === void 0) {\n          box = layoutState.layout;\n        }\n        var _a = element.getProjectionAnimationProgress(),\n          x = _a.x,\n          y = _a.y;\n        var shouldRebase = !projection.relativeTarget && !projection.isTargetLocked && !x.isAnimating() && !y.isAnimating();\n        if (force || shouldRebase) {\n          eachAxis(function (axis) {\n            var _a = box[axis],\n              min = _a.min,\n              max = _a.max;\n            element.setProjectionTargetAxis(axis, min, max);\n          });\n        }\n      },\n      /**\n       * Notify the visual element that its layout is up-to-date.\n       * Currently Animate.tsx uses this to check whether a layout animation\n       * needs to be performed.\n       */\n      notifyLayoutReady: function notifyLayoutReady(config) {\n        setCurrentViewportBox(element);\n        element.notifyLayoutUpdate(layoutState.layout, element.prevViewportBox || layoutState.layout, config);\n      },\n      /**\n       * Temporarily reset the transform of the instance.\n       */\n      resetTransform: function resetTransform() {\n        return _resetTransform(element, instance, props);\n      },\n      restoreTransform: function restoreTransform() {\n        return _restoreTransform(instance, renderState);\n      },\n      updateLayoutProjection: updateLayoutProjection,\n      updateTreeLayoutProjection: function updateTreeLayoutProjection() {\n        element.layoutTree.forEach(fireResolveRelativeTargetBox);\n        /**\n         * Schedule the projection updates at the end of the current preRender\n         * step. This will ensure that all layout trees will first resolve\n         * relative projection boxes into viewport boxes, and *then*\n         * update projections.\n         */\n        sync__default['default'].preRender(_updateTreeLayoutProjection, false, true);\n        // sync.postRender(() => element.scheduleUpdateLayoutProjection())\n      },\n\n      getProjectionParent: function getProjectionParent() {\n        if (projectionParent === undefined) {\n          var foundParent = false;\n          // Search backwards through the tree path\n          for (var i = element.path.length - 1; i >= 0; i--) {\n            var ancestor = element.path[i];\n            if (ancestor.projection.isEnabled) {\n              foundParent = ancestor;\n              break;\n            }\n          }\n          projectionParent = foundParent;\n        }\n        return projectionParent;\n      },\n      resolveRelativeTargetBox: function resolveRelativeTargetBox() {\n        var relativeParent = element.getProjectionParent();\n        if (!projection.relativeTarget || !relativeParent) return;\n        calcRelativeBox(projection, relativeParent.projection);\n        if (isDraggable(relativeParent)) {\n          var target = projection.target;\n          applyBoxTransforms(target, target, relativeParent.getLatestValues());\n        }\n      },\n      shouldResetTransform: function shouldResetTransform() {\n        return Boolean(props._layoutResetTransform);\n      },\n      /**\n       *\n       */\n      pointTo: function pointTo(newLead) {\n        leadProjection = newLead.projection;\n        leadLatestValues = newLead.getLatestValues();\n        /**\n         * Subscribe to lead component's layout animations\n         */\n        unsubscribeFromLeadVisualElement === null || unsubscribeFromLeadVisualElement === void 0 ? void 0 : unsubscribeFromLeadVisualElement();\n        unsubscribeFromLeadVisualElement = popmotion.pipe(newLead.onSetAxisTarget(element.scheduleUpdateLayoutProjection), newLead.onLayoutAnimationComplete(function () {\n          var _a;\n          if (element.isPresent) {\n            element.presence = Presence.Present;\n          } else {\n            (_a = element.layoutSafeToRemove) === null || _a === void 0 ? void 0 : _a.call(element);\n          }\n        }));\n      },\n      // TODO: Clean this up\n      isPresent: true,\n      presence: Presence.Entering\n    });\n    return element;\n  };\n};\nfunction fireResolveRelativeTargetBox(child) {\n  child.resolveRelativeTargetBox();\n}\nfunction fireUpdateLayoutProjection(child) {\n  child.updateLayoutProjection();\n}\nvar variantProps = tslib.__spreadArray([\"initial\"], tslib.__read(variantPriorityOrder));\nvar numVariantProps = variantProps.length;\nvar positionalKeys = new Set([\"width\", \"height\", \"top\", \"left\", \"right\", \"bottom\", \"x\", \"y\"]);\nvar isPositionalKey = function isPositionalKey(key) {\n  return positionalKeys.has(key);\n};\nvar hasPositionalKey = function hasPositionalKey(target) {\n  return Object.keys(target).some(isPositionalKey);\n};\nvar setAndResetVelocity = function setAndResetVelocity(value, to) {\n  // Looks odd but setting it twice doesn't render, it'll just\n  // set both prev and current to the latest value\n  value.set(to, false);\n  value.set(to);\n};\nvar isNumOrPxType = function isNumOrPxType(v) {\n  return v === styleValueTypes.number || v === styleValueTypes.px;\n};\nvar BoundingBoxDimension;\n(function (BoundingBoxDimension) {\n  BoundingBoxDimension[\"width\"] = \"width\";\n  BoundingBoxDimension[\"height\"] = \"height\";\n  BoundingBoxDimension[\"left\"] = \"left\";\n  BoundingBoxDimension[\"right\"] = \"right\";\n  BoundingBoxDimension[\"top\"] = \"top\";\n  BoundingBoxDimension[\"bottom\"] = \"bottom\";\n})(BoundingBoxDimension || (BoundingBoxDimension = {}));\nvar getPosFromMatrix = function getPosFromMatrix(matrix, pos) {\n  return parseFloat(matrix.split(\", \")[pos]);\n};\nvar getTranslateFromMatrix = function getTranslateFromMatrix(pos2, pos3) {\n  return function (_bbox, _a) {\n    var transform = _a.transform;\n    if (transform === \"none\" || !transform) return 0;\n    var matrix3d = transform.match(/^matrix3d\\((.+)\\)$/);\n    if (matrix3d) {\n      return getPosFromMatrix(matrix3d[1], pos3);\n    } else {\n      var matrix = transform.match(/^matrix\\((.+)\\)$/);\n      if (matrix) {\n        return getPosFromMatrix(matrix[1], pos2);\n      } else {\n        return 0;\n      }\n    }\n  };\n};\nvar transformKeys = new Set([\"x\", \"y\", \"z\"]);\nvar nonTranslationalTransformKeys = transformProps.filter(function (key) {\n  return !transformKeys.has(key);\n});\nfunction removeNonTranslationalTransform(visualElement) {\n  var removedTransforms = [];\n  nonTranslationalTransformKeys.forEach(function (key) {\n    var value = visualElement.getValue(key);\n    if (value !== undefined) {\n      removedTransforms.push([key, value.get()]);\n      value.set(key.startsWith(\"scale\") ? 1 : 0);\n    }\n  });\n  // Apply changes to element before measurement\n  if (removedTransforms.length) visualElement.syncRender();\n  return removedTransforms;\n}\nvar positionalValues = {\n  // Dimensions\n  width: function width(_a) {\n    var x = _a.x;\n    return x.max - x.min;\n  },\n  height: function height(_a) {\n    var y = _a.y;\n    return y.max - y.min;\n  },\n  top: function top(_bbox, _a) {\n    var top = _a.top;\n    return parseFloat(top);\n  },\n  left: function left(_bbox, _a) {\n    var left = _a.left;\n    return parseFloat(left);\n  },\n  bottom: function bottom(_a, _b) {\n    var y = _a.y;\n    var top = _b.top;\n    return parseFloat(top) + (y.max - y.min);\n  },\n  right: function right(_a, _b) {\n    var x = _a.x;\n    var left = _b.left;\n    return parseFloat(left) + (x.max - x.min);\n  },\n  // Transform\n  x: getTranslateFromMatrix(4, 13),\n  y: getTranslateFromMatrix(5, 14)\n};\nvar convertChangedValueTypes = function convertChangedValueTypes(target, visualElement, changedKeys) {\n  var originBbox = visualElement.measureViewportBox();\n  var element = visualElement.getInstance();\n  var elementComputedStyle = getComputedStyle(element);\n  var display = elementComputedStyle.display,\n    top = elementComputedStyle.top,\n    left = elementComputedStyle.left,\n    bottom = elementComputedStyle.bottom,\n    right = elementComputedStyle.right,\n    transform = elementComputedStyle.transform;\n  var originComputedStyle = {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    transform: transform\n  };\n  // If the element is currently set to display: \"none\", make it visible before\n  // measuring the target bounding box\n  if (display === \"none\") {\n    visualElement.setStaticValue(\"display\", target.display || \"block\");\n  }\n  // Apply the latest values (as set in checkAndConvertChangedValueTypes)\n  visualElement.syncRender();\n  var targetBbox = visualElement.measureViewportBox();\n  changedKeys.forEach(function (key) {\n    // Restore styles to their **calculated computed style**, not their actual\n    // originally set style. This allows us to animate between equivalent pixel units.\n    var value = visualElement.getValue(key);\n    setAndResetVelocity(value, positionalValues[key](originBbox, originComputedStyle));\n    target[key] = positionalValues[key](targetBbox, elementComputedStyle);\n  });\n  return target;\n};\nvar checkAndConvertChangedValueTypes = function checkAndConvertChangedValueTypes(visualElement, target, origin, transitionEnd) {\n  if (origin === void 0) {\n    origin = {};\n  }\n  if (transitionEnd === void 0) {\n    transitionEnd = {};\n  }\n  target = tslib.__assign({}, target);\n  transitionEnd = tslib.__assign({}, transitionEnd);\n  var targetPositionalKeys = Object.keys(target).filter(isPositionalKey);\n  // We want to remove any transform values that could affect the element's bounding box before\n  // it's measured. We'll reapply these later.\n  var removedTransformValues = [];\n  var hasAttemptedToRemoveTransformValues = false;\n  var changedValueTypeKeys = [];\n  targetPositionalKeys.forEach(function (key) {\n    var value = visualElement.getValue(key);\n    if (!visualElement.hasValue(key)) return;\n    var from = origin[key];\n    var to = target[key];\n    var fromType = findDimensionValueType(from);\n    var toType;\n    // TODO: The current implementation of this basically throws an error\n    // if you try and do value conversion via keyframes. There's probably\n    // a way of doing this but the performance implications would need greater scrutiny,\n    // as it'd be doing multiple resize-remeasure operations.\n    if (isKeyframesTarget(to)) {\n      var numKeyframes = to.length;\n      for (var i = to[0] === null ? 1 : 0; i < numKeyframes; i++) {\n        if (!toType) {\n          toType = findDimensionValueType(to[i]);\n          heyListen.invariant(toType === fromType || isNumOrPxType(fromType) && isNumOrPxType(toType), \"Keyframes must be of the same dimension as the current value\");\n        } else {\n          heyListen.invariant(findDimensionValueType(to[i]) === toType, \"All keyframes must be of the same type\");\n        }\n      }\n    } else {\n      toType = findDimensionValueType(to);\n    }\n    if (fromType !== toType) {\n      // If they're both just number or px, convert them both to numbers rather than\n      // relying on resize/remeasure to convert (which is wasteful in this situation)\n      if (isNumOrPxType(fromType) && isNumOrPxType(toType)) {\n        var current = value.get();\n        if (typeof current === \"string\") {\n          value.set(parseFloat(current));\n        }\n        if (typeof to === \"string\") {\n          target[key] = parseFloat(to);\n        } else if (Array.isArray(to) && toType === styleValueTypes.px) {\n          target[key] = to.map(parseFloat);\n        }\n      } else if ((fromType === null || fromType === void 0 ? void 0 : fromType.transform) && (toType === null || toType === void 0 ? void 0 : toType.transform) && (from === 0 || to === 0)) {\n        // If one or the other value is 0, it's safe to coerce it to the\n        // type of the other without measurement\n        if (from === 0) {\n          value.set(toType.transform(from));\n        } else {\n          target[key] = fromType.transform(to);\n        }\n      } else {\n        // If we're going to do value conversion via DOM measurements, we first\n        // need to remove non-positional transform values that could affect the bbox measurements.\n        if (!hasAttemptedToRemoveTransformValues) {\n          removedTransformValues = removeNonTranslationalTransform(visualElement);\n          hasAttemptedToRemoveTransformValues = true;\n        }\n        changedValueTypeKeys.push(key);\n        transitionEnd[key] = transitionEnd[key] !== undefined ? transitionEnd[key] : target[key];\n        setAndResetVelocity(value, to);\n      }\n    }\n  });\n  if (changedValueTypeKeys.length) {\n    var convertedTarget = convertChangedValueTypes(target, visualElement, changedValueTypeKeys);\n    // If we removed transform values, reapply them before the next render\n    if (removedTransformValues.length) {\n      removedTransformValues.forEach(function (_a) {\n        var _b = tslib.__read(_a, 2),\n          key = _b[0],\n          value = _b[1];\n        visualElement.getValue(key).set(value);\n      });\n    }\n    // Reapply original values\n    visualElement.syncRender();\n    return {\n      target: convertedTarget,\n      transitionEnd: transitionEnd\n    };\n  } else {\n    return {\n      target: target,\n      transitionEnd: transitionEnd\n    };\n  }\n};\n/**\n * Convert value types for x/y/width/height/top/left/bottom/right\n *\n * Allows animation between `'auto'` -> `'100%'` or `0` -> `'calc(50% - 10vw)'`\n *\n * @internal\n */\nfunction unitConversion(visualElement, target, origin, transitionEnd) {\n  return hasPositionalKey(target) ? checkAndConvertChangedValueTypes(visualElement, target, origin, transitionEnd) : {\n    target: target,\n    transitionEnd: transitionEnd\n  };\n}\n\n/**\n * Parse a DOM variant to make it animatable. This involves resolving CSS variables\n * and ensuring animations like \"20%\" => \"calc(50vw)\" are performed in pixels.\n */\nvar parseDomVariant = function parseDomVariant(visualElement, target, origin, transitionEnd) {\n  var resolved = resolveCSSVariables(visualElement, target, transitionEnd);\n  target = resolved.target;\n  transitionEnd = resolved.transitionEnd;\n  return unitConversion(visualElement, target, origin, transitionEnd);\n};\nfunction getComputedStyle$1(element) {\n  return window.getComputedStyle(element);\n}\nvar htmlConfig = {\n  treeType: \"dom\",\n  readValueFromInstance: function readValueFromInstance(domElement, key) {\n    if (isTransformProp(key)) {\n      var defaultType = getDefaultValueType(key);\n      return defaultType ? defaultType.default || 0 : 0;\n    } else {\n      var computedStyle = getComputedStyle$1(domElement);\n      return (isCSSVariable$1(key) ? computedStyle.getPropertyValue(key) : computedStyle[key]) || 0;\n    }\n  },\n  sortNodePosition: function sortNodePosition(a, b) {\n    /**\n     * compareDocumentPosition returns a bitmask, by using the bitwise &\n     * we're returning true if 2 in that bitmask is set to true. 2 is set\n     * to true if b preceeds a.\n     */\n    return a.compareDocumentPosition(b) & 2 ? 1 : -1;\n  },\n  getBaseTarget: function getBaseTarget(props, key) {\n    var _a;\n    return (_a = props.style) === null || _a === void 0 ? void 0 : _a[key];\n  },\n  measureViewportBox: function measureViewportBox(element, _a) {\n    var transformPagePoint = _a.transformPagePoint;\n    return getBoundingBox(element, transformPagePoint);\n  },\n  /**\n   * Reset the transform on the current Element. This is called as part\n   * of a batched process across the entire layout tree. To remove this write\n   * cycle it'd be interesting to see if it's possible to \"undo\" all the current\n   * layout transforms up the tree in the same way this.getBoundingBoxWithoutTransforms\n   * works\n   */\n  resetTransform: function resetTransform(element, domElement, props) {\n    var transformTemplate = props.transformTemplate;\n    domElement.style.transform = transformTemplate ? transformTemplate({}, \"\") : \"none\";\n    // Ensure that whatever happens next, we restore our transform on the next frame\n    element.scheduleRender();\n  },\n  restoreTransform: function restoreTransform(instance, mutableState) {\n    instance.style.transform = mutableState.style.transform;\n  },\n  removeValueFromRenderState: function removeValueFromRenderState(key, _a) {\n    var vars = _a.vars,\n      style = _a.style;\n    delete vars[key];\n    delete style[key];\n  },\n  /**\n   * Ensure that HTML and Framer-specific value types like `px`->`%` and `Color`\n   * can be animated by Motion.\n   */\n  makeTargetAnimatable: function makeTargetAnimatable(element, _a, _b, isMounted) {\n    var transformValues = _b.transformValues;\n    if (isMounted === void 0) {\n      isMounted = true;\n    }\n    var transition = _a.transition,\n      transitionEnd = _a.transitionEnd,\n      target = tslib.__rest(_a, [\"transition\", \"transitionEnd\"]);\n    var origin = getOrigin(target, transition || {}, element);\n    /**\n     * If Framer has provided a function to convert `Color` etc value types, convert them\n     */\n    if (transformValues) {\n      if (transitionEnd) transitionEnd = transformValues(transitionEnd);\n      if (target) target = transformValues(target);\n      if (origin) origin = transformValues(origin);\n    }\n    if (isMounted) {\n      checkTargetForNewValues(element, target, origin);\n      var parsed = parseDomVariant(element, target, origin, transitionEnd);\n      transitionEnd = parsed.transitionEnd;\n      target = parsed.target;\n    }\n    return tslib.__assign({\n      transition: transition,\n      transitionEnd: transitionEnd\n    }, target);\n  },\n  scrapeMotionValuesFromProps: scrapeMotionValuesFromProps$1,\n  build: function build(element, renderState, latestValues, projection, layoutState, options, props) {\n    if (element.isVisible !== undefined) {\n      renderState.style.visibility = element.isVisible ? \"visible\" : \"hidden\";\n    }\n    var isProjectionTranform = projection.isEnabled && layoutState.isHydrated;\n    buildHTMLStyles(renderState, latestValues, projection, layoutState, options, props.transformTemplate, isProjectionTranform ? buildLayoutProjectionTransform : undefined, isProjectionTranform ? buildLayoutProjectionTransformOrigin : undefined);\n  },\n  render: renderHTML\n};\nvar htmlVisualElement = visualElement(htmlConfig);\nvar svgVisualElement = visualElement(tslib.__assign(tslib.__assign({}, htmlConfig), {\n  getBaseTarget: function getBaseTarget(props, key) {\n    return props[key];\n  },\n  readValueFromInstance: function readValueFromInstance(domElement, key) {\n    var _a;\n    if (isTransformProp(key)) {\n      return ((_a = getDefaultValueType(key)) === null || _a === void 0 ? void 0 : _a.default) || 0;\n    }\n    key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n    return domElement.getAttribute(key);\n  },\n  scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n  build: function build(_element, renderState, latestValues, projection, layoutState, options, props) {\n    var isProjectionTranform = projection.isEnabled && layoutState.isHydrated;\n    buildSVGAttrs(renderState, latestValues, projection, layoutState, options, props.transformTemplate, isProjectionTranform ? buildLayoutProjectionTransform : undefined, isProjectionTranform ? buildLayoutProjectionTransformOrigin : undefined);\n  },\n  render: renderSVG\n}));\nvar createDomVisualElement = function createDomVisualElement(Component, options) {\n  return isSVGComponent(Component) ? svgVisualElement(options, {\n    enableHardwareAcceleration: false\n  }) : htmlVisualElement(options, {\n    enableHardwareAcceleration: true\n  });\n};\nvar featureBundle = tslib.__assign(tslib.__assign(tslib.__assign(tslib.__assign({}, animations), gestureAnimations), drag), layoutAnimations);\n/**\n * HTML & SVG components, optimised for use with gestures and animation. These can be used as\n * drop-in replacements for any HTML & SVG component, all CSS & SVG properties are supported.\n *\n * @public\n */\nvar motion = /*@__PURE__*/createMotionProxy(function (Component, config) {\n  return createDomMotionConfig(Component, config, featureBundle, createDomVisualElement);\n});\n/**\n * Create a DOM `motion` component with the provided string. This is primarily intended\n * as a full alternative to `motion` for consumers who have to support environments that don't\n * support `Proxy`.\n *\n * ```javascript\n * import { createDomMotionComponent } from \"framer-motion\"\n *\n * const motion = {\n *   div: createDomMotionComponent('div')\n * }\n * ```\n *\n * @public\n */\nfunction createDomMotionComponent(key) {\n  return createMotionComponent(createDomMotionConfig(key, {\n    forwardMotionProps: false\n  }, featureBundle, createDomVisualElement));\n}\n\n/**\n * @public\n */\nvar m = createMotionProxy(createDomMotionConfig);\nfunction useForceUpdate() {\n  var unloadingRef = React.useRef(false);\n  var _a = tslib.__read(React.useState(0), 2),\n    forcedRenderCount = _a[0],\n    setForcedRenderCount = _a[1];\n  useUnmountEffect(function () {\n    return unloadingRef.current = true;\n  });\n  return React.useCallback(function () {\n    !unloadingRef.current && setForcedRenderCount(forcedRenderCount + 1);\n  }, [forcedRenderCount]);\n}\nvar presenceId = 0;\nfunction getPresenceId() {\n  var id = presenceId;\n  presenceId++;\n  return id;\n}\nvar PresenceChild = function PresenceChild(_a) {\n  var children = _a.children,\n    initial = _a.initial,\n    isPresent = _a.isPresent,\n    _onExitComplete = _a.onExitComplete,\n    custom = _a.custom,\n    presenceAffectsLayout = _a.presenceAffectsLayout;\n  var presenceChildren = useConstant(newChildrenMap);\n  var id = useConstant(getPresenceId);\n  var context = React.useMemo(function () {\n    return {\n      id: id,\n      initial: initial,\n      isPresent: isPresent,\n      custom: custom,\n      onExitComplete: function onExitComplete(childId) {\n        presenceChildren.set(childId, true);\n        var allComplete = true;\n        presenceChildren.forEach(function (isComplete) {\n          if (!isComplete) allComplete = false;\n        });\n        allComplete && (_onExitComplete === null || _onExitComplete === void 0 ? void 0 : _onExitComplete());\n      },\n      register: function register(childId) {\n        presenceChildren.set(childId, false);\n        return function () {\n          return presenceChildren.delete(childId);\n        };\n      }\n    };\n  },\n  /**\n   * If the presence of a child affects the layout of the components around it,\n   * we want to make a new context value to ensure they get re-rendered\n   * so they can detect that layout change.\n   */\n  presenceAffectsLayout ? undefined : [isPresent]);\n  React.useMemo(function () {\n    presenceChildren.forEach(function (_, key) {\n      return presenceChildren.set(key, false);\n    });\n  }, [isPresent]);\n  /**\n   * If there's no `motion` components to fire exit animations, we want to remove this\n   * component immediately.\n   */\n  React__namespace.useEffect(function () {\n    !isPresent && !presenceChildren.size && (_onExitComplete === null || _onExitComplete === void 0 ? void 0 : _onExitComplete());\n  }, [isPresent]);\n  return React__namespace.createElement(PresenceContext.Provider, {\n    value: context\n  }, children);\n};\nfunction newChildrenMap() {\n  return new Map();\n}\nfunction getChildKey(child) {\n  return child.key || \"\";\n}\nfunction updateChildLookup(children, allChildren) {\n  var seenChildren = process.env.NODE_ENV !== \"production\" ? new Set() : null;\n  children.forEach(function (child) {\n    var key = getChildKey(child);\n    if (process.env.NODE_ENV !== \"production\" && seenChildren) {\n      if (seenChildren.has(key)) {\n        console.warn(\"Children of AnimatePresence require unique keys. \\\"\" + key + \"\\\" is a duplicate.\");\n      }\n      seenChildren.add(key);\n    }\n    allChildren.set(key, child);\n  });\n}\nfunction onlyElements(children) {\n  var filtered = [];\n  // We use forEach here instead of map as map mutates the component key by preprending `.$`\n  React.Children.forEach(children, function (child) {\n    if (React.isValidElement(child)) filtered.push(child);\n  });\n  return filtered;\n}\n/**\n * `AnimatePresence` enables the animation of components that have been removed from the tree.\n *\n * When adding/removing more than a single child, every child **must** be given a unique `key` prop.\n *\n * @library\n *\n * Any `Frame` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { Frame, AnimatePresence } from 'framer'\n *\n * // As items are added and removed from `items`\n * export function Items({ items }) {\n *   return (\n *     <AnimatePresence>\n *       {items.map(item => (\n *         <Frame\n *           key={item.id}\n *           initial={{ opacity: 0 }}\n *           animate={{ opacity: 1 }}\n *           exit={{ opacity: 0 }}\n *         />\n *       ))}\n *     </AnimatePresence>\n *   )\n * }\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * @motion\n *\n * Any `motion` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { motion, AnimatePresence } from 'framer-motion'\n *\n * export const Items = ({ items }) => (\n *   <AnimatePresence>\n *     {items.map(item => (\n *       <motion.div\n *         key={item.id}\n *         initial={{ opacity: 0 }}\n *         animate={{ opacity: 1 }}\n *         exit={{ opacity: 0 }}\n *       />\n *     ))}\n *   </AnimatePresence>\n * )\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * If a child contains multiple `motion` components with `exit` props, it will only unmount the child\n * once all `motion` components have finished animating out. Likewise, any components using\n * `usePresence` all need to call `safeToRemove`.\n *\n * @public\n */\nvar AnimatePresence = function AnimatePresence(_a) {\n  var children = _a.children,\n    custom = _a.custom,\n    _b = _a.initial,\n    initial = _b === void 0 ? true : _b,\n    onExitComplete = _a.onExitComplete,\n    exitBeforeEnter = _a.exitBeforeEnter,\n    _c = _a.presenceAffectsLayout,\n    presenceAffectsLayout = _c === void 0 ? true : _c;\n  // We want to force a re-render once all exiting animations have finished. We\n  // either use a local forceRender function, or one from a parent context if it exists.\n  var forceRender = useForceUpdate();\n  var layoutContext = React.useContext(SharedLayoutContext);\n  if (isSharedLayout(layoutContext)) {\n    forceRender = layoutContext.forceUpdate;\n  }\n  var isInitialRender = React.useRef(true);\n  // Filter out any children that aren't ReactElements. We can only track ReactElements with a props.key\n  var filteredChildren = onlyElements(children);\n  // Keep a living record of the children we're actually rendering so we\n  // can diff to figure out which are entering and exiting\n  var presentChildren = React.useRef(filteredChildren);\n  // A lookup table to quickly reference components by key\n  var allChildren = React.useRef(new Map()).current;\n  // A living record of all currently exiting components.\n  var exiting = React.useRef(new Set()).current;\n  updateChildLookup(filteredChildren, allChildren);\n  // If this is the initial component render, just deal with logic surrounding whether\n  // we play onMount animations or not.\n  if (isInitialRender.current) {\n    isInitialRender.current = false;\n    return React__namespace.createElement(React__namespace.Fragment, null, filteredChildren.map(function (child) {\n      return React__namespace.createElement(PresenceChild, {\n        key: getChildKey(child),\n        isPresent: true,\n        initial: initial ? undefined : false,\n        presenceAffectsLayout: presenceAffectsLayout\n      }, child);\n    }));\n  }\n  // If this is a subsequent render, deal with entering and exiting children\n  var childrenToRender = tslib.__spreadArray([], tslib.__read(filteredChildren));\n  // Diff the keys of the currently-present and target children to update our\n  // exiting list.\n  var presentKeys = presentChildren.current.map(getChildKey);\n  var targetKeys = filteredChildren.map(getChildKey);\n  // Diff the present children with our target children and mark those that are exiting\n  var numPresent = presentKeys.length;\n  for (var i = 0; i < numPresent; i++) {\n    var key = presentKeys[i];\n    if (targetKeys.indexOf(key) === -1) {\n      exiting.add(key);\n    } else {\n      // In case this key has re-entered, remove from the exiting list\n      exiting.delete(key);\n    }\n  }\n  // If we currently have exiting children, and we're deferring rendering incoming children\n  // until after all current children have exiting, empty the childrenToRender array\n  if (exitBeforeEnter && exiting.size) {\n    childrenToRender = [];\n  }\n  // Loop through all currently exiting components and clone them to overwrite `animate`\n  // with any `exit` prop they might have defined.\n  exiting.forEach(function (key) {\n    // If this component is actually entering again, early return\n    if (targetKeys.indexOf(key) !== -1) return;\n    var child = allChildren.get(key);\n    if (!child) return;\n    var insertionIndex = presentKeys.indexOf(key);\n    var onExit = function onExit() {\n      allChildren.delete(key);\n      exiting.delete(key);\n      // Remove this child from the present children\n      var removeIndex = presentChildren.current.findIndex(function (presentChild) {\n        return presentChild.key === key;\n      });\n      presentChildren.current.splice(removeIndex, 1);\n      // Defer re-rendering until all exiting children have indeed left\n      if (!exiting.size) {\n        presentChildren.current = filteredChildren;\n        forceRender();\n        onExitComplete && onExitComplete();\n      }\n    };\n    childrenToRender.splice(insertionIndex, 0, React__namespace.createElement(PresenceChild, {\n      key: getChildKey(child),\n      isPresent: false,\n      onExitComplete: onExit,\n      custom: custom,\n      presenceAffectsLayout: presenceAffectsLayout\n    }, child));\n  });\n  // Add `MotionContext` even to children that don't need it to ensure we're rendering\n  // the same tree between renders\n  childrenToRender = childrenToRender.map(function (child) {\n    var key = child.key;\n    return exiting.has(key) ? child : React__namespace.createElement(PresenceChild, {\n      key: getChildKey(child),\n      isPresent: true,\n      presenceAffectsLayout: presenceAffectsLayout\n    }, child);\n  });\n  presentChildren.current = childrenToRender;\n  if (process.env.NODE_ENV !== \"production\" && exitBeforeEnter && childrenToRender.length > 1) {\n    console.warn(\"You're attempting to animate multiple children within AnimatePresence, but its exitBeforeEnter prop is set to true. This will lead to odd visual behaviour.\");\n  }\n  return React__namespace.createElement(React__namespace.Fragment, null, exiting.size ? childrenToRender : childrenToRender.map(function (child) {\n    return React.cloneElement(child);\n  }));\n};\n\n/**\n * Animate a single value or a `MotionValue`.\n *\n * The first argument is either a `MotionValue` to animate, or an initial animation value.\n *\n * The second is either a value to animate to, or an array of keyframes to animate through.\n *\n * The third argument can be either tween or spring options, and optional lifecycle methods: `onUpdate`, `onPlay`, `onComplete`, `onRepeat` and `onStop`.\n *\n * Returns `AnimationPlaybackControls`, currently just a `stop` method.\n *\n * ```javascript\n * const x = useMotionValue(0)\n *\n * useEffect(() => {\n *   const controls = animate(x, 100, {\n *     type: \"spring\",\n *     stiffness: 2000,\n *     onComplete: v => {}\n *   })\n *\n *   return controls.stop\n * })\n * ```\n *\n * @public\n */\nfunction animate(from, to, transition) {\n  if (transition === void 0) {\n    transition = {};\n  }\n  var value = isMotionValue(from) ? from : motionValue(from);\n  startAnimation(\"\", value, to, transition);\n  return {\n    stop: function stop() {\n      return value.stop();\n    }\n  };\n}\nfunction createCrossfader() {\n  /**\n   * The current state of the crossfade as a value between 0 and 1\n   */\n  var progress = motionValue(1);\n  var options = {\n    lead: undefined,\n    follow: undefined,\n    crossfadeOpacity: false,\n    preserveFollowOpacity: false\n  };\n  var prevOptions = tslib.__assign({}, options);\n  var leadState = {};\n  var followState = {};\n  /**\n   *\n   */\n  var _isActive = false;\n  /**\n   *\n   */\n  var finalCrossfadeFrame = null;\n  /**\n   * Framestamp of the last frame we updated values at.\n   */\n  var prevUpdate = 0;\n  function startCrossfadeAnimation(target, transition) {\n    var lead = options.lead,\n      follow = options.follow;\n    _isActive = true;\n    finalCrossfadeFrame = null;\n    var hasUpdated = false;\n    var onUpdate = function onUpdate() {\n      hasUpdated = true;\n      lead && lead.scheduleRender();\n      follow && follow.scheduleRender();\n    };\n    var _onComplete = function onComplete() {\n      _isActive = false;\n      /**\n       * If the crossfade animation is no longer active, flag a frame\n       * that we're still allowed to crossfade\n       */\n      finalCrossfadeFrame = sync.getFrameData().timestamp;\n    };\n    transition = transition && getValueTransition(transition, \"crossfade\");\n    return animate(progress, target, tslib.__assign(tslib.__assign({}, transition), {\n      onUpdate: onUpdate,\n      onComplete: function onComplete() {\n        if (!hasUpdated) {\n          progress.set(target);\n          /**\n           * If we never ran an update, for instance if this was an instant transition, fire a\n           * simulated final frame to ensure the crossfade gets applied correctly.\n           */\n          sync__default['default'].read(_onComplete);\n        } else {\n          _onComplete();\n        }\n        onUpdate();\n      }\n    }));\n  }\n  function updateCrossfade() {\n    var _a, _b;\n    /**\n     * We only want to compute the crossfade once per frame, so we\n     * compare the previous update framestamp with the current frame\n     * and early return if they're the same.\n     */\n    var timestamp = sync.getFrameData().timestamp;\n    var lead = options.lead,\n      follow = options.follow;\n    if (timestamp === prevUpdate || !lead) return;\n    prevUpdate = timestamp;\n    /**\n     * Merge each component's latest values into our crossfaded state\n     * before crossfading.\n     */\n    var latestLeadValues = lead.getLatestValues();\n    Object.assign(leadState, latestLeadValues);\n    var latestFollowValues = follow ? follow.getLatestValues() : options.prevValues;\n    Object.assign(followState, latestFollowValues);\n    var p = progress.get();\n    /**\n     * Crossfade the opacity between the two components. This will result\n     * in a different opacity for each component.\n     */\n    var leadTargetOpacity = (_a = latestLeadValues.opacity) !== null && _a !== void 0 ? _a : 1;\n    var followTargetOpacity = (_b = latestFollowValues === null || latestFollowValues === void 0 ? void 0 : latestFollowValues.opacity) !== null && _b !== void 0 ? _b : 1;\n    if (options.crossfadeOpacity && follow) {\n      leadState.opacity = popmotion.mix(\n      /**\n       * If the follow child has been completely hidden we animate\n       * this opacity from its previous opacity, but otherwise from completely transparent.\n       */\n      follow.isVisible !== false ? 0 : followTargetOpacity, leadTargetOpacity, easeCrossfadeIn(p));\n      followState.opacity = options.preserveFollowOpacity ? followTargetOpacity : popmotion.mix(followTargetOpacity, 0, easeCrossfadeOut(p));\n    } else if (!follow) {\n      leadState.opacity = popmotion.mix(followTargetOpacity, leadTargetOpacity, p);\n    }\n    mixValues(leadState, followState, latestLeadValues, latestFollowValues || {}, Boolean(follow), p);\n  }\n  return {\n    isActive: function isActive() {\n      return leadState && (_isActive || sync.getFrameData().timestamp === finalCrossfadeFrame);\n    },\n    fromLead: function fromLead(transition) {\n      return startCrossfadeAnimation(0, transition);\n    },\n    toLead: function toLead(transition) {\n      var initialProgress = 0;\n      if (!options.prevValues && !options.follow) {\n        /**\n         * If we're not coming from anywhere, start at the end of the animation.\n         */\n        initialProgress = 1;\n      } else if (prevOptions.lead === options.follow && prevOptions.follow === options.lead) {\n        /**\n         * If we're swapping follow/lead we can reverse the progress\n         */\n        initialProgress = 1 - progress.get();\n      }\n      progress.set(initialProgress);\n      return startCrossfadeAnimation(1, transition);\n    },\n    reset: function reset() {\n      return progress.set(1);\n    },\n    stop: function stop() {\n      return progress.stop();\n    },\n    getCrossfadeState: function getCrossfadeState(element) {\n      updateCrossfade();\n      if (element === options.lead) {\n        return leadState;\n      } else if (element === options.follow) {\n        return followState;\n      }\n    },\n    setOptions: function setOptions(newOptions) {\n      prevOptions = options;\n      options = newOptions;\n      leadState = {};\n      followState = {};\n    },\n    getLatestValues: function getLatestValues() {\n      return leadState;\n    }\n  };\n}\nvar easeCrossfadeIn = compress(0, 0.5, popmotion.circOut);\nvar easeCrossfadeOut = compress(0.5, 0.95, popmotion.linear);\nfunction compress(min, max, easing) {\n  return function (p) {\n    // Could replace ifs with clamp\n    if (p < min) return 0;\n    if (p > max) return 1;\n    return easing(popmotion.progress(min, max, p));\n  };\n}\nvar borders = [\"TopLeft\", \"TopRight\", \"BottomLeft\", \"BottomRight\"];\nvar numBorders = borders.length;\nfunction mixValues(leadState, followState, latestLeadValues, latestFollowValues, hasFollowElement, p) {\n  /**\n   * Mix border radius\n   */\n  for (var i = 0; i < numBorders; i++) {\n    var borderLabel = \"border\" + borders[i] + \"Radius\";\n    var followRadius = getRadius(latestFollowValues, borderLabel);\n    var leadRadius = getRadius(latestLeadValues, borderLabel);\n    if (followRadius === undefined && leadRadius === undefined) continue;\n    followRadius || (followRadius = 0);\n    leadRadius || (leadRadius = 0);\n    /**\n     * Currently we're only crossfading between numerical border radius.\n     * It would be possible to crossfade between percentages for a little\n     * extra bundle size.\n     */\n    if (typeof followRadius === \"number\" && typeof leadRadius === \"number\") {\n      var radius = Math.max(popmotion.mix(followRadius, leadRadius, p), 0);\n      leadState[borderLabel] = followState[borderLabel] = radius;\n    }\n  }\n  /**\n   * Mix rotation\n   */\n  if (latestFollowValues.rotate || latestLeadValues.rotate) {\n    var rotate = popmotion.mix(latestFollowValues.rotate || 0, latestLeadValues.rotate || 0, p);\n    leadState.rotate = followState.rotate = rotate;\n  }\n  /**\n   * We only want to mix the background color if there's a follow element\n   * that we're not crossfading opacity between. For instance with switch\n   * AnimateSharedLayout animations, this helps the illusion of a continuous\n   * element being animated but also cuts down on the number of paints triggered\n   * for elements where opacity is doing that work for us.\n   */\n  if (!hasFollowElement && latestLeadValues.backgroundColor && latestFollowValues.backgroundColor) {\n    /**\n     * This isn't ideal performance-wise as mixColor is creating a new function every frame.\n     * We could probably create a mixer that runs at the start of the animation but\n     * the idea behind the crossfader is that it runs dynamically between two potentially\n     * changing targets (ie opacity or borderRadius may be animating independently via variants)\n     */\n    leadState.backgroundColor = followState.backgroundColor = popmotion.mixColor(latestFollowValues.backgroundColor, latestLeadValues.backgroundColor)(p);\n  }\n}\nfunction getRadius(values, radiusName) {\n  var _a;\n  return (_a = values[radiusName]) !== null && _a !== void 0 ? _a : values.borderRadius;\n}\nfunction layoutStack() {\n  var stack = new Set();\n  var state = {\n    leadIsExiting: false\n  };\n  var prevState = tslib.__assign({}, state);\n  var prevValues;\n  var prevViewportBox;\n  var prevDragCursor;\n  var crossfader = createCrossfader();\n  var needsCrossfadeAnimation = false;\n  function getFollowViewportBox() {\n    return state.follow ? state.follow.prevViewportBox : prevViewportBox;\n  }\n  function getFollowLayout() {\n    var _a;\n    return (_a = state.follow) === null || _a === void 0 ? void 0 : _a.getLayoutState().layout;\n  }\n  return {\n    add: function add(element) {\n      element.setCrossfader(crossfader);\n      stack.add(element);\n      /**\n       * Hydrate new element with previous drag position if we have one\n       */\n      if (prevDragCursor) element.prevDragCursor = prevDragCursor;\n      if (!state.lead) state.lead = element;\n    },\n    remove: function remove(element) {\n      stack.delete(element);\n    },\n    getLead: function getLead() {\n      return state.lead;\n    },\n    updateSnapshot: function updateSnapshot() {\n      if (!state.lead) return;\n      prevValues = crossfader.isActive() ? crossfader.getLatestValues() : state.lead.getLatestValues();\n      prevViewportBox = state.lead.prevViewportBox;\n      var dragControls = elementDragControls.get(state.lead);\n      if (dragControls && dragControls.isDragging) {\n        prevDragCursor = dragControls.cursorProgress;\n      }\n    },\n    clearSnapshot: function clearSnapshot() {\n      prevDragCursor = prevViewportBox = undefined;\n    },\n    updateLeadAndFollow: function updateLeadAndFollow() {\n      var _a;\n      prevState = tslib.__assign({}, state);\n      var lead;\n      var follow;\n      var order = Array.from(stack);\n      for (var i = order.length; i--; i >= 0) {\n        var element = order[i];\n        if (lead) follow !== null && follow !== void 0 ? follow : follow = element;\n        lead !== null && lead !== void 0 ? lead : lead = element;\n        if (lead && follow) break;\n      }\n      state.lead = lead;\n      state.follow = follow;\n      state.leadIsExiting = ((_a = state.lead) === null || _a === void 0 ? void 0 : _a.presence) === Presence.Exiting;\n      crossfader.setOptions({\n        lead: lead,\n        follow: follow,\n        prevValues: prevValues,\n        crossfadeOpacity: (follow === null || follow === void 0 ? void 0 : follow.isPresenceRoot) || (lead === null || lead === void 0 ? void 0 : lead.isPresenceRoot)\n      });\n      if (\n      // Don't crossfade if we've just animated back from lead and switched the\n      // old follow to the new lead.\n      state.lead !== prevState.follow && (prevState.lead !== state.lead || prevState.leadIsExiting !== state.leadIsExiting)) {\n        needsCrossfadeAnimation = true;\n      }\n    },\n    animate: function animate(child, shouldCrossfade) {\n      var _a;\n      if (shouldCrossfade === void 0) {\n        shouldCrossfade = false;\n      }\n      if (child === state.lead) {\n        if (shouldCrossfade) {\n          /**\n           * Point a lead to itself in case it was previously pointing\n           * to a different visual element\n           */\n          child.pointTo(state.lead);\n        } else {\n          child.setVisibility(true);\n        }\n        var config = {};\n        var prevParent = (_a = state.follow) === null || _a === void 0 ? void 0 : _a.getProjectionParent();\n        if (prevParent) {\n          /**\n           * We'll use this to determine if the element or its layoutId has been reparented.\n           */\n          config.prevParent = prevParent;\n        }\n        if (child.presence === Presence.Entering) {\n          config.originBox = getFollowViewportBox();\n        } else if (child.presence === Presence.Exiting) {\n          config.targetBox = getFollowLayout();\n        }\n        if (needsCrossfadeAnimation) {\n          needsCrossfadeAnimation = false;\n          var transition = child.getDefaultTransition();\n          child.presence === Presence.Entering ? crossfader.toLead(transition) : crossfader.fromLead(transition);\n        }\n        child.notifyLayoutReady(config);\n      } else {\n        if (shouldCrossfade) {\n          state.lead && child.pointTo(state.lead);\n        } else {\n          child.setVisibility(false);\n        }\n      }\n    }\n  };\n}\nfunction resetRotate(child) {\n  // If there's no detected rotation values, we can early return without a forced render.\n  var hasRotate = false;\n  // Keep a record of all the values we've reset\n  var resetValues = {};\n  // Check the rotate value of all axes and reset to 0\n  for (var i = 0; i < transformAxes.length; i++) {\n    var axis = transformAxes[i];\n    var key = \"rotate\" + axis;\n    // If this rotation doesn't exist as a motion value, then we don't\n    // need to reset it\n    if (!child.hasValue(key) || child.getStaticValue(key) === 0) continue;\n    hasRotate = true;\n    // Record the rotation and then temporarily set it to 0\n    resetValues[key] = child.getStaticValue(key);\n    child.setStaticValue(key, 0);\n  }\n  // If there's no rotation values, we don't need to do any more.\n  if (!hasRotate) return;\n  // Force a render of this element to apply the transform with all rotations\n  // set to 0.\n  child.syncRender();\n  // Put back all the values we reset\n  for (var key in resetValues) {\n    child.setStaticValue(key, resetValues[key]);\n  }\n  // Schedule a render for the next frame. This ensures we won't visually\n  // see the element with the reset rotate value applied.\n  child.scheduleRender();\n}\n\n/**\n * @public\n */\nvar AnimateSharedLayout = /** @class */function (_super) {\n  tslib.__extends(AnimateSharedLayout, _super);\n  function AnimateSharedLayout() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    /**\n     * A list of all the children in the shared layout\n     */\n    _this.children = new Set();\n    /**\n     * As animate components with a defined `layoutId` are added/removed to the tree,\n     * we store them in order. When one is added, it will animate out from the\n     * previous one, and when it's removed, it'll animate to the previous one.\n     */\n    _this.stacks = new Map();\n    /**\n     * Track whether the component has mounted. If it hasn't, the presence of added children\n     * are set to Present, whereas if it has they're considered Entering\n     */\n    _this.hasMounted = false;\n    /**\n     * Track whether we already have an update scheduled. If we don't, we'll run snapshots\n     * and schedule one.\n     */\n    _this.updateScheduled = false;\n    /**\n     * Tracks whether we already have a render scheduled. If we don't, we'll force one with this.forceRender\n     */\n    _this.renderScheduled = false;\n    /**\n     * The methods provided to all children in the shared layout tree.\n     */\n    _this.syncContext = tslib.__assign(tslib.__assign({}, createBatcher()), {\n      syncUpdate: function syncUpdate(force) {\n        return _this.scheduleUpdate(force);\n      },\n      forceUpdate: function forceUpdate() {\n        // By copying syncContext to itself, when this component re-renders it'll also re-render\n        // all children subscribed to the SharedLayout context.\n        _this.syncContext = tslib.__assign({}, _this.syncContext);\n        _this.scheduleUpdate(true);\n      },\n      register: function register(child) {\n        return _this.addChild(child);\n      },\n      remove: function remove(child) {\n        return _this.removeChild(child);\n      }\n    });\n    return _this;\n  }\n  AnimateSharedLayout.prototype.componentDidMount = function () {\n    this.hasMounted = true;\n  };\n  AnimateSharedLayout.prototype.componentDidUpdate = function () {\n    this.startLayoutAnimation();\n  };\n  AnimateSharedLayout.prototype.shouldComponentUpdate = function () {\n    this.renderScheduled = true;\n    return true;\n  };\n  AnimateSharedLayout.prototype.startLayoutAnimation = function () {\n    var _this = this;\n    /**\n     * Reset update and render scheduled status\n     */\n    this.renderScheduled = this.updateScheduled = false;\n    var type = this.props.type;\n    /**\n     * Update presence metadata based on the latest AnimatePresence status.\n     * This is a kind of goofy way of dealing with this, perhaps there's a better model to find.\n     */\n    this.children.forEach(function (child) {\n      if (!child.isPresent) {\n        child.presence = Presence.Exiting;\n      } else if (child.presence !== Presence.Entering) {\n        child.presence = child.presence === Presence.Exiting ? Presence.Entering : Presence.Present;\n      }\n    });\n    this.updateStacks();\n    /**\n     * Create a handler which we can use to flush the children animations\n     */\n    var handler = {\n      layoutReady: function layoutReady(child) {\n        if (child.getLayoutId() !== undefined) {\n          var stack = _this.getStack(child);\n          stack.animate(child, type === \"crossfade\");\n        } else {\n          child.notifyLayoutReady();\n        }\n      },\n      parent: this.context.visualElement\n    };\n    /**\n     * Shared layout animations can be used without the AnimateSharedLayout wrapping component.\n     * This requires some co-ordination across components to stop layout thrashing\n     * and ensure measurements are taken at the correct time.\n     *\n     * Here we use that same mechanism of schedule/flush.\n     */\n    this.children.forEach(function (child) {\n      return _this.syncContext.add(child);\n    });\n    this.syncContext.flush(handler);\n    /**\n     * Clear snapshots so subsequent rerenders don't retain memory of outgoing components\n     */\n    this.stacks.forEach(function (stack) {\n      return stack.clearSnapshot();\n    });\n  };\n  AnimateSharedLayout.prototype.updateStacks = function () {\n    this.stacks.forEach(function (stack) {\n      return stack.updateLeadAndFollow();\n    });\n  };\n  AnimateSharedLayout.prototype.scheduleUpdate = function (force) {\n    if (force === void 0) {\n      force = false;\n    }\n    if (!(force || !this.updateScheduled)) return;\n    /**\n     * Flag we've scheduled an update\n     */\n    this.updateScheduled = true;\n    /**\n     * Write: Reset transforms so bounding boxes can be accurately measured.\n     */\n    this.children.forEach(function (child) {\n      resetRotate(child);\n      if (child.shouldResetTransform()) child.resetTransform();\n    });\n    /**\n     * Read: Snapshot children\n     */\n    this.children.forEach(snapshotViewportBox);\n    /**\n     * Every child keeps a local snapshot, but we also want to record\n     * snapshots of the visible children as, if they're are being removed\n     * in this render, we can still access them.\n     *\n     * TODO: What would be better here is doing a single loop where we\n     * only snapshotViewportBoxes of undefined layoutIds and then one for each stack\n     */\n    this.stacks.forEach(function (stack) {\n      return stack.updateSnapshot();\n    });\n    /**\n     * Force a rerender by setting state if we aren't already going to render.\n     */\n    if (force || !this.renderScheduled) {\n      this.renderScheduled = true;\n      this.forceUpdate();\n    }\n  };\n  AnimateSharedLayout.prototype.addChild = function (child) {\n    this.children.add(child);\n    this.addToStack(child);\n    child.presence = this.hasMounted ? Presence.Entering : Presence.Present;\n  };\n  AnimateSharedLayout.prototype.removeChild = function (child) {\n    this.scheduleUpdate();\n    this.children.delete(child);\n    this.removeFromStack(child);\n  };\n  AnimateSharedLayout.prototype.addToStack = function (child) {\n    var stack = this.getStack(child);\n    stack === null || stack === void 0 ? void 0 : stack.add(child);\n  };\n  AnimateSharedLayout.prototype.removeFromStack = function (child) {\n    var stack = this.getStack(child);\n    stack === null || stack === void 0 ? void 0 : stack.remove(child);\n  };\n  /**\n   * Return a stack of animate children based on the provided layoutId.\n   * Will create a stack if none currently exists with that layoutId.\n   */\n  AnimateSharedLayout.prototype.getStack = function (child) {\n    var id = child.getLayoutId();\n    if (id === undefined) return;\n    // Create stack if it doesn't already exist\n    !this.stacks.has(id) && this.stacks.set(id, layoutStack());\n    return this.stacks.get(id);\n  };\n  AnimateSharedLayout.prototype.render = function () {\n    return React__namespace.createElement(SharedLayoutContext.Provider, {\n      value: this.syncContext\n    }, this.props.children);\n  };\n  AnimateSharedLayout.contextType = MotionContext;\n  return AnimateSharedLayout;\n}(React__namespace.Component);\n\n/**\n * `MotionConfig` is used to set configuration options for all children `motion` components.\n *\n * ```jsx\n * import { motion, MotionConfig } from \"framer-motion\"\n *\n * export function App() {\n *   return (\n *     <MotionConfig transition={{ type: \"spring\" }}>\n *       <motion.div animate={{ x: 100 }} />\n *     </MotionConfig>\n *   )\n * }\n * ```\n *\n * @public\n */\nfunction MotionConfig(_a) {\n  var children = _a.children,\n    config = tslib.__rest(_a, [\"children\"]);\n  /**\n   * Inherit props from any parent MotionConfig components\n   */\n  config = tslib.__assign(tslib.__assign({}, React.useContext(MotionConfigContext)), config);\n  /**\n   * Don't allow isStatic to change between renders as it affects how many hooks\n   * motion components fire.\n   */\n  config.isStatic = useConstant(function () {\n    return config.isStatic;\n  });\n  /**\n   * Creating a new config context object will re-render every `motion` component\n   * every time it renders. So we only want to create a new one sparingly.\n   */\n  var transitionDependency = typeof config.transition === \"object\" ? config.transition.toString() : \"\";\n  var context = React.useMemo(function () {\n    return config;\n  }, [transitionDependency, config.transformPagePoint]);\n  return React__namespace.createElement(MotionConfigContext.Provider, {\n    value: context\n  }, children);\n}\n\n/**\n * Used in conjunction with the `m` component to reduce bundle size.\n *\n * `m` is a version of the `motion` component that only loads functionality\n * critical for the initial render.\n *\n * `LazyMotion` can then be used to either synchronously or asynchronously\n * load animation and gesture support.\n *\n * ```jsx\n * // Synchronous loading\n * import { LazyMotion, m, domAnimations } from \"framer-motion\"\n *\n * function App() {\n *   return (\n *     <LazyMotion features={domAnimations}>\n *       <m.div animate={{ scale: 2 }} />\n *     </LazyMotion>\n *   )\n * }\n *\n * // Asynchronous loading\n * import { LazyMotion, m } from \"framer-motion\"\n *\n * function App() {\n *   return (\n *     <LazyMotion features={() => import('./path/to/domAnimations')}>\n *       <m.div animate={{ scale: 2 }} />\n *     </LazyMotion>\n *   )\n * }\n * ```\n *\n * @public\n */\nfunction LazyMotion(_a) {\n  var children = _a.children,\n    features = _a.features,\n    _b = _a.strict,\n    strict = _b === void 0 ? false : _b;\n  var _c = tslib.__read(React.useState(!isLazyBundle(features)), 2),\n    setIsLoaded = _c[1];\n  var loadedRenderer = React.useRef(undefined);\n  /**\n   * If this is a synchronous load, load features immediately\n   */\n  if (!isLazyBundle(features)) {\n    var renderer = features.renderer,\n      loadedFeatures = tslib.__rest(features, [\"renderer\"]);\n    loadedRenderer.current = renderer;\n    loadFeatures(loadedFeatures);\n  }\n  React.useEffect(function () {\n    if (isLazyBundle(features)) {\n      features().then(function (_a) {\n        var renderer = _a.renderer,\n          loadedFeatures = tslib.__rest(_a, [\"renderer\"]);\n        loadFeatures(loadedFeatures);\n        loadedRenderer.current = renderer;\n        setIsLoaded(true);\n      });\n    }\n  }, []);\n  return React__namespace.createElement(LazyContext.Provider, {\n    value: {\n      renderer: loadedRenderer.current,\n      strict: strict\n    }\n  }, children);\n}\nfunction isLazyBundle(features) {\n  return typeof features === \"function\";\n}\n\n/**\n * @public\n */\nvar domAnimation = tslib.__assign(tslib.__assign({\n  renderer: createDomVisualElement\n}, animations), gestureAnimations);\n\n/**\n * @public\n */\nvar domMax = tslib.__assign(tslib.__assign(tslib.__assign({}, domAnimation), drag), layoutAnimations);\n\n/**\n * Creates a `MotionValue` to track the state and velocity of a value.\n *\n * Usually, these are created automatically. For advanced use-cases, like use with `useTransform`, you can create `MotionValue`s externally and pass them into the animated component via the `style` prop.\n *\n * @library\n *\n * ```jsx\n * export function MyComponent() {\n *   const scale = useMotionValue(1)\n *\n *   return <Frame scale={scale} />\n * }\n * ```\n *\n * @motion\n *\n * ```jsx\n * export const MyComponent = () => {\n *   const scale = useMotionValue(1)\n *\n *   return <motion.div style={{ scale }} />\n * }\n * ```\n *\n * @param initial - The initial state.\n *\n * @public\n */\nfunction useMotionValue(initial) {\n  var value = useConstant(function () {\n    return motionValue(initial);\n  });\n  /**\n   * If this motion value is being used in static mode, like on\n   * the Framer canvas, force components to rerender when the motion\n   * value is updated.\n   */\n  var isStatic = React.useContext(MotionConfigContext).isStatic;\n  if (isStatic) {\n    var _a = tslib.__read(React.useState(initial), 2),\n      setLatest_1 = _a[1];\n    React.useEffect(function () {\n      return value.onChange(setLatest_1);\n    }, []);\n  }\n  return value;\n}\nfunction useOnChange(value, callback) {\n  React.useEffect(function () {\n    if (isMotionValue(value)) return value.onChange(callback);\n  }, [callback]);\n}\nfunction useMultiOnChange(values, handler) {\n  React.useEffect(function () {\n    var subscriptions = values.map(function (value) {\n      return value.onChange(handler);\n    });\n    return function () {\n      return subscriptions.forEach(function (unsubscribe) {\n        return unsubscribe();\n      });\n    };\n  });\n}\nfunction useCombineMotionValues(values, combineValues) {\n  /**\n   * Initialise the returned motion value. This remains the same between renders.\n   */\n  var value = useMotionValue(combineValues());\n  /**\n   * Create a function that will update the template motion value with the latest values.\n   * This is pre-bound so whenever a motion value updates it can schedule its\n   * execution in Framesync. If it's already been scheduled it won't be fired twice\n   * in a single frame.\n   */\n  var updateValue = function updateValue() {\n    return value.set(combineValues());\n  };\n  /**\n   * Synchronously update the motion value with the latest values during the render.\n   * This ensures that within a React render, the styles applied to the DOM are up-to-date.\n   */\n  updateValue();\n  /**\n   * Subscribe to all motion values found within the template. Whenever any of them change,\n   * schedule an update.\n   */\n  useMultiOnChange(values, function () {\n    return sync__default['default'].update(updateValue, false, true);\n  });\n  return value;\n}\n\n/**\n * Combine multiple motion values into a new one using a string template literal.\n *\n * ```jsx\n * import {\n *   motion,\n *   useSpring,\n *   useMotionValue,\n *   useMotionTemplate\n * } from \"framer-motion\"\n *\n * function Component() {\n *   const shadowX = useSpring(0)\n *   const shadowY = useMotionValue(0)\n *   const shadow = useMotionTemplate`drop-shadow(${shadowX}px ${shadowY}px 20px rgba(0,0,0,0.3))`\n *\n *   return <motion.div style={{ filter: shadow }} />\n * }\n * ```\n *\n * @public\n */\nfunction useMotionTemplate(fragments) {\n  var values = [];\n  for (var _i = 1; _i < arguments.length; _i++) {\n    values[_i - 1] = arguments[_i];\n  }\n  /**\n   * Create a function that will build a string from the latest motion values.\n   */\n  var numFragments = fragments.length;\n  function buildValue() {\n    var output = \"\";\n    for (var i = 0; i < numFragments; i++) {\n      output += fragments[i];\n      var value = values[i];\n      if (value) output += values[i].get();\n    }\n    return output;\n  }\n  return useCombineMotionValues(values, buildValue);\n}\nvar isCustomValueType = function isCustomValueType(v) {\n  return typeof v === \"object\" && v.mix;\n};\nvar getMixer = function getMixer(v) {\n  return isCustomValueType(v) ? v.mix : undefined;\n};\nfunction transform() {\n  var args = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n  var useImmediate = !Array.isArray(args[0]);\n  var argOffset = useImmediate ? 0 : -1;\n  var inputValue = args[0 + argOffset];\n  var inputRange = args[1 + argOffset];\n  var outputRange = args[2 + argOffset];\n  var options = args[3 + argOffset];\n  var interpolator = popmotion.interpolate(inputRange, outputRange, tslib.__assign({\n    mixer: getMixer(outputRange[0])\n  }, options));\n  return useImmediate ? interpolator(inputValue) : interpolator;\n}\nfunction useTransform(input, inputRangeOrTransformer, outputRange, options) {\n  var transformer = typeof inputRangeOrTransformer === \"function\" ? inputRangeOrTransformer : transform(inputRangeOrTransformer, outputRange, options);\n  return Array.isArray(input) ? useListTransform(input, transformer) : useListTransform([input], function (_a) {\n    var _b = tslib.__read(_a, 1),\n      latest = _b[0];\n    return transformer(latest);\n  });\n}\nfunction useListTransform(values, transformer) {\n  var latest = useConstant(function () {\n    return [];\n  });\n  return useCombineMotionValues(values, function () {\n    latest.length = 0;\n    var numValues = values.length;\n    for (var i = 0; i < numValues; i++) {\n      latest[i] = values[i].get();\n    }\n    return transformer(latest);\n  });\n}\n\n/**\n * Creates a `MotionValue` that, when `set`, will use a spring animation to animate to its new state.\n *\n * It can either work as a stand-alone `MotionValue` by initialising it with a value, or as a subscriber\n * to another `MotionValue`.\n *\n * @remarks\n *\n * ```jsx\n * const x = useSpring(0, { stiffness: 300 })\n * const y = useSpring(x, { damping: 10 })\n * ```\n *\n * @param inputValue - `MotionValue` or number. If provided a `MotionValue`, when the input `MotionValue` changes, the created `MotionValue` will spring towards that value.\n * @param springConfig - Configuration options for the spring.\n * @returns `MotionValue`\n *\n * @public\n */\nfunction useSpring(source, config) {\n  if (config === void 0) {\n    config = {};\n  }\n  var isStatic = React.useContext(MotionConfigContext).isStatic;\n  var activeSpringAnimation = React.useRef(null);\n  var value = useMotionValue(isMotionValue(source) ? source.get() : source);\n  React.useMemo(function () {\n    return value.attach(function (v, set) {\n      /**\n       * A more hollistic approach to this might be to use isStatic to fix VisualElement animations\n       * at that level, but this will work for now\n       */\n      if (isStatic) return set(v);\n      if (activeSpringAnimation.current) {\n        activeSpringAnimation.current.stop();\n      }\n      activeSpringAnimation.current = popmotion.animate(tslib.__assign(tslib.__assign({\n        from: value.get(),\n        to: v,\n        velocity: value.getVelocity()\n      }, config), {\n        onUpdate: set\n      }));\n      return value.get();\n    });\n  }, Object.values(config));\n  useOnChange(source, function (v) {\n    return value.set(parseFloat(v));\n  });\n  return value;\n}\n\n/**\n * Creates a `MotionValue` that updates when the velocity of the provided `MotionValue` changes.\n *\n * ```javascript\n * const x = useMotionValue(0)\n * const xVelocity = useVelocity(x)\n * const xAcceleration = useVelocity(xVelocity)\n * ```\n *\n * @public\n */\nfunction useVelocity(value) {\n  var velocity = useMotionValue(value.getVelocity());\n  React.useEffect(function () {\n    return value.velocityUpdateSubscribers.add(function (newVelocity) {\n      velocity.set(newVelocity);\n    });\n  }, [value]);\n  return velocity;\n}\nfunction createScrollMotionValues() {\n  return {\n    scrollX: motionValue(0),\n    scrollY: motionValue(0),\n    scrollXProgress: motionValue(0),\n    scrollYProgress: motionValue(0)\n  };\n}\nfunction setProgress(offset, maxOffset, value) {\n  value.set(!offset || !maxOffset ? 0 : offset / maxOffset);\n}\nfunction createScrollUpdater(values, getOffsets) {\n  var update = function update() {\n    var _a = getOffsets(),\n      xOffset = _a.xOffset,\n      yOffset = _a.yOffset,\n      xMaxOffset = _a.xMaxOffset,\n      yMaxOffset = _a.yMaxOffset;\n    // Set absolute positions\n    values.scrollX.set(xOffset);\n    values.scrollY.set(yOffset);\n    // Set 0-1 progress\n    setProgress(xOffset, xMaxOffset, values.scrollXProgress);\n    setProgress(yOffset, yMaxOffset, values.scrollYProgress);\n  };\n  update();\n  return update;\n}\nvar getElementScrollOffsets = function getElementScrollOffsets(element) {\n  return function () {\n    return {\n      xOffset: element.scrollLeft,\n      yOffset: element.scrollTop,\n      xMaxOffset: element.scrollWidth - element.offsetWidth,\n      yMaxOffset: element.scrollHeight - element.offsetHeight\n    };\n  };\n};\n/**\n * Returns MotionValues that update when the provided element scrolls:\n *\n * - `scrollX`  Horizontal scroll distance in pixels.\n * - `scrollY`  Vertical scroll distance in pixels.\n * - `scrollXProgress`  Horizontal scroll progress between `0` and `1`.\n * - `scrollYProgress`  Vertical scroll progress between `0` and `1`.\n *\n * This element must be set to `overflow: scroll` on either or both axes to report scroll offset.\n *\n * @library\n *\n * ```jsx\n * import * as React from \"react\"\n * import {\n *   Frame,\n *   useElementScroll,\n *   useTransform\n * } from \"framer\"\n *\n * export function MyComponent() {\n *   const ref = React.useRef()\n *   const { scrollYProgress } = useElementScroll(ref)\n *\n *   return (\n *     <Frame ref={ref}>\n *       <Frame scaleX={scrollYProgress} />\n *     </Frame>\n *   )\n * }\n * ```\n *\n * @motion\n *\n * ```jsx\n * export const MyComponent = () => {\n *   const ref = useRef()\n *   const { scrollYProgress } = useElementScroll(ref)\n *\n *   return (\n *     <div ref={ref}>\n *       <motion.div style={{ scaleX: scrollYProgress }} />\n *     </div>\n *   )\n * }\n * ```\n *\n * @public\n */\nfunction useElementScroll(ref) {\n  var values = useConstant(createScrollMotionValues);\n  useIsomorphicLayoutEffect(function () {\n    var element = ref.current;\n    heyListen.invariant(!!element, \"ref provided to useScroll must be passed into a HTML element.\");\n    if (!element) return;\n    var updateScrollValues = createScrollUpdater(values, getElementScrollOffsets(element));\n    var scrollListener = addDomEvent(element, \"scroll\", updateScrollValues, {\n      passive: true\n    });\n    var resizeListener = addDomEvent(element, \"resize\", updateScrollValues);\n    return function () {\n      scrollListener && scrollListener();\n      resizeListener && resizeListener();\n    };\n  }, []);\n  return values;\n}\nvar viewportScrollValues;\nfunction getViewportScrollOffsets() {\n  return {\n    xOffset: window.pageXOffset,\n    yOffset: window.pageYOffset,\n    xMaxOffset: document.body.clientWidth - window.innerWidth,\n    yMaxOffset: document.body.clientHeight - window.innerHeight\n  };\n}\nvar hasListeners = false;\nfunction addEventListeners() {\n  hasListeners = true;\n  if (typeof window === \"undefined\") return;\n  var updateScrollValues = createScrollUpdater(viewportScrollValues, getViewportScrollOffsets);\n  addDomEvent(window, \"scroll\", updateScrollValues, {\n    passive: true\n  });\n  addDomEvent(window, \"resize\", updateScrollValues);\n}\n/**\n * Returns MotionValues that update when the viewport scrolls:\n *\n * - `scrollX`  Horizontal scroll distance in pixels.\n * - `scrollY`  Vertical scroll distance in pixels.\n * - `scrollXProgress`  Horizontal scroll progress between `0` and `1`.\n * - `scrollYProgress`  Vertical scroll progress between `0` and `1`.\n *\n * **Warning:** Setting `body` or `html` to `height: 100%` or similar will break the `Progress`\n * values as this breaks the browser's capability to accurately measure the page length.\n *\n * @library\n *\n * ```jsx\n * import * as React from \"react\"\n * import {\n *   Frame,\n *   useViewportScroll,\n *   useTransform\n * } from \"framer\"\n *\n * export function MyComponent() {\n *   const { scrollYProgress } = useViewportScroll()\n *   return <Frame scaleX={scrollYProgress} />\n * }\n * ```\n *\n * @motion\n *\n * ```jsx\n * export const MyComponent = () => {\n *   const { scrollYProgress } = useViewportScroll()\n *   return <motion.div style={{ scaleX: scrollYProgress }} />\n * }\n * ```\n *\n * @public\n */\nfunction useViewportScroll() {\n  /**\n   * Lazy-initialise the viewport scroll values\n   */\n  if (!viewportScrollValues) {\n    viewportScrollValues = createScrollMotionValues();\n  }\n  useIsomorphicLayoutEffect(function () {\n    !hasListeners && addEventListeners();\n  }, []);\n  return viewportScrollValues;\n}\n\n// Does this device prefer reduced motion? Returns `null` server-side.\nvar prefersReducedMotion;\nfunction initPrefersReducedMotion() {\n  prefersReducedMotion = motionValue(null);\n  if (typeof window === \"undefined\") return;\n  if (window.matchMedia) {\n    var motionMediaQuery_1 = window.matchMedia(\"(prefers-reduced-motion)\");\n    var setReducedMotionPreferences = function setReducedMotionPreferences() {\n      return prefersReducedMotion.set(motionMediaQuery_1.matches);\n    };\n    motionMediaQuery_1.addListener(setReducedMotionPreferences);\n    setReducedMotionPreferences();\n  } else {\n    prefersReducedMotion.set(false);\n  }\n}\n/**\n * A hook that returns `true` if we should be using reduced motion based on the current device's Reduced Motion setting.\n *\n * This can be used to implement changes to your UI based on Reduced Motion. For instance, replacing motion-sickness inducing\n * `x`/`y` animations with `opacity`, disabling the autoplay of background videos, or turning off parallax motion.\n *\n * It will actively respond to changes and re-render your components with the latest setting.\n *\n * ```jsx\n * export function Sidebar({ isOpen }) {\n *   const shouldReduceMotion = useReducedMotion()\n *   const closedX = shouldReduceMotion ? 0 : \"-100%\"\n *\n *   return (\n *     <motion.div animate={{\n *       opacity: isOpen ? 1 : 0,\n *       x: isOpen ? 0 : closedX\n *     }} />\n *   )\n * }\n * ```\n *\n * @return boolean\n *\n * @public\n */\nfunction useReducedMotion() {\n  /**\n   * Lazy initialisation of prefersReducedMotion\n   */\n  !prefersReducedMotion && initPrefersReducedMotion();\n  var _a = tslib.__read(React.useState(prefersReducedMotion.get()), 2),\n    shouldReduceMotion = _a[0],\n    setShouldReduceMotion = _a[1];\n  useOnChange(prefersReducedMotion, setShouldReduceMotion);\n  return shouldReduceMotion;\n}\n\n/**\n * @public\n */\nfunction animationControls() {\n  /**\n   * Track whether the host component has mounted.\n   */\n  var hasMounted = false;\n  /**\n   * Pending animations that are started before a component is mounted.\n   * TODO: Remove this as animations should only run in effects\n   */\n  var pendingAnimations = [];\n  /**\n   * A collection of linked component animation controls.\n   */\n  var subscribers = new Set();\n  var controls = {\n    subscribe: function subscribe(visualElement) {\n      subscribers.add(visualElement);\n      return function () {\n        return void subscribers.delete(visualElement);\n      };\n    },\n    start: function start(definition, transitionOverride) {\n      /**\n       * TODO: We only perform this hasMounted check because in Framer we used to\n       * encourage the ability to start an animation within the render phase. This\n       * isn't behaviour concurrent-safe so when we make Framer concurrent-safe\n       * we can ditch this.\n       */\n      if (hasMounted) {\n        var animations_1 = [];\n        subscribers.forEach(function (visualElement) {\n          animations_1.push(animateVisualElement(visualElement, definition, {\n            transitionOverride: transitionOverride\n          }));\n        });\n        return Promise.all(animations_1);\n      } else {\n        return new Promise(function (resolve) {\n          pendingAnimations.push({\n            animation: [definition, transitionOverride],\n            resolve: resolve\n          });\n        });\n      }\n    },\n    set: function set(definition) {\n      heyListen.invariant(hasMounted, \"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook.\");\n      return subscribers.forEach(function (visualElement) {\n        setValues(visualElement, definition);\n      });\n    },\n    stop: function stop() {\n      subscribers.forEach(function (visualElement) {\n        stopAnimation(visualElement);\n      });\n    },\n    mount: function mount() {\n      hasMounted = true;\n      pendingAnimations.forEach(function (_a) {\n        var animation = _a.animation,\n          resolve = _a.resolve;\n        controls.start.apply(controls, tslib.__spreadArray([], tslib.__read(animation))).then(resolve);\n      });\n      return function () {\n        hasMounted = false;\n        controls.stop();\n      };\n    }\n  };\n  return controls;\n}\n\n/**\n * Creates `AnimationControls`, which can be used to manually start, stop\n * and sequence animations on one or more components.\n *\n * The returned `AnimationControls` should be passed to the `animate` property\n * of the components you want to animate.\n *\n * These components can then be animated with the `start` method.\n *\n * @library\n *\n * ```jsx\n * import * as React from 'react'\n * import { Frame, useAnimation } from 'framer'\n *\n * export function MyComponent(props) {\n *    const controls = useAnimation()\n *\n *    controls.start({\n *        x: 100,\n *        transition: { duration: 0.5 },\n *    })\n *\n *    return <Frame animate={controls} />\n * }\n * ```\n *\n * @motion\n *\n * ```jsx\n * import * as React from 'react'\n * import { motion, useAnimation } from 'framer-motion'\n *\n * export function MyComponent(props) {\n *    const controls = useAnimation()\n *\n *    controls.start({\n *        x: 100,\n *        transition: { duration: 0.5 },\n *    })\n *\n *    return <motion.div animate={controls} />\n * }\n * ```\n *\n * @returns Animation controller with `start` and `stop` methods\n *\n * @public\n */\nfunction useAnimation() {\n  var controls = useConstant(animationControls);\n  React.useEffect(controls.mount, []);\n  return controls;\n}\n\n/**\n * Cycles through a series of visual properties. Can be used to toggle between or cycle through animations. It works similar to `useState` in React. It is provided an initial array of possible states, and returns an array of two arguments.\n *\n * @library\n *\n * ```jsx\n * import * as React from \"react\"\n * import { Frame, useCycle } from \"framer\"\n *\n * export function MyComponent() {\n *   const [x, cycleX] = useCycle(0, 50, 100)\n *\n *   return (\n *     <Frame\n *       animate={{ x: x }}\n *       onTap={() => cycleX()}\n *      />\n *    )\n * }\n * ```\n *\n * @motion\n *\n * An index value can be passed to the returned `cycle` function to cycle to a specific index.\n *\n * ```jsx\n * import * as React from \"react\"\n * import { motion, useCycle } from \"framer-motion\"\n *\n * export const MyComponent = () => {\n *   const [x, cycleX] = useCycle(0, 50, 100)\n *\n *   return (\n *     <motion.div\n *       animate={{ x: x }}\n *       onTap={() => cycleX()}\n *      />\n *    )\n * }\n * ```\n *\n * @param items - items to cycle through\n * @returns [currentState, cycleState]\n *\n * @public\n */\nfunction useCycle() {\n  var items = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    items[_i] = arguments[_i];\n  }\n  var index = React.useRef(0);\n  var _a = tslib.__read(React.useState(items[index.current]), 2),\n    item = _a[0],\n    setItem = _a[1];\n  return [item, function (next) {\n    index.current = typeof next !== \"number\" ? popmotion.wrap(0, items.length, index.current + 1) : next;\n    setItem(items[index.current]);\n  }];\n}\n\n/**\n * Can manually trigger a drag gesture on one or more `drag`-enabled `motion` components.\n *\n * @library\n *\n * ```jsx\n * const dragControls = useDragControls()\n *\n * function startDrag(event) {\n *   dragControls.start(event, { snapToCursor: true })\n * }\n *\n * return (\n *   <>\n *     <Frame onTapStart={startDrag} />\n *     <Frame drag=\"x\" dragControls={dragControls} />\n *   </>\n * )\n * ```\n *\n * @motion\n *\n * ```jsx\n * const dragControls = useDragControls()\n *\n * function startDrag(event) {\n *   dragControls.start(event, { snapToCursor: true })\n * }\n *\n * return (\n *   <>\n *     <div onPointerDown={startDrag} />\n *     <motion.div drag=\"x\" dragControls={dragControls} />\n *   </>\n * )\n * ```\n *\n * @public\n */\nvar DragControls = /** @class */function () {\n  function DragControls() {\n    this.componentControls = new Set();\n  }\n  /**\n   * Subscribe a component's internal `VisualElementDragControls` to the user-facing API.\n   *\n   * @internal\n   */\n  DragControls.prototype.subscribe = function (controls) {\n    var _this = this;\n    this.componentControls.add(controls);\n    return function () {\n      return _this.componentControls.delete(controls);\n    };\n  };\n  /**\n   * Start a drag gesture on every `motion` component that has this set of drag controls\n   * passed into it via the `dragControls` prop.\n   *\n   * ```jsx\n   * dragControls.start(e, {\n   *   snapToCursor: true\n   * })\n   * ```\n   *\n   * @param event - PointerEvent\n   * @param options - Options\n   *\n   * @public\n   */\n  DragControls.prototype.start = function (event, options) {\n    this.componentControls.forEach(function (controls) {\n      controls.start(event.nativeEvent || event, options);\n    });\n  };\n  DragControls.prototype.updateConstraints = function (flush) {\n    if (flush === void 0) {\n      flush = true;\n    }\n    this.componentControls.forEach(function (controls) {\n      controls.updateConstraints();\n    });\n    flush && flushLayout();\n  };\n  return DragControls;\n}();\nvar createDragControls = function createDragControls() {\n  return new DragControls();\n};\n/**\n * Usually, dragging is initiated by pressing down on a `motion` component with a `drag` prop\n * and moving it. For some use-cases, for instance clicking at an arbitrary point on a video scrubber, we\n * might want to initiate that dragging from a different component than the draggable one.\n *\n * By creating a `dragControls` using the `useDragControls` hook, we can pass this into\n * the draggable component's `dragControls` prop. It exposes a `start` method\n * that can start dragging from pointer events on other components.\n *\n * @library\n *\n * ```jsx\n * const dragControls = useDragControls()\n *\n * function startDrag(event) {\n *   dragControls.start(event, { snapToCursor: true })\n * }\n *\n * return (\n *   <>\n *     <Frame onTapStart={startDrag} />\n *     <Frame drag=\"x\" dragControls={dragControls} />\n *   </>\n * )\n * ```\n *\n * @motion\n *\n * ```jsx\n * const dragControls = useDragControls()\n *\n * function startDrag(event) {\n *   dragControls.start(event, { snapToCursor: true })\n * }\n *\n * return (\n *   <>\n *     <div onPointerDown={startDrag} />\n *     <motion.div drag=\"x\" dragControls={dragControls} />\n *   </>\n * )\n * ```\n *\n * @public\n */\nfunction useDragControls() {\n  return useConstant(createDragControls);\n}\nvar createObject = function createObject() {\n  return {};\n};\nvar stateVisualElement = visualElement({\n  build: function build() {},\n  measureViewportBox: axisBox,\n  resetTransform: function resetTransform() {},\n  restoreTransform: function restoreTransform() {},\n  removeValueFromRenderState: function removeValueFromRenderState() {},\n  render: function render() {},\n  scrapeMotionValuesFromProps: createObject,\n  readValueFromInstance: function readValueFromInstance(_state, key, options) {\n    return options.initialState[key] || 0;\n  },\n  makeTargetAnimatable: function makeTargetAnimatable(element, _a) {\n    var transition = _a.transition,\n      transitionEnd = _a.transitionEnd,\n      target = tslib.__rest(_a, [\"transition\", \"transitionEnd\"]);\n    var origin = getOrigin(target, transition || {}, element);\n    checkTargetForNewValues(element, target, origin);\n    return tslib.__assign({\n      transition: transition,\n      transitionEnd: transitionEnd\n    }, target);\n  }\n});\nvar useVisualState = makeUseVisualState({\n  scrapeMotionValuesFromProps: createObject,\n  createRenderState: createObject\n});\n/**\n * This is not an officially supported API and may be removed\n * on any version.\n * @internal\n */\nfunction useAnimatedState(initialState) {\n  var _a = tslib.__read(React.useState(initialState), 2),\n    animationState = _a[0],\n    setAnimationState = _a[1];\n  var visualState = useVisualState({}, false);\n  var element = useConstant(function () {\n    return stateVisualElement({\n      props: {},\n      visualState: visualState\n    }, {\n      initialState: initialState\n    });\n  });\n  React.useEffect(function () {\n    element.mount({});\n    return element.unmount();\n  }, []);\n  React.useEffect(function () {\n    element.setProps({\n      onUpdate: function onUpdate(v) {\n        return setAnimationState(tslib.__assign({}, v));\n      }\n    });\n  });\n  var startAnimation = useConstant(function () {\n    return function (animationDefinition) {\n      return animateVisualElement(element, animationDefinition);\n    };\n  });\n  return [animationState, startAnimation];\n}\n\n// Keep things reasonable and avoid scale: Infinity. In practise we might need\n// to add another value, opacity, that could interpolate scaleX/Y [0,0.01] => [0,1]\n// to simply hide content at unreasonable scales.\nvar maxScale = 100000;\nvar invertScale = function invertScale(scale) {\n  return scale > 0.001 ? 1 / scale : maxScale;\n};\nvar hasWarned = false;\n/**\n * Returns a `MotionValue` each for `scaleX` and `scaleY` that update with the inverse\n * of their respective parent scales.\n *\n * This is useful for undoing the distortion of content when scaling a parent component.\n *\n * By default, `useInvertedScale` will automatically fetch `scaleX` and `scaleY` from the nearest parent.\n * By passing other `MotionValue`s in as `useInvertedScale({ scaleX, scaleY })`, it will invert the output\n * of those instead.\n *\n * @motion\n *\n * ```jsx\n * const MyComponent = () => {\n *   const { scaleX, scaleY } = useInvertedScale()\n *   return <motion.div style={{ scaleX, scaleY }} />\n * }\n * ```\n *\n * @library\n *\n * ```jsx\n * function MyComponent() {\n *   const { scaleX, scaleY } = useInvertedScale()\n *   return <Frame scaleX={scaleX} scaleY={scaleY} />\n * }\n * ```\n *\n * @deprecated\n * @internal\n */\nfunction useInvertedScale(scale) {\n  var parentScaleX = useMotionValue(1);\n  var parentScaleY = useMotionValue(1);\n  var visualElement = useVisualElementContext();\n  heyListen.invariant(!!(scale || visualElement), \"If no scale values are provided, useInvertedScale must be used within a child of another motion component.\");\n  heyListen.warning(hasWarned, \"useInvertedScale is deprecated and will be removed in 3.0. Use the layout prop instead.\");\n  hasWarned = true;\n  if (scale) {\n    parentScaleX = scale.scaleX || parentScaleX;\n    parentScaleY = scale.scaleY || parentScaleY;\n  } else if (visualElement) {\n    parentScaleX = visualElement.getValue(\"scaleX\", 1);\n    parentScaleY = visualElement.getValue(\"scaleY\", 1);\n  }\n  var scaleX = useTransform(parentScaleX, invertScale);\n  var scaleY = useTransform(parentScaleY, invertScale);\n  return {\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\nexports.AnimatePresence = AnimatePresence;\nexports.AnimateSharedLayout = AnimateSharedLayout;\nexports.DragControls = DragControls;\nexports.FlatTree = FlatTree;\nexports.FramerTreeLayoutContext = FramerTreeLayoutContext;\nexports.LayoutGroupContext = LayoutGroupContext;\nexports.LazyMotion = LazyMotion;\nexports.MotionConfig = MotionConfig;\nexports.MotionConfigContext = MotionConfigContext;\nexports.MotionValue = MotionValue;\nexports.PresenceContext = PresenceContext;\nexports.SharedLayoutContext = SharedLayoutContext;\nexports.addScaleCorrection = addScaleCorrection;\nexports.animate = animate;\nexports.animateVisualElement = animateVisualElement;\nexports.animationControls = animationControls;\nexports.batchLayout = batchLayout;\nexports.createBatcher = createBatcher;\nexports.createCrossfader = createCrossfader;\nexports.createDomMotionComponent = createDomMotionComponent;\nexports.createMotionComponent = createMotionComponent;\nexports.domAnimation = domAnimation;\nexports.domMax = domMax;\nexports.flushLayout = flushLayout;\nexports.isValidMotionProp = isValidMotionProp;\nexports.m = m;\nexports.motion = motion;\nexports.motionValue = motionValue;\nexports.resolveMotionValue = resolveMotionValue;\nexports.snapshotViewportBox = snapshotViewportBox;\nexports.transform = transform;\nexports.useAnimation = useAnimation;\nexports.useCycle = useCycle;\nexports.useDeprecatedAnimatedState = useAnimatedState;\nexports.useDeprecatedInvertedScale = useInvertedScale;\nexports.useDomEvent = useDomEvent;\nexports.useDragControls = useDragControls;\nexports.useElementScroll = useElementScroll;\nexports.useIsPresent = useIsPresent;\nexports.useMotionTemplate = useMotionTemplate;\nexports.useMotionValue = useMotionValue;\nexports.usePresence = usePresence;\nexports.useReducedMotion = useReducedMotion;\nexports.useSpring = useSpring;\nexports.useTransform = useTransform;\nexports.useVelocity = useVelocity;\nexports.useViewportScroll = useViewportScroll;\nexports.visualElement = visualElement;"],"names":["Object","defineProperty","exports","value","tslib","React","heyListen","styleValueTypes","popmotion","sync","_interopDefaultLegacy","e","_interopNamespace","__esModule","n","create","keys","forEach","k","d","getOwnPropertyDescriptor","get","enumerable","freeze","React__namespace","React__default","sync__default","createDefinition","propNames","isEnabled","props","some","name","featureDefinitions","measureLayout","animation","exit","drag","focus","hover","tap","pan","layoutAnimation","loadFeatures","features","key","Component","LazyContext","createContext","strict","featureNames","numFeatures","length","MotionConfigContext","transformPagePoint","p","isStatic","MotionContext","useVisualElementContext","useContext","visualElement","PresenceContext","useConstant","init","ref","useRef","current","usePresence","context","isPresent","onExitComplete","register","id","useUniqueId","useEffect","counter","incrementId","LayoutGroupContext","isBrowser","window","useIsomorphicLayoutEffect","useLayoutEffect","useVisualElement","visualState","createVisualElement","config","lazyContext","parent","presenceContext","layoutId","_a","layoutGroupId","undefined","useLayoutId","visualElementRef","renderer","__assign","presenceId","blockInitialAnimation","initial","setProps","isPresenceRoot","syncRender","animationState","animateChanges","notifyUnmount","isRefObject","prototype","hasOwnProperty","call","isVariantLabels","v","Array","isArray","isVariantLabel","resolveVariantFromProps","definition","custom","currentValues","currentVelocity","variants","resolveVariant","getProps","forEachValue","getCurrent","velocity","getVelocity","getVelocity$1","checkIfControllingVariants","animate","start","whileHover","whileDrag","whileTap","whileFocus","checkIfVariantNode","Boolean","useCreateMotionContext","inherit","getCurrentTreeVariants","useMemo","variantLabelsAsDependency","prop","join","createMotionComponent","preloadedFeatures","useRender","useVisualState","forwardRef","externalRef","i","name_1","push","createElement","useFeatures","Fragment","Provider","useCallback","instance","mount","unmount","useMotionRef","createMotionProxy","createConfig","customMotionComponentConfig","componentCache","Map","Proxy","_target","has","set","lowercaseSVGElements","isSVGComponent","includes","indexOf","test","valueScaleCorrection","addScaleCorrection","correctors","transformAxes","transformProps","sortTransformProps","a","b","operationKey","axesKey","transformPropSet","Set","isTransformProp","transformOriginProps","isTransformOriginProp","isForcedMotionValue","layout","isMotionValue","translateAlias","x","y","z","transformPerspective","isCSSVariable$1","startsWith","getValueAsType","type","transform","int","number","Math","round","numberValueTypes","borderWidth","px","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderRadius","radius","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","width","maxWidth","height","maxHeight","size","top","right","bottom","left","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","rotate","degrees","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","distance","translateX","translateY","translateZ","perspective","opacity","alpha","originX","progressPercentage","originY","originZ","zIndex","fillOpacity","strokeOpacity","numOctaves","buildHTMLStyles","state","latestValues","projection","layoutState","options","transformTemplate","buildProjectionTransform","buildProjectionTransformOrigin","style","vars","transformKeys","transformOrigin","hasTransform","hasTransformOrigin","transformIsNone","valueType","valueAsType","default","isHydrated","correctedValue","process","applyTo","num","deltaFinal","treeScale","_b","transformIsDefault","_c","enableHardwareAcceleration","_d","allowTransformNone","transformString","sort","transformHasZ","numTransformKeys","trim","buildTransform","buildTransformOrigin","createHtmlRenderState","copyRawValuesOnly","target","source","useStyle","assign","useInitialMotionValues","transformValues","useHTMLProps","htmlProps","draggable","userSelect","WebkitUserSelect","WebkitTouchCallout","touchAction","validMotionProps","isValidMotionProp","shouldForward","emotionIsPropValid_1","calcOrigin$1","origin","offset","progressToPixels","progress","dashKeys","array","camelKeys","buildSVGAttrs","attrX","attrY","pathLength","pathSpacing","pathOffset","__rest","attrs","dimensions","totalPathLength","calcSVGTransformOrigin","totalLength","spacing","useDashCase","buildSVGPath","createSvgRenderState","useSVGProps","visualProps","rawStyles","createUseRender","forwardMotionProps","filteredProps","isDom","filterProps","elementProps","CAMEL_CASE_PATTERN","camelToDash","str","replace","toLowerCase","renderHTML","element","setProperty","camelCaseAttributes","renderSVG","renderState","setAttribute","scrapeMotionValuesFromProps$1","newValues","scrapeMotionValuesFromProps","toUpperCase","isAnimationControls","isKeyframesTarget","resolveMotionValue","unwrappedValue","mix","toValue","makeState","createRenderState","onMount","makeLatestValues","makeUseVisualState","scrapeMotionValues","values","motionValues","isControllingVariants","isVariantNode","variantToSet","resolved","transitionEnd","transition","svgMotionConfig","getBBox","getBoundingClientRect","tagName","getTotalLength","AnimationType","htmlMotionConfig","createDomMotionConfig","baseConfig","addDomEvent","eventName","handler","addEventListener","removeEventListener","useDomEvent","isMouseEvent","event","PointerEvent","pointerType","MouseEvent","isTouchEvent","touches","defaultPagePoint","pageX","pageY","pointFromTouch","pointType","point","changedTouches","pointFromMouse","extractEventInfo","wrapHandler","shouldFilterPrimaryPointer","eventHandler","listener","button","mouseEventNames","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","pointerenter","pointerleave","touchEventNames","getPointerEventName","onpointerdown","ontouchstart","onmousedown","addPointerEvent","usePointerEvent","createLock","lock","globalHorizontalLock","globalVerticalLock","getGlobalLock","openHorizontal_1","openVertical_1","isDragActive","openGestureLock","createHoverEvent","isActive","callback","info","setActive","Hover","isNodeOrChild","child","parentElement","useUnmountEffect","makeRenderlessComponent","hook","gestureAnimations","onTap","onTapStart","onTapCancel","hasPressListeners","isPressing","cancelPointerEndListeners","removePointerEndListener","checkPointerEnd","Tap","onPointerUp","getInstance","onPointerCancel","pipe","Focus","onHoverStart","onHoverEnd","shallowCompare","next","prev","prevLength","secondsToMilliseconds","seconds","easingLookup","linear","easeIn","easeInOut","easeOut","circIn","circInOut","circOut","backIn","backInOut","backOut","anticipate","bounceIn","bounceInOut","bounceOut","easingDefinitionToFunction","invariant","__read","x1","y1","x2","y2","cubicBezier","isAnimatable","complex","underDampedSpring","stiffness","damping","restDelta","restSpeed","criticallyDampedSpring","to","sqrt","linearTween","ease","duration","keyframes","defaultTransitions","backgroundColor","color","defaultValueTypes","outlineColor","fill","stroke","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","filter","WebkitFilter","getDefaultValueType","getAnimatableNone","defaultValueType","legacyRepeatWarning","convertTransitionToAnimationOptions","times","yoyo","flip","loop","repeatDelay","isEasingArray","map","warning","repeatType","repeat","getPopmotionAnimationOptions","valueKey","transitionFactory","__spreadArray","from","hydrateKeyframes","when","delay","delayChildren","staggerChildren","staggerDirection","isTransitionDefined","isZero","parseFloat","getZeroUnit","potentialUnitType","getValueTransition","startAnimation","onComplete","delayTimer","controls","valueTransition","isTargetAnimatable","isOriginAnimatable","onUpdate","inertia","stop","getAnimation","getDelayFromTransition","setTimeout","clearTimeout","addUniqueItem","arr","item","removeItem","index","splice","SubscriptionManager","this","subscriptions","add","_this","notify","c","numSubscriptions","getSize","clear","MotionValue","timeDelta","lastUpdated","updateSubscribers","velocityUpdateSubscribers","renderSubscribers","canTrackVelocity","updateAndNotify","render","getFrameData","delta","timestamp","postRender","scheduleVelocityCheck","velocityCheck","hasAnimated","isNaN","onChange","subscription","clearListeners","onRenderRequest","attach","passiveEffect","getPrevious","velocityPerSecond","Promise","resolve","stopAnimation","then","clearAnimation","isAnimating","destroy","motionValue","testValueType","dimensionValueTypes","percent","vw","vh","parse","findDimensionValueType","find","valueTypes","findValueType","setMotionValue","hasValue","getValue","addValue","setTarget","makeTargetAnimatable","setVariants","variantLabels","reverse","variant","getVariant","variantChildren","checkTargetForNewValues","newValueKeys","numNewValues","targetValue","readValue","setBaseTarget","getOriginFromTransition","getOrigin","animateVisualElement","notifyAnimationStart","animations","animateVariant","all","resolvedDefinition","animateTarget","notifyAnimationComplete","getDefaultTransition","transitionOverride","getChildAnimations","forwardDelay","maxStaggerDuration","generateStaggerDuration","sortByTreeOrder","animateChildren","first","last","_e","_f","animationTypeState","getState","valueTarget","shouldBlockAnimation","sortNodePosition","protectedKeys","needsAnimating","shouldBlock","variantPriorityOrder","Animate","Drag","Exit","reversePriorityOrder","numAnimationTypes","createAnimationState","animateList","createTypeState","allAnimatedKeys","isInitialRender","buildResolvedTypeValues","acc","changedActiveType","getVariantContext","removedKeys","encounteredKeys","removedVariantIndex","Infinity","_loop_1","typeState","propIsVariant","activeDelta","isInherited","manuallyAnimateOnMount","prevProp","shouldAnimateType","variantsHaveChanged","definitionList","resolvedValues","reduce","prevResolvedValues","allKeys","markToAnimate","delete","apply","fallbackAnimation_1","fallbackTarget","getBaseTarget","shouldAnimate","isAnimated","setAnimateFunction","makeAnimator","subscribe","PanSession","handlers","startEvent","lastMoveEvent","lastMoveEventInfo","updatePoint","getPanInfo","history","isPanStarted","isDistancePastThreshold","onStart","onMove","handlePointerMove","transformPoint","buttons","handlePointerUp","update","end","onEnd","onSessionEnd","panInfo","initialInfo","onSessionStart","removeListeners","updateHandlers","cancelSync","subtractPoint","lastDevicePoint","startDevicePoint","timestampedPoint","lastPoint","time","noop","any","convertBoundingBoxToAxisBox","min","max","axisBox","zeroDelta","translate","originPoint","eachAxis","isNear","maxDistance","calcLength","axis","calcOrigin","sourceLength","targetLength","clamp","updateAxisDelta","updateBoxDelta","defaultOrigin","calcRelativeAxis","relative","applyConstraints","elastic","calcRelativeAxisConstraints","calcViewportAxisConstraints","layoutAxis","constraintsAxis","resolveAxisElastic","dragElastic","minLabel","maxLabel","resolvePointElastic","label","getBoundingBox","topLeft","bottomRight","transformBoundingBox","compareByDepth","depth","isProjecting","shouldResetTransform","collectProjectingAncestors","ancestors","updateLayoutMeasurement","box","getLayoutState","notifyBeforeLayoutMeasure","measureViewportBox","layoutCorrected","notifyLayoutMeasure","prevViewportBox","rebaseProjectionTarget","snapshotViewportBox","calcRelativeOffsetAxis","calcRelativeOffset","checkIfParentHasChanged","prevId","getLayoutId","nextId","isDraggable","_dragX","resetAxis","originAxis","scalePoint","applyPointDelta","boxScale","applyAxisDelta","applyBoxDelta","applyAxisTransforms","final","transforms","scaleKey","originKey","axisOrigin","xKeys","yKeys","applyBoxTransforms","finalBox","removePointDelta","removeAxisTransforms","removeAxisDelta","removeBoxTransforms","unresolvedJobs","pushJob","stack","job","pointer","batchLayout","flushLayout","reads","writes","setRead","setWrite","numStacks","executeJob","lastPointerEvent","elementDragControls","WeakMap","VisualElementDragControls","isDragging","currentDirection","constraints","hasMutatedConstraints","cursorProgress","openGlobalLock","panSession","enableLayoutProjection","originEvent","snapToCursor","stopMotion","initialPoint","getViewportPointFromEvent","cancelLayout","read","write","children","addChild","collectProjectingChildren","tree","hasManuallySetCursorOrigin","isLayoutDrag","lockProjectionTarget","resetTransform","restoreTransform","getAxisMotionValue","isExternalDrag","scheduleUpdateLayoutProjection","axisValue","flushSync","preRender","resolveDragConstraints","dragPropagation","onDragStart","dragDirectionLock","lockThreshold","direction","abs","getCurrentDirection","onDirectionLock","updateAxis","onDrag","dragConstraints","resolveRefConstraints","layoutBox","calcRelativeConstraints","resolveDragElastic","relativeConstraints","rebaseAxisConstraints","onMeasureDragConstraints","constraintsElement","constraintsBox","measuredConstraints","calcViewportConstraints","userConstraints","convertAxisBoxToBoundingBox","cancelDrag","unlockProjectionTarget","animateDragEnd","onDragEnd","shouldDrag","length_1","center","updateAxisMotionValue","updateVisualElementAxis","nextValue","axisLayout","axisLength","axisProgress","calcConstrainedMinPoint","setProjectionTargetAxis","_g","dragMomentum","remainingProps","dragKey","_dragY","dragTransition","isRelative","projectionParent","getProjectionParent","getLatestValues","convertToRelativeProjection","relativeConstraints_1","targetFinal","momentumAnimations","bounceStiffness","bounceDamping","timeConstant","startAxisValueAnimation","startLayoutAnimation","onDragTransitionEnd","stopLayoutAnimation","currentValue","boxProgress","updateConstraints","calcPositionFromProgress","onReady","stopPointerListener","dragListener","stopResizeListener","stopLayoutUpdateListener","onLayoutUpdate","prevDragCursor","Presence","VisibilityAction","onPan","onPanStart","onPanEnd","onPanSessionStart","hasPanEvents","groupDragControls","dragControls","isCSSVariable","cssVariableRegex","getVariableValue","match","exec","parseCSSVariable","token","fallback","getComputedStyle","getPropertyValue","pixelsToPercent","pixels","varToken","borderCorrectionDefinition","latest","_layoutState","defaultScaleCorrectors","boxShadow","original","containsCSSVariables","cssVariables","shadow","template","createTransformer","xScale","yScale","averageScale","output","i_1","cssVariable","_super","arguments","frameTarget","currentAnimationTarget","stopAxisAnimation","isAnimatingTree","originBox","targetBox","visibilityAction","shouldStackAnimate","prevParent","safeToRemove","prevParentViewportBox","parentLayout","isProvidedCorrectDataForRelativeSharedLayout","boxHasMoved","hasMoved","isTargetLocked","animateAxis","setVisibility","Show","notifyLayoutAnimationComplete","__extends","componentDidMount","animateMotionValue","unsubLayoutReady","layoutSafeToRemove","componentWillUnmount","axisIsEqual","layoutProgress","getProjectionAnimationProgress","frame","tweenAxis","unsubscribeProgress","layoutTransition","defaultLayoutTransition","isZeroBox","zeroAxis","defaultHandler","layoutReady","notifyLayoutReady","createBatcher","queue","flush","order","presence","Present","assignProjectionToSnapshot","SharedLayoutContext","FramerTreeLayoutContext","isSharedLayout","forceUpdate","Measure","syncLayout","framerSyncLayout","onUnmount","remove","getSnapshotBeforeUpdate","syncUpdate","componentDidUpdate","layoutAnimations","createLayoutState","deltaTransform","zeroLayout","buildLayoutProjectionTransform","latestTransform","identityProjection","buildLayoutProjectionTransformOrigin","names","updateLayoutDeltas","treePath","treeLength","node","applyTreeDeltas","FlatTree","isDirty","treeType","build","_getBaseTarget","_makeTargetAnimatable","_measureViewportBox","renderInstance","readValueFromInstance","_resetTransform","_restoreTransform","removeValueFromRenderState","_sortNodePosition","unsubscribeFromLeadVisualElement","crossfader","projectionTargetProgress","removeFromVariantTree","lifecycles","managers","propSubscriptions","clearAllListeners","manager","updatePropListeners","on","propListener","args","_i","createLifecycles","leadProjection","leadLatestValues","hasViewportBoxUpdated","valueSubscriptions","prevMotionValues","baseTarget","isProjectionReady","triggerBuild","valuesToRender","crossfadedValues","getCrossfadeState","notifyUpdate","_updateTreeLayoutProjection","layoutTree","fireUpdateLayoutProjection","initialMotionValues","path","isVisible","isMounted","newInstance","pointTo","addVariantChild","updateLayoutProjection","closestVariantNode","getClosestVariantNode","other","updateTreeLayoutProjection","getStaticValue","setStaticValue","visibility","scheduleRender","canMutate","removeValue","removeOnChange","latestValue","removeOnRenderRequest","bindToMotionValue","defaultValue","newProps","prevValue","existingValue","updateMotionValuesFromProps","startAtParent","context_1","numVariantProps","variantProps","setCrossfader","newCrossfader","relativeTarget","withTransform","viewportBox","notifySetAxisTarget","force","shouldRebase","relativeOffset","setCurrentViewportBox","notifyLayoutUpdate","prevTreeScaleX","prevTreeScaleY","prevDeltaTransform","notifyViewportBoxUpdate","fireResolveRelativeTargetBox","foundParent","ancestor","resolveRelativeTargetBox","relativeParent","parentProjection","calcRelativeBox","_layoutResetTransform","newLead","onSetAxisTarget","onLayoutAnimationComplete","Entering","BoundingBoxDimension","positionalKeys","isPositionalKey","setAndResetVelocity","isNumOrPxType","getPosFromMatrix","matrix","pos","split","getTranslateFromMatrix","pos2","pos3","_bbox","matrix3d","nonTranslationalTransformKeys","positionalValues","checkAndConvertChangedValueTypes","targetPositionalKeys","removedTransformValues","hasAttemptedToRemoveTransformValues","changedValueTypeKeys","toType","fromType","numKeyframes","removedTransforms","removeNonTranslationalTransform","convertedTarget","changedKeys","originBbox","elementComputedStyle","display","originComputedStyle","targetBbox","convertChangedValueTypes","unitConversion","hasPositionalKey","parseDomVariant","HTMLElement","resolveCSSVariables","htmlConfig","domElement","defaultType","computedStyle","compareDocumentPosition","mutableState","parsed","isProjectionTranform","htmlVisualElement","svgVisualElement","getAttribute","_element","createDomVisualElement","featureBundle","motion","m","getPresenceId","PresenceChild","_onExitComplete","presenceAffectsLayout","presenceChildren","newChildrenMap","childId","allComplete","isComplete","_","getChildKey","createCrossfader","lead","follow","crossfadeOpacity","preserveFollowOpacity","prevOptions","leadState","followState","_isActive","finalCrossfadeFrame","prevUpdate","startCrossfadeAnimation","hasUpdated","_onComplete","updateCrossfade","latestLeadValues","latestFollowValues","prevValues","leadTargetOpacity","followTargetOpacity","easeCrossfadeIn","easeCrossfadeOut","hasFollowElement","numBorders","borderLabel","borders","followRadius","getRadius","leadRadius","mixColor","mixValues","fromLead","toLead","initialProgress","reset","setOptions","newOptions","compress","easing","radiusName","layoutStack","leadIsExiting","prevState","needsCrossfadeAnimation","getLead","updateSnapshot","clearSnapshot","updateLeadAndFollow","Exiting","shouldCrossfade","getFollowLayout","AnimateSharedLayout","stacks","hasMounted","updateScheduled","renderScheduled","syncContext","scheduleUpdate","removeChild","shouldComponentUpdate","updateStacks","getStack","hasRotate","resetValues","resetRotate","addToStack","removeFromStack","contextType","isLazyBundle","domAnimation","domMax","useMotionValue","setLatest_1","useState","useOnChange","useCombineMotionValues","combineValues","updateValue","unsubscribe","useMultiOnChange","getMixer","isCustomValueType","useImmediate","argOffset","inputValue","inputRange","outputRange","interpolator","interpolate","mixer","useTransform","input","inputRangeOrTransformer","transformer","useListTransform","numValues","createScrollMotionValues","scrollX","scrollY","scrollXProgress","scrollYProgress","setProgress","maxOffset","createScrollUpdater","getOffsets","xOffset","yOffset","xMaxOffset","yMaxOffset","viewportScrollValues","getViewportScrollOffsets","pageXOffset","pageYOffset","document","body","clientWidth","innerWidth","clientHeight","innerHeight","prefersReducedMotion","hasListeners","animationControls","pendingAnimations","subscribers","animations_1","setValues","DragControls","componentControls","nativeEvent","createDragControls","createObject","stateVisualElement","_state","initialState","invertScale","hasWarned","AnimatePresence","exitBeforeEnter","forceRender","unloadingRef","forcedRenderCount","setForcedRenderCount","useForceUpdate","layoutContext","filteredChildren","filtered","Children","isValidElement","onlyElements","presentChildren","allChildren","exiting","updateChildLookup","childrenToRender","presentKeys","targetKeys","numPresent","insertionIndex","removeIndex","findIndex","presentChild","cloneElement","LazyMotion","setIsLoaded","loadedRenderer","loadedFeatures","MotionConfig","transitionDependency","toString","createDomMotionComponent","useAnimation","useCycle","items","setItem","wrap","useDeprecatedAnimatedState","setAnimationState","animationDefinition","useDeprecatedInvertedScale","parentScaleX","parentScaleY","useDragControls","useElementScroll","updateScrollValues","scrollLeft","scrollTop","scrollWidth","offsetWidth","scrollHeight","offsetHeight","getElementScrollOffsets","scrollListener","passive","resizeListener","useIsPresent","useMotionTemplate","fragments","numFragments","buildValue","useReducedMotion","matchMedia","motionMediaQuery_1","setReducedMotionPreferences","matches","addListener","initPrefersReducedMotion","shouldReduceMotion","setShouldReduceMotion","useSpring","activeSpringAnimation","useVelocity","newVelocity","useViewportScroll","addEventListeners"],"sourceRoot":""}